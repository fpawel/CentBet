(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S;$.Define($$,{CentBet:{Client:{Admin:{Level:$.Class({},{get_color:function(){return function(T){return T.$==1?["lightgrey","red"]:T.$==2?["lightgrey","green"]:["white","navy"];};}}),LocalStorage:$.Class({Get:function(U){var V,W,X,Y,Z;try{W=this.strg.getItem(U);X=a.parse(W);V={$:0,$0:X};}catch(Y){Z=this.strg;V={$:1,$0:"local storage get item "+b.prettyPrint(U)+" error : "+b.prettyPrint(Y)+", storage "+b.prettyPrint(Z)};}return V;},Set:function(_0,_1){var _2,_3,_4,_5;try{_3=a.stringify(_1);_2={$:0,$0:this.strg.setItem(_0,_3)};}catch(_4){_5=this.strg;_2={$:1,$0:"local storage set item "+b.prettyPrint(_0)+" error : "+b.prettyPrint(_4)+", value "+b.prettyPrint(_1)+", storage "+b.prettyPrint(_5)};}return _2;}},{New:function(){var _7;_7=$.New(this,{});_7.strg=c.localStorage;return _7;}}),Render:function(){var _8;_8=$.New(k,{$:0});return f.Concat(g.ofArray([j.RenderCommandPrompt(),(j.op_SpliceUntyped())(f.Element("br",[],_8)),j.RenderRecords()]));},RenderCommandPrompt:function(){var _9;_9=g.ofArray([(j.op_SpliceUntyped())(f.Element("span",g.ofArray([l.Style("margin-left","10px")]),$.New(k,{$:0}))),(j.op_SpliceUntyped())(f.Element("label",g.ofArray([m.Create("for",j["cmd-input"]())]),g.ofArray([f.TextNode("Input here:")]))),j.renderInput()]);return f.Concat(_9);},RenderMenu:function(){var _,bb,bj;_=function(ba){return ba;};bb=g.ofArray([f.Element("a",n.toList(n.delay(function(){return n.append([m.Create("href","#")],n.delay(function(){return[l.Handler("click",function(){return function(){return j.varConsole().Clear();};})];}));})),g.ofArray([f.TextNode("Clear console")])),f.Element("a",n.toList(n.delay(function(){return n.append([m.Create("href","#")],n.delay(function(){return[l.Handler("click",function(){return function(){return j.varCommandsHistory().Clear();};})];}));})),g.ofArray([f.TextNode("Clear history")]))]);bj=g.map(_,bb);return f.Concat(bj);},RenderRecords:function(){var bk,bo;bk=function(bl){var bm,bn;bn=$.New(k,{$:0});bm=g.ofArray([(j.renderRecord())(bl),(j.op_SpliceUntyped())(f.Element("br",[],bn))]);return f.Concat(bm);};bo=j.varConsole().get_View();return f.ConvertSeq(bk,bo);},addRecord:function(bp,bq){return j.varConsole().Add({Id:o.Fresh(),Text:bq,Level:bp});},"cmd-input":$.Field(function(){return"cmd-input";}),cmdKey:function(br){return br.Id;},doc:function(bs){return bs;},op_SpliceUntyped:$.Field(function(){return function(bt){return j.doc(bt);};}),recordKey:function(bu){return bu.Id;},renderInput:function(){var bv,bw,bx,by,bB,bE,bI,bJ,bX;bv=p.Create("");bw=p.Create(null);bx=p.Create(false);by=q.Delay(function(){r.Set(bx,true);return q.Bind(j.send(r.Get(bv)),function(){r.Set(bx,false);r.Set(bv,"");return q.Return(null);});});bB=function(bC){var bD;bD={$:1,$0:bC};j.varCmd=function(){return bD;};return r.Set(bv,bC.Text);};bE=function(bF){var bG,bH;bG=j.tryGetCommandFromHistory(bF);bH=s.map(bB,bG);return;};bI=bx.get_View();bJ=function(bK){var bL;bL=g.ofArray([f.Input(n.toList(n.delay(function(){return n.append([m.Create("id",j["cmd-input"]())],n.delay(function(){return n.append(bK?[m.Create("disabled","disabled")]:n.empty(),n.delay(function(){return n.append([l.Style("width","80%")],n.delay(function(){return n.append([l.CustomVar(bw,function(bQ){return function(){return bQ.focus();};},function(){return{$:0};})],n.delay(function(){return[l.Handler("keydown",function(){return function(bV){var bW;bW=bV.keyCode;return bW===13?q.Start(by,{$:0}):bW===38?bE(true):bW===40?bE(false):null;};})];}));}));}));}));})),bv)]);return f.Concat(bL);};bX=t.Map(bJ,bI);return f.EmbedView(bX);},renderRecord:$.Field(function(){var bY;bY=function(bZ){var b0,b1,b2;b0=(u.get_color())(bZ.Level);b1=b0[1];b2=b0[0];return(j.op_SpliceUntyped())(f.Element("span",g.ofArray([l.Style("color",b1),l.Style("background",b2)]),g.ofArray([f.TextNode(bZ.Text)])));};return function(b3){var b4;b4=t.Map(bY,b3);return f.EmbedView(b4);};}),send:function(b5){return q.Delay(function(){var b7,b8,b9,b_,b$,ca;b7=v.Trim(b5);j.addRecord($.New(u,{$:2}),b7);b9=r.Get(j.varCommandsHistory().Var);if(n.isEmpty(b9)){b_=true;}else{b$=w.last(b9);b_=b$.Text!==b7;}if(b_){j.varCommandsHistory().Add({Id:o.Fresh(),Text:b7});ca=q.Return(null);}else{ca=q.Return(null);}b8=ca;return q.Combine(b8,q.Delay(function(){return q.TryWith(q.Delay(function(){return q.Bind(y.Async("WebFace:1",[b7]),function(cd){var ce;cd[0];ce=cd[1];j.addRecord($.New(u,{$:0}),ce);return q.Return(null);});}),function(cf){j.addRecord($.New(u,{$:1}),cf.message);return q.Return(null);});}));});},tryGetCommandFromHistory:function(cg){var ch,ci,cj,ck,cl,cm,cn,cq,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS;ch=r.Get(j.varCommandsHistory().Var);ci=n.length(ch);if(ci===0){cj={$:0};}else{if(j.varCmd().$==1){cm=j.varCmd().$0.Id;cn=function(co){return function(cp){return[cp,co];};};cq=function(cr){var cs,ct;cs=cr[0];cr[1];ct=cs.Id;return z.Equals(ct,cm);};cu=r.Get(j.varCommandsHistory().Var);cv=n.mapi(cn,cu);cw=n.tryFind(cq,cv);cx=[cw,cg];if(cx[0].$==1){if(cx[1]){cx[0].$0[0];cA=cx[0].$0[1];if(ci>0?cA<ci-1:false){cC=cx[0].$0[1];cx[0].$0[0];cB=cC+1;}else{if(cx[0].$==1){if(cx[1]){cE=cx[1]?ci-1:0;}else{cx[0].$0[0];cF=cx[0].$0[1];if(ci>0?cF>0:false){cH=cx[0].$0[1];cx[0].$0[0];cG=cH-1;}else{cG=cx[1]?ci-1:0;}cE=cG;}cD=cE;}else{cD=cx[1]?ci-1:0;}cB=cD;}cz=cB;}else{if(cx[0].$==1){if(cx[1]){cJ=cx[1]?ci-1:0;}else{cx[0].$0[0];cK=cx[0].$0[1];if(ci>0?cK>0:false){cM=cx[0].$0[1];cx[0].$0[0];cL=cM-1;}else{cL=cx[1]?ci-1:0;}cJ=cL;}cI=cJ;}else{cI=cx[1]?ci-1:0;}cz=cI;}cy=cz;}else{if(cx[0].$==1){if(cx[1]){cO=cx[1]?ci-1:0;}else{cx[0].$0[0];cP=cx[0].$0[1];if(ci>0?cP>0:false){cR=cx[0].$0[1];cx[0].$0[0];cQ=cR-1;}else{cQ=cx[1]?ci-1:0;}cO=cQ;}cN=cO;}else{cN=cx[1]?ci-1:0;}cy=cN;}cl=cy;}else{cl=ci-1;}ck=cl;cS=n.nth(ck,ch);cj={$:1,$0:cS};}return cj;},varCmd:$.Field(function(){return{$:0};}),varCommandsHistory:$.Field(function(){var cT,cV;cT=function(cU){return j.cmdKey(cU);};cV=A.LocalStorage("CentBetConsoleCommandsHistory",{Encode:(C.get_Default().EncodeRecord(undefined,[["Id",C.get_Default().EncodeUnion(o,"$",[[0,[["$0","Item",D,0]]]]),0],["Text",D,0]]))(),Decode:(C.get_Default().DecodeRecord(undefined,[["Id",C.get_Default().DecodeUnion(o,"$",[[0,[["$0","Item",D,0]]]]),0],["Text",D,0]]))()});return E.CreateWithStorage(cT,cV);}),varConsole:$.Field(function(){var cW,cY;cW=function(cX){return j.recordKey(cX);};cY=A.LocalStorage("CentBetConsole",{Encode:(C.get_Default().EncodeRecord(undefined,[["Id",C.get_Default().EncodeUnion(o,"$",[[0,[["$0","Item",D,0]]]]),0],["Text",D,0],["Level",C.get_Default().EncodeUnion(u,"$",[[0,[]],[1,[]],[2,[]]]),0]]))(),Decode:(C.get_Default().DecodeRecord(undefined,[["Id",C.get_Default().DecodeUnion(o,"$",[[0,[["$0","Item",D,0]]]]),0],["Text",D,0],["Level",C.get_Default().DecodeUnion(u,"$",[[0,[]],[1,[]],[2,[]]]),0]]))()});return E.CreateWithStorage(cW,cY);})},Coupon:{Event:$.Class({},{id:function(cZ){return cZ.gameId;}}),Meetup:$.Class({},{id:function(c0){return c0.game.gameId;},inplay:function(c1){return r.Get(c1.gameInfo).playMinute.$==1;},notinplay:function(c2){return r.Get(c2.gameInfo).playMinute.$==0;},viewGameInfo:function(c3){return c3.gameInfo.get_View();}}),Render:function(){var c4,de,df,dg,dq,dz;c4=q.Delay(function(){return q.While(function(){return true;},q.Delay(function(){return q.TryWith(q.Delay(function(){return q.Bind(F.processCoupon(),function(){return q.Bind(F.processEvents(),function(){return q.Return(null);});});}),function(c$){var da;da=function(db){var dc;dc="error updating coupon : "+b.prettyPrint(db);return G?G.log(dc):undefined;};da(c$);return q.Bind(q.Sleep(5000),function(){return q.Return(null);});});}));});q.Start(c4,{$:0});de=t.get_Do();df=F.varInplayOnly().get_View();dg=H.Bind(function(dh){return H.Bind(function(di){var dj,dk,dl,dn,_do,dp;dj=n.isEmpty(di);dk=!dj;dl=function(dm){return I.inplay(dm);};dn=n.filter(dl,di);_do=n.isEmpty(dn);dp=!_do;return H.Const([dk,dp,dh]);},F.meetups().get_View());},df);dq=function(dr){var ds,dt,du,dv,dw,dx,dy;if(dr[0]){if(dr[1]){du=g.ofArray([F.renderMeetups()]);dt=f.Element("table",$.New(k,{$:0}),g.ofArray([f.Element("tbody",[],du)]));}else{if(dr[2]){dw=g.ofArray([f.TextNode("\u0424\u0443\u0442\u0431\u043e\u043b \u0441\u0435\u0433\u043e\u0434\u043d\u044f \u0435\u0449\u0451 \u043d\u0435 \u043d\u0430\u0447\u0430\u043b\u0441\u044f")]);dv=f.Element("h1",[],dw);}else{dx=g.ofArray([F.renderMeetups()]);dv=f.Element("table",$.New(k,{$:0}),g.ofArray([f.Element("tbody",[],dx)]));}dt=dv;}ds=dt;}else{dy=g.ofArray([f.TextNode("\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e \u0444\u0443\u0442\u0431\u043e\u043b\u0435 \u043d\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f")]);ds=f.Element("h1",[],dy);}return ds;};dz=t.Map(dq,dg);return f.EmbedView(dz);},RenderMenu:function(){var dA;dA=g.ofArray([F.renderMenusInplay(),F.renderMenuCountries()]);return f.Concat(dA);},addNewGames:function(dB){var dC,dD,dE,dO,dQ,dS,dT,dU;dC=r.Get(F.meetups().Var);dD=n.toList(dC);F.meetups().Clear();dE=function(dF){var dG,dH,dI,dJ,dK,dL,dM,dN;dG=dF[0];dH=dF[1];dI=dF[2];dJ=dG.gameId;dK=dJ[0];dL=dJ[1];dM=F.tryGetCountry(dK,dL);dN=p.Create(dH);return $.New(I,{game:dG,gameInfo:dN,country:p.Create(dM),hash:dI});};dO=function(dP){return r.Get(dP.gameInfo).order;};dQ=function(dR){return F.meetups().Add(dR);};dS=g.map(dE,dB);dT=n.append(dD,dS);dU=n.sortBy(dO,dT);return n.iter(dQ,dU);},events:$.Field(function(){var dV,dX;dV=function(dW){return J.id(dW);};dX=$.New(k,{$:0});return E.Create(dV,dX);}),meetups:$.Field(function(){var dY,d0;dY=function(dZ){return I.id(dZ);};d0=$.New(k,{$:0});return E.Create(dY,d0);}),processCoupon:function(){return q.Delay(function(){var d2,d4,d5,d6;d2=function(d3){return[d3.game.gameId,d3.hash];};d4=r.Get(F.meetups().Var);d5=n.map(d2,d4);d6=n.toList(d5);return q.Bind(y.Async("WebFace:0",[d6,r.Get(F.varInplayOnly())]),function(d7){var d8,d9,d_;d8=d7[1];d9=d7[2];d_=d7[0];F.updateCoupon(d_,d8,d9);return q.Return(null);});});},processEvents:function(){return q.Delay(function(){var ea,eb,ec,eh,ei,ej,ek;ea=r.Get(F.events().Var);eb=r.Get(F.meetups().Var);ec=function(ed){var ee,eg;ee=function(ef){return z.Equals(ef.gameId,ed.game.gameId);};eg=n.tryFind(ee,ea);return eg.$==0?{$:1,$0:ed.game.gameId}:{$:0};};eh=n.choose(ec,eb);ei=n.toList(eh);if(ei.$==0){ej=q.Return(null);}else{ek=y.Async("WebFace:2",[ei]);ej=q.Bind(ek,function(el){var em;em=q.For(el,function(en){var eo,ep,eq;eo=en[3];en[1];ep=en[0];eq=en[2];F.events().Add($.New(J,{gameId:ep,country:eq,openDate:eo}));return q.Return(null);});return q.Combine(em,q.Delay(function(){return q.For(r.Get(F.meetups().Var),function(es){var et,eu,ev;et=es.game.gameId;eu=et[0];ev=et[1];r.Set(es.country,F.tryGetCountry(eu,ev));return q.Return(null);});}));});}return ej;});},renderMeetup:function(ew,ex,ey){var ez,eA,eB,eC,eD,eE,eF,eG,eL,eM,eN,eS,eT,eU,eV,eW,eX,e2,e3,e4,e9;ez=[ex,r.Get(ew.gameInfo).playMinute,ey];if(ez[0]){if(ez[1].$==0){eB=f.get_Empty();}else{if(ez[2].$==1){eD=ez[2].$0;if(eD!==""?eD!==r.Get(ew.country):false){ez[2].$0;eE=f.get_Empty();}else{eF=ew.gameInfo.get_View();eG=function(eH){var eI,eK;eI=function(eJ){return eJ.$==1;};eK=g.ofArray([eH.drawBack,eH.drawLay,eH.winBack,eH.winLay,eH.loseBack,eH.loseLay]);return n.exists(eI,eK)?F.renderMeetup1(ew):f.get_Empty();};eL=t.Map(eG,eF);eE=f.EmbedView(eL);}eC=eE;}else{eM=ew.gameInfo.get_View();eN=function(eO){var eP,eR;eP=function(eQ){return eQ.$==1;};eR=g.ofArray([eO.drawBack,eO.drawLay,eO.winBack,eO.winLay,eO.loseBack,eO.loseLay]);return n.exists(eP,eR)?F.renderMeetup1(ew):f.get_Empty();};eS=t.Map(eN,eM);eC=f.EmbedView(eS);}eB=eC;}eA=eB;}else{if(ez[2].$==1){eU=ez[2].$0;if(eU!==""?eU!==r.Get(ew.country):false){ez[2].$0;eV=f.get_Empty();}else{eW=ew.gameInfo.get_View();eX=function(eY){var eZ,e1;eZ=function(e0){return e0.$==1;};e1=g.ofArray([eY.drawBack,eY.drawLay,eY.winBack,eY.winLay,eY.loseBack,eY.loseLay]);return n.exists(eZ,e1)?F.renderMeetup1(ew):f.get_Empty();};e2=t.Map(eX,eW);eV=f.EmbedView(e2);}eT=eV;}else{e3=ew.gameInfo.get_View();e4=function(e5){var e6,e8;e6=function(e7){return e7.$==1;};e8=g.ofArray([e5.drawBack,e5.drawLay,e5.winBack,e5.winLay,e5.loseBack,e5.loseLay]);return n.exists(e6,e8)?F.renderMeetup1(ew):f.get_Empty();};e9=t.Map(e4,e3);eT=f.EmbedView(e9);}eA=eT;}return eA;},renderMeetup1:function(e_){var e$,fd,fg,fj,fl,fm,fr,fA;e$=function(fa){var fb,fc;fb=e_.gameInfo.get_View();fc=t.Map(fa,fb);return f.TextView(fc);};fd=function(fe,ff){return f.Element("span",g.ofArray([m.Create("class",fe)]),g.ofArray([ff]));};fg=function(fh,fi){return f.Element("td",g.ofArray([m.Create("class",fh?"kef kef-back":"kef kef-lay")]),g.ofArray([e$(fi)]));};fj=function(fk){return K.formatDecimalOption(fk);};fl=$.New(k,{$:0});fm=g.ofArray([e$(function(fn){var fo,fp,fq;fo=fn.order;fp=fo[0];fq=fo[1];return $$.String(fp)+"."+$$.String(fq);})]);fr=g.ofArray([fd("home-team",f.TextNode(e_.game.home)),fd("game-status",e$(function(fs){return fs.summary;})),fd("away-team",f.TextNode(e_.game.away)),fd("game-status",e$(function(ft){return ft.status;}))]);fA=g.ofArray([f.TextView(e_.country.get_View())]);return f.Element("tr",fl,g.ofArray([f.Element("td",[],fm),f.Element("td",[],fr),fg(true,function(fu){return fj(fu.winBack);}),fg(false,function(fv){return fj(fv.winLay);}),fg(true,function(fw){return fj(fw.drawBack);}),fg(false,function(fx){return fj(fx.drawLay);}),fg(true,function(fy){return fj(fy.loseBack);}),fg(false,function(fz){return fj(fz.loseLay);}),f.Element("td",[],fA)]));},renderMeetups:function(){var fB,fC;fB=F.meetups().get_View();fC=function(fD){var fE,fJ,fN;fE=function(fF){var fG,fH,fI;fG=fF[0];fH=fF[1];fI=fF[2];return F.renderMeetup(fG,fH,fI);};t.get_Do();fJ=H.Bind(function(fK){return H.Bind(function(fL){return H.Bind(function(fM){return H.Const([fK,fL,fM]);},F.varSelectedCountry().get_View());},F.varInplayOnly().get_View());},fD);fN=t.Map(fE,fJ);return f.EmbedView(fN);};return f.ConvertSeq(fC,fB);},renderMenuCountries:function(){var fO,fR,f1;if(G){G.log("render countries menu...");}t.get_Do();fO=H.Bind(function(fP){return H.Bind(function(fQ){return H.Const([fP,fQ]);},F.varSelectedCountry().get_View());},F.viewCountries());fR=function(fS){var fT,fU,fV,fW,fY,fZ,f0;fT=fS[0];fU=fS[1];if(n.isEmpty(fT)){fV=f.get_Empty();}else{fW=function(fX){return F.renderMenuItemCountry(fU,fX);};fY=n.map(fW,fT);fZ=f.Concat(fY);f0=F.renderMenuItemAllCountries();fV=f.Append(f0,fZ);}return fV;};f1=t.Map(fR,fO);return f.EmbedView(f1);},renderMenuItemAllCountries:function(){var f2,f3,gb;if(G){G.log("render all countries menu...");}f2=F.varSelectedCountry().get_View();f3=function(f4){return f.Element("a",n.toList(n.delay(function(){var f6,f7,f8;if(f4.$==1){f7=f4.$0;if(f7!==""){f4.$0;f8=n.empty();}else{f8=[m.Create("class","active")];}f6=f8;}else{f6=[m.Create("class","active")];}return n.append(f6,n.delay(function(){return n.append([m.Create("href","#")],n.delay(function(){return[l.Handler("click",function(){return function(){return r.Set(F.varSelectedCountry(),{$:0});};})];}));}));})),g.ofArray([f.TextNode("\u0412\u0441\u0435 \u0441\u0442\u0440\u0430\u043d\u044b")]));};gb=t.Map(f3,f2);return f.EmbedView(gb);},renderMenuItemCountry:function(gc,gd){return f.Element("a",n.toList(n.delay(function(){var gf,gg,gh;if(gc.$==1){gg=gc.$0;if(gg===gd){gc.$0;gh=[m.Create("class","active")];}else{gh=n.empty();}gf=gh;}else{gf=n.empty();}return n.append(gf,n.delay(function(){return n.append([m.Create("href","#")],n.delay(function(){return[l.Handler("click",function(){return function(){return r.Set(F.varSelectedCountry(),{$:1,$0:gd});};})];}));}));})),g.ofArray([f.TextNode(gd)]));},renderMenusInplay:function(){var gm,gn,gD;gm=F.varInplayOnly().get_View();gn=function(go){var gp,gr,gC;gp=function(gq){return gq;};gr=g.ofArray([f.Element("a",n.toList(n.delay(function(){return n.append([m.Create("href","#")],n.delay(function(){return n.append([l.Handler("click",function(){return function(){r.Set(F.varSelectedCountry(),{$:0});return r.Set(F.varInplayOnly(),true);};})],n.delay(function(){return go?[m.Create("class","active")]:n.empty();}));}));})),g.ofArray([f.TextNode("\u0412 \u0438\u0433\u0440\u0435")])),f.Element("a",n.toList(n.delay(function(){return n.append([m.Create("href","#")],n.delay(function(){return n.append([l.Handler("click",function(){return function(){r.Set(F.varSelectedCountry(),{$:0});return r.Set(F.varInplayOnly(),false);};})],n.delay(function(){return!go?[m.Create("class","active")]:n.empty();}));}));})),g.ofArray([f.TextNode("\u0412\u0441\u0435 \u043c\u0430\u0442\u0447\u0438")]))]);gC=g.map(gp,gr);return f.Concat(gC);};gD=t.Map(gn,gm);return f.EmbedView(gD);},tryGetCountry:function(gE,gF){var gG,gH,gI,gJ,gK,gL,gM;gG=[gE,gF];gH=gG[0];gI=gG[1];gJ=F.tryGetEvent(gH,gI);if(gJ.$==1){if(gJ.$0.country.$==1){gM=gJ.$0.country.$0;gL=gM;}else{gL="";}gK=gL;}else{gK="";}return gK;},tryGetEvent:function(gN,gO){var gP,gQ,gT;gP=[gN,gO];gQ=function(gR){var gS;gS=gR.gameId;return z.Equals(gP,gS);};gT=r.Get(F.events().Var);return n.tryFind(gQ,gT);},updateCoupon:function(gU,gV,gW){var gX,gY,gZ,g2,g3,g4,g5,g7,g_,g$;gX=gU.$==0;if(!gX){gZ=function(g0){var g1;g1="adding new games "+$$.String(g0);return G?G.log(g1):undefined;};g2=gU.get_Length();gZ(g2);gY=F.addNewGames(gU);}else{gY=null;}g3=n.isEmpty(gW);if(!g3){g5=function(g6){return F.meetups().RemoveByKey(g6);};n.iter(g5,gW);g7=function(g8){var g9;g9="removing out games "+$$.String(g8);return G?G.log(g9):undefined;};g_=n.length(gW);g4=g7(g_);}else{g4=null;}g$=function(ha){var hb,hc,hd,he,hf,hg;hb=ha[0];hc=ha[1];hd=ha[2];he=F.meetups().TryFindByKey(hb);if(he.$==1){hg=he.$0;r.Set(hg.gameInfo,hc);hf=void(hg.hash=hd);}else{hf=null;}return hf;};return n.iter(g$,gV);},varInplayOnly:$.Field(function(){return p.Create(true);}),varSelectedCountry:$.Field(function(){return p.Create({$:0});}),viewCountries:function(){var hh,hi;hh=t.get_Do();hi=F.events().get_View();return H.Bind(function(hj){var hk,hm,hn,ho;hk=function(hl){return[hl.gameId,hl];};hm=n.map(hk,hj);hn=M.OfArray(n.toArray(hm));ho=F.viewGames();return H.Bind(function(hp){var hq,hw,hx,hy,hA,hB,hD,hE;hq=function(hr){var hs,ht,hv;hs=hr[0];hr[1];ht=function(hu){return hu.country;};hv=hn.TryFind(hs.gameId);return s.map(ht,hv);};hw=n.choose(hq,hp);hx={$:0};hy=function(hz){return!z.Equals(hx,hz);};hA=n.filter(hy,hw);hB=function(hC){return hC;};hD=n.choose(hB,hA);hE=w.distinct(hD);return H.Const(n.sort(hE));},ho);},hi);},viewGames:$.Field(function(){var hF,hG;hF=t.get_Do();hG=F.meetups().get_View();return H.Bind(function(hH){var hI,hJ;if(n.isEmpty(hH)){hI=H.Const(n.empty());}else{hJ=F.varInplayOnly().get_View();hI=H.Bind(function(hK){var hL,hN,hS,hT;hL=function(hM){return!hK?true:r.Get(hM.gameInfo).playMinute.$==1;};hN=function(hO){var hP,hR;hP=function(hQ){return[hO.game,hQ];};hR=hO.gameInfo.get_View();return t.Map(hP,hR);};hS=n.filter(hL,hH);hT=n.map(hN,hS);return H.Bind(function(hU){return H.Const(hU);},H.Sequence(hT));},hJ);}return hI;},hG);})},Utils:{dateTimeToString:function($s){var $0=this,$this=this;return $$.dateTimeToString($s);},formatDecimal:function(hV){return K.trimEnd(hV.toFixed(6),g.ofArray([48,46]));},formatDecimalOption:function(hW){var hX,hY;if(hW.$==1){hY=hW.$0;hX=K.formatDecimal(hY);}else{hX="";}return hX;},getDatePart:function(hZ){var h0;h0=new N(hZ.getTime());h0.setHours(0,0,0,0);return h0;},mkids:function(h1,h2){var h3,h5,h6,h7,h8;h3=function(h4){return[h2(h4),h4];};h5=g.map(h3,h1);h6=M.OfArray(n.toArray(h5));h7=g.map(h2,h1);h8=O.New1(P.OfSeq(h7));return[h8,h6];},trimEnd:function(h9,h_){var h$,ia,ib,ic,id,ie,_if,ig,ih,ii,ij,ik;h$=[h9,h_];if(h$[0]===""){ia="";}else{if(h$[1].$==1){ic=h$[0];h$[1];id=h$[1].$0;if(ic.charCodeAt(ic.length-1)===id){h$[1].$0;_if=h$[1];ig=h$[0];ie=K.trimEnd(Q.string(ig,{$:0},{$:1,$0:ig.length-2}),_if);}else{if(h$[1].$==1){ii=h$[0];ij=h$[1].$1;ih=K.trimEnd(ii,ij);}else{ih=R.Raise(S.New("C:\\Users\\User\\Documents\\Visual Studio 2015\\Projects\\Betfair\\CentBet\\WebFace\\ClientUtils.fs",9,18));}ie=ih;}ib=ie;}else{ik=h$[0];ib=ik;}ia=ib;}return ia;}}}}});$.OnInit(function(){a=$.Safe($$.JSON);b=$.Safe($$.WebSharper.PrintfHelpers);c=$.Safe($$.window);d=$.Safe($$.WebSharper.UI);e=$.Safe(d.Next);f=$.Safe(e.Doc);g=$.Safe($$.WebSharper.List);h=$.Safe($$.CentBet);i=$.Safe(h.Client);j=$.Safe(i.Admin);k=$.Safe(g.T);l=$.Safe(e.AttrModule);m=$.Safe(e.AttrProxy);n=$.Safe($$.WebSharper.Seq);o=$.Safe(e.Key);p=$.Safe(e.Var);q=$.Safe($$.WebSharper.Concurrency);r=$.Safe(e.Var1);s=$.Safe($$.WebSharper.Option);t=$.Safe(e.View);u=$.Safe(j.Level);v=$.Safe($$.WebSharper.Strings);w=$.Safe($$.Seq);x=$.Safe($$.WebSharper.Remoting);y=$.Safe(x.AjaxRemotingProvider);z=$.Safe($$.WebSharper.Unchecked);A=$.Safe(e.Storage1);B=$.Safe($$.WebSharper.Json);C=$.Safe(B.Provider);D=$.Safe(C.Id);E=$.Safe(e.ListModel);F=$.Safe(i.Coupon);G=$.Safe($$.console);H=$.Safe(e.View1);I=$.Safe(F.Meetup);J=$.Safe(F.Event);K=$.Safe(i.Utils);L=$.Safe($$.WebSharper.Collections);M=$.Safe(L.MapModule);N=$.Safe($$.Date);O=$.Safe(L.FSharpSet);P=$.Safe(L.BalancedTree);Q=$.Safe($$.WebSharper.Slice);R=$.Safe($$.WebSharper.Operators);return S=$.Safe($$.WebSharper.MatchFailureException);});$.OnLoad(function(){F.viewGames();F.varSelectedCountry();F.varInplayOnly();F.meetups();F.events();j.varConsole();j.varCommandsHistory();j.varCmd();j.renderRecord();j.op_SpliceUntyped();j["cmd-input"]();return;});}());
