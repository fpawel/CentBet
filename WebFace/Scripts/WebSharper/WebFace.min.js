(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7;$.Define($$,{CentBet:{Client:{Admin:{RecordType:$.Class({},{get_color:function(){return function(_8){return _8.$==1?["lightgrey","red"]:_8.$==2?["lightgrey","green"]:["white","navy"];};}}),Render:function(){var _9;_9=$.New(h,{$:0});return c.Concat(d.ofArray([g.RenderCommandPrompt(),(g.op_SpliceUntyped())(c.Element("br",[],_9)),g.RenderRecords()]));},RenderCommandPrompt:function(){var _;_=d.ofArray([(g.op_SpliceUntyped())(c.Element("span",d.ofArray([i.Style("margin-left","10px")]),$.New(h,{$:0}))),(g.op_SpliceUntyped())(c.Element("label",d.ofArray([j.Create("for",g["cmd-input"]())]),d.ofArray([c.TextNode("Input here:")]))),g.renderInput()]);return c.Concat(_);},RenderRecords:function(){var ba,be;ba=function(bb){var bc,bd;bd=$.New(h,{$:0});bc=d.ofArray([(g.renderRecord())(bb),(g.op_SpliceUntyped())(c.Element("br",[],bd))]);return c.Concat(bc);};be=g.varConsole().get_View();return c.ConvertSeq(ba,be);},addRecord:function(be,bf){return g.varConsole().Add({Id:k.Fresh(),Text:bf,RecordType:be});},"cmd-input":$.Field(function(){return"cmd-input";}),cmdKey:function(bg){return bg.Id;},doc:function(bh){return bh;},op_SpliceUntyped:$.Field(function(){return function(bi){return g.doc(bi);};}),recordKey:function(bj){return bj.Id;},renderInput:function(){var bk,bl,bm,bn,bq,bt,bx,by,bO;bk=l.Create("");bl=l.Create(null);bm=l.Create(false);bn=m.Delay(function(){n.Set(bm,true);return m.Bind(g.send(n.Get(bk)),function(){n.Set(bm,false);n.Set(bk,"");return m.Return(null);});});bq=function(br){var bs;bs={$:1,$0:br};g.varCmd=function(){return bs;};return n.Set(bk,br.Text);};bt=function(bu){var bv,bw;bv=g.tryGetCommandFromHistory(bu);bw=o.map(bq,bv);return;};bx=bm.get_View();by=function(bz){var bA;bA=d.ofArray([c.Input(p.toList(p.delay(function(){return p.append([j.Create("id",g["cmd-input"]())],p.delay(function(){return p.append(bz?[j.Create("disabled","disabled")]:p.empty(),p.delay(function(){return p.append([i.Style("width","80%")],p.delay(function(){return p.append([i.CustomVar(bl,function(bF){return function(){return bF.focus();};},function(){return{$:0};})],p.delay(function(){return[i.Handler("keydown",function(){return function(bK){var bL,bM,bN;bL=bK.keyCode;if(bL===13){bN=n.Get(bk).toLowerCase();bM=bN==="-clear-output"?g.varConsole().Clear():bN==="-clear-hist"?g.varCommandsHistory().Clear():m.Start(bn,{$:0});}else{bM=bL===38?bt(true):bL===40?bt(false):null;}return bM;};})];}));}));}));}));})),bk)]);return c.Concat(bA);};bO=q.Map(by,bx);return c.EmbedView(bO);},renderRecord:$.Field(function(){var bP;bP=function(bQ){var bR,bS,bT,bU,bV;try{bS=(r.get_color())(bQ.RecordType);bT=bS[1];bU=bS[0];bR=(g.op_SpliceUntyped())(c.Element("span",d.ofArray([i.Style("color",bT),i.Style("background",bU)]),d.ofArray([c.TextNode(bQ.Text)])));}catch(bV){g.varCommandsHistory().Clear();g.varConsole().Clear();bR=c.get_Empty();}return bR;};return function(bW){var bX;bX=q.Map(bP,bW);return c.EmbedView(bX);};}),send:function(bY){return m.Delay(function(){var b0,b1,b2,b3,b4,b5;b0=s.Trim(bY);g.addRecord($.New(r,{$:2}),b0);b2=n.Get(g.varCommandsHistory().Var);if(p.isEmpty(b2)){b3=true;}else{b4=t.last(b2);b3=b4.Text!==b0;}if(b3){g.varCommandsHistory().Add({Id:k.Fresh(),Text:b0});b5=m.Return(null);}else{b5=m.Return(null);}b1=b5;return m.Combine(b1,m.Delay(function(){return m.TryWith(m.Delay(function(){var b8;b8=v.Async("WebFace:2",[b0]);return m.Bind(b8,function(b9){var b_,b$,ca;if(b9.$==1){b$=b9.$0;g.addRecord($.New(r,{$:1}),b$);b_=m.Return(null);}else{ca=b9.$0;g.addRecord($.New(r,{$:0}),ca);b_=m.Return(null);}return b_;});}),function(cb){g.addRecord($.New(r,{$:1}),cb.message);return m.Return(null);});}));});},tryGetCommandFromHistory:function(cc){var cd,ce,cf,cg,ch,ci,cj,cm,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO;cd=n.Get(g.varCommandsHistory().Var);ce=p.length(cd);if(ce===0){cf={$:0};}else{if(g.varCmd().$==1){ci=g.varCmd().$0.Id;cj=function(ck){return function(cl){return[cl,ck];};};cm=function(cn){var co,cp;co=cn[0];cn[1];cp=co.Id;return w.Equals(cp,ci);};cq=n.Get(g.varCommandsHistory().Var);cr=p.mapi(cj,cq);cs=p.tryFind(cm,cr);ct=[cs,cc];if(ct[0].$==1){if(ct[1]){ct[0].$0[0];cw=ct[0].$0[1];if(ce>0?cw<ce-1:false){cy=ct[0].$0[1];ct[0].$0[0];cx=cy+1;}else{if(ct[0].$==1){if(ct[1]){cA=ct[1]?ce-1:0;}else{ct[0].$0[0];cB=ct[0].$0[1];if(ce>0?cB>0:false){cD=ct[0].$0[1];ct[0].$0[0];cC=cD-1;}else{cC=ct[1]?ce-1:0;}cA=cC;}cz=cA;}else{cz=ct[1]?ce-1:0;}cx=cz;}cv=cx;}else{if(ct[0].$==1){if(ct[1]){cF=ct[1]?ce-1:0;}else{ct[0].$0[0];cG=ct[0].$0[1];if(ce>0?cG>0:false){cI=ct[0].$0[1];ct[0].$0[0];cH=cI-1;}else{cH=ct[1]?ce-1:0;}cF=cH;}cE=cF;}else{cE=ct[1]?ce-1:0;}cv=cE;}cu=cv;}else{if(ct[0].$==1){if(ct[1]){cK=ct[1]?ce-1:0;}else{ct[0].$0[0];cL=ct[0].$0[1];if(ce>0?cL>0:false){cN=ct[0].$0[1];ct[0].$0[0];cM=cN-1;}else{cM=ct[1]?ce-1:0;}cK=cM;}cJ=cK;}else{cJ=ct[1]?ce-1:0;}cu=cJ;}ch=cu;}else{ch=ce-1;}cg=ch;cO=p.nth(cg,cd);cf={$:1,$0:cO};}return cf;},varCmd:$.Field(function(){return{$:0};}),varCommandsHistory:$.Field(function(){var cP,cQ,cR,cU,cW,cX,cY,c2,c3,c7,c9;try{cR=function(cS){var cT;cT="restoring list - "+x.prettyPrint(cS);return y?y.log(cT):undefined;};cR("CentBetConsoleCommandsHistory");cU=function(cV){return g.cmdKey(cV);};cW=z.LocalStorage("CentBetConsoleCommandsHistory",{Encode:(B.get_Default().EncodeRecord(undefined,[["Id",B.get_Default().EncodeUnion(k,"$",[[0,[["$0","Item",C,0]]]]),0],["Text",C,0]]))(),Decode:(B.get_Default().DecodeRecord(undefined,[["Id",B.get_Default().DecodeUnion(k,"$",[[0,[["$0","Item",C,0]]]]),0],["Text",C,0]]))()});cX=D.CreateWithStorage(cU,cW);cY=function(cZ){return function(c0){var c1;c1=x.prettyPrint(cZ)+" - "+$$.String(c0);return y?y.log(c1):undefined;};};(cY("CentBetConsoleCommandsHistory"))(cX.get_Length());cQ=cX;}catch(c2){c3=function(c4){return function(c5){var c6;c6="error when restoring "+x.prettyPrint(c4)+" - "+x.prettyPrint(c5);return y?y.log(c6):undefined;};};(c3("CentBetConsoleCommandsHistory"))(c2);c7=function(c8){return g.cmdKey(c8);};c9=$.New(h,{$:0});cQ=D.Create(c7,c9);}cP=cQ;return cP;}),varConsole:$.Field(function(){var c_,c$,da,dd,df,dg,dh,dl,dm,dq,ds;try{da=function(db){var dc;dc="restoring list - "+x.prettyPrint(db);return y?y.log(dc):undefined;};da("CentBetConsole");dd=function(de){return g.recordKey(de);};df=z.LocalStorage("CentBetConsole",{Encode:(B.get_Default().EncodeRecord(undefined,[["Id",B.get_Default().EncodeUnion(k,"$",[[0,[["$0","Item",C,0]]]]),0],["Text",C,0],["RecordType",B.get_Default().EncodeUnion(r,"$",[[0,[]],[1,[]],[2,[]]]),0]]))(),Decode:(B.get_Default().DecodeRecord(undefined,[["Id",B.get_Default().DecodeUnion(k,"$",[[0,[["$0","Item",C,0]]]]),0],["Text",C,0],["RecordType",B.get_Default().DecodeUnion(r,"$",[[0,[]],[1,[]],[2,[]]]),0]]))()});dg=D.CreateWithStorage(dd,df);dh=function(di){return function(dj){var dk;dk=x.prettyPrint(di)+" - "+$$.String(dj);return y?y.log(dk):undefined;};};(dh("CentBetConsole"))(dg.get_Length());c$=dg;}catch(dl){dm=function(dn){return function(_do){var dp;dp="error when restoring "+x.prettyPrint(dn)+" - "+x.prettyPrint(_do);return y?y.log(dp):undefined;};};(dm("CentBetConsole"))(dl);dq=function(dr){return g.recordKey(dr);};ds=$.New(h,{$:0});c$=D.Create(dq,ds);}c_=c$;return c_;})},Coupon:{Render:function(){var dt,du,dv,dB,dC,dD,dH,dI;dt=l.Create(false);E.start(dt);dv=function(dw){var dx,dy,dz,dA;if(dw){dy=F["render\u0421oupon"]();dx=F.doc(dy);}else{dz=d.ofArray([c.TextNode("\u0414\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435.")]);dA=c.Element("h1",[],dz);dx=F.doc(dA);}return dx;};dB=dt.get_View();dC=q.Map(dv,dB);dD=function(dE){var dF,dG;if(dE.$==1){dG=dE.$0;dF=G.renderExploreMarkets(dG);}else{dF=c.get_Empty();}return dF;};dH=E.varMode().get_View();dI=q.Map(dD,dH);du=d.ofArray([c.EmbedView(dC),c.EmbedView(dI)]);return c.Concat(du);},SettingsDialog:{Helpers:{buttonDoc:function(dJ){var dK,dL,dP;dK=H.view();dL=function(dM){var dN,dO;if((dJ?dM===40:false)?true:!dJ?dM===10:false){dN=c.get_Empty();}else{dO=J.buttonElt(dJ,dM);dN=F.doc(dO);}return dN;};dP=q.Map(dL,dK);return c.EmbedView(dP);},buttonElt:function(dQ,dR){var d0;d0=dQ?"+":"-";return c.Element("button",d.ofArray([J.op_SpliceUntyped("w3-btn w3-teal"),j.Create("style","margin: 10px; width: 50px; height: 50px;"),i.Handler("click",function(){return function(){var dU,dV,dW,dX,dY,dZ;dU=[dQ,dR];if(dU[0]){if(dU[1]===40){dW=null;}else{dX=dR+(dQ?1:-1);dW=H.set(dX);}dV=dW;}else{if(dU[1]===10){dY=null;}else{dZ=dR+(dQ?1:-1);dY=H.set(dZ);}dV=dY;}return dV;};})]),d.ofArray([c.TextNode(d0)]));},close:function(){return n.Set(J.varVisible(),false);},content:$.Field(function(){var d1,d3,d4,d6;d1=K.titleAndCloseButton("\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0430\u0442\u0447\u0435\u0439 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435",function(){return J.close();});d4=function(d5){return $$.String(d5);};d6=H.view();d3=c.Element("div",d.ofArray([J.op_SpliceUntyped("w3-xxlarge"),j.Create("style","margin : 10px; float : left;")]),d.ofArray([c.TextView(q.Map(d4,d6))]));return d.ofArray([F.doc(d1),F.doc(d3),J.buttonDoc(true),J.buttonDoc(false)]);}),op_SpliceUntyped:function(d7){return j.Create("class",d7);},renderDialog:$.Field(function(){return K.createModal(J.varVisible().get_View(),function(){return J.close();});}),varVisible:$.Field(function(){return l.Create(false);})},elt:$.Field(function(){return((J.renderDialog())($.New(h,{$:0})))(J.content());}),show:function(){return n.Set(J.varVisible(),true);}},Work:$.Class({},{loop:function(d9){return m.Delay(function(){var d$;d$=m.Delay(function(){return m.Combine(m.While(function(){return d9.suspended.call(null,null);},m.Delay(function(){return m.Bind(m.Sleep(100),function(){return m.Return(null);});})),m.Delay(function(){return m.Bind(d9.work,function(){return m.Bind(m.Sleep(d9.sleepInterval),function(){return m.Return(null);});});}));});return m.Combine(m.TryWith(d$,function(eh){var ei,em;ei=function(ej){return function(ek){var el;el="task error "+x.prettyPrint(ej)+" : "+x.prettyPrint(ek);return y?y.log(el):undefined;};};em=d9.what;(ei(em))(eh);return m.Bind(m.Sleep(d9.sleepErrorInterval),function(){return m.Return(null);});}),m.Delay(function(){return L.loop(d9);}));});},"new":function(ep,eq,er,es,et){var eu;eu=$.New(L,{what:ep,sleepInterval:eq,sleepErrorInterval:er,work:et,suspended:es});return L.run(eu);},run:function(ev){var ew;ew=m.Delay(function(){var ey,eB;ey=function(ez){var eA;eA="task "+x.prettyPrint(ez)+" : started";return y?y.log(eA):undefined;};eB=ev.what;ey(eB);return m.Bind(L.loop(ev),function(){var eD,eG;eD=function(eE){var eF;eF="task "+x.prettyPrint(eE)+" : terminated";return y?y.log(eF):undefined;};eG=ev.what;eD(eG);return m.Return(null);});});return m.Start(ew,{$:0});}}),doc:function(eH){return eH;},renderMeetup:$.Field(function(){var eI,eJ,eK;eI=[E.varColumnGpbVisible().get_View(),E.varColumnCountryVisible().get_View()];eJ=eI[0];eK=eI[1];return function(eL){return M.renderMeetup(eJ,eK,eL);};}),renderPagination:$.Field(function(){var eM,eN,eO;eM=q.get_Do();eN=E.varPagesCount().get_View();eO=N.Bind(function(eP){var eQ;eQ=E.varCurrentPageNumber().get_View();return N.Bind(function(eR){var eS,eV,e8;eS=i.Handler("click",function(){return function(){return I.show();};});eV=p.toList(p.delay(function(){return p.append(p.map(function(eX){var eY,e4,e5;eY=p.toList(p.delay(function(){return p.append([j.Create("href","#")],p.delay(function(){return p.append([i.Handler("click",function(){return function(){return n.Set(E.varTargetPageNumber(),eX);};})],p.delay(function(){return eX===eR?[j.Create("class","w3-teal")]:p.empty();}));}));}));e5=$$.String(eX+1);e4=d.ofArray([c.Element("a",eY,d.ofArray([c.TextNode(e5)]))]);return c.Element("li",[],e4);},O.range(0,eP-1)),p.delay(function(){var e7;e7=d.ofArray([c.Element("a",d.ofArray([j.Create("href","#"),eS]),d.ofArray([c.TextNode("...")]))]);return[c.Element("li",[],e7)];}));}));e8=d.map(function(e9){return F.doc(e9);},eV);return N.Const(c.Concat(e8));},eQ);},eN);return c.EmbedView(eO);}),"render\u0421oupon":$.Field(function(){var e_,e$,fa,fb,fc,fd,fe,ff,fi,fl,fm,fn,fo,fp,fq;e_=d.ofArray([j.Create("class","w3-responsive")]);fa=d.ofArray([j.Create("class","w3-table w3-bordered w3-striped w3-hoverable")]);fb=d.ofArray([c.Element("tr",d.ofArray([i.Class("coupon-header-row w3-teal")]),M.renderGamesHeaderRow(E.varColumnGpbVisible().get_View()))]);fd=E.meetups().get_View();fe=F.renderMeetup();ff=function(fg){var fh;fh=fe(fg);return F.doc(fh);};fi=function(fj){var fk;fk=p.map(ff,fj);return c.Concat(fk);};fl=q.Map(fi,fd);fc=d.ofArray([c.EmbedView(fl)]);e$=d.ofArray([c.Element("table",fa,d.ofArray([c.Element("thead",[],fb),c.Element("tbody",[],fc)]))]);fm=c.Element("div",e_,e$);fn=d.ofArray([j.Create("class","w3-container")]);fo=q.get_Do();fp=E.varCurrentPageNumber().get_View();fq=N.Bind(function(fr){return N.Bind(function(fs){var ft,fu,fv,fw;if(fr===fs){fu=fm;}else{fw="\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043f\u0435\u0440\u0435\u0445\u043e\u0434 \u043a \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 \u2116 "+$$.String(fs+1)+"...";fv=d.ofArray([c.TextNode(fw)]);fu=c.Element("h1",[],fv);}ft=fu;return N.Const(F.doc(ft));},E.varTargetPageNumber().get_View());},fp);return c.Element("div",fn,d.ofArray([c.Element("div",d.ofArray([j.Create("class","w3-center")]),d.ofArray([c.Element("ul",d.ofArray([j.Create("class","w3-pagination w3-border w3-round")]),d.ofArray([F.renderPagination()]))])),c.EmbedView(fq),I.elt()]));})},Football:{EventCatalogue:$.Class({},{id:function(fx){return fx.gameId;}}),Meetup:$.Class({},{id:function(fy){return fy.game.gameId;}})},GameDetail:{Helpers:{renderContent:function(fz){var fA,fB;fA=q.get_Do();fB=N.Bind(function(fC){var fD,fE;if(fC.$==1){fE=fC.$0;fD=N.Const(c.TextNode(fE.marketName));}else{fD=N.Const(P.renderMeetupMarkets(fz.Meetup,fz.Market));}return fD;},fz.Market.get_View());return c.EmbedView(fB);},renderDialog:$.Field(function(){var fF,fH,fJ,fK;fF=function(){if(y){y.log("back to coupon");}return n.Set(E.varMode(),{$:0});};fH=function(fI){return fI.$==1?true:false;};fJ=E.varMode().get_View();fK=q.Map(fH,fJ);return K.createModal(fK,fF);}),renderGameInfo:function(fL,fM,fN,fO){return c.Element("div",d.ofArray([G.op_SpliceUntyped("w3-row header-content-football")]),d.ofArray([c.Element("div",d.ofArray([G.op_SpliceUntyped("w3-col s12")]),d.ofArray([P.renderGameTeams(fL,fM),P.renderGameScore(fN,fO)]))]));},renderGameScore:function(fP,fQ){var fR;fR=d.ofArray([G.op_SpliceUntyped("w3-row")]);return c.Element("div",fR,d.ofArray([c.Element("h5",d.ofArray([G.op_SpliceUntyped("w3-col s6"),j.Create("style","text-align: right; padding-right : 10px;")]),d.ofArray([c.TextView(fP)])),c.Element("h5",d.ofArray([G.op_SpliceUntyped("w3-col s6"),j.Create("style","text-align: left; color : #b4e500;")]),d.ofArray([c.TextView(fQ)]))]));},renderGameTeams:function(fS,fT){var fU;fU=d.ofArray([G.op_SpliceUntyped("w3-row")]);return c.Element("div",fU,d.ofArray([c.Element("h3",d.ofArray([G.op_SpliceUntyped("w3-col s5"),j.Create("style","text-align: right;")]),d.ofArray([c.TextNode(fS)])),c.Element("h2",d.ofArray([G.op_SpliceUntyped("w3-col s2"),j.Create("style","color : #b4e500; text-align: center;")]),d.ofArray([c.TextNode("V")])),c.Element("h3",d.ofArray([G.op_SpliceUntyped("w3-col s5"),j.Create("style","text-align: left;")]),d.ofArray([c.TextNode(fT)]))]));},renderMarketsList:function(fV,fW,fX){var fY;fY=d.ofArray([G.op_SpliceUntyped("w3-ul w3-hoverable")]);return c.Element("ul",fY,p.toList(p.delay(function(){return p.map(function(f0){var f1,f5,f6;f1=d.ofArray([j.Create("href","#"),i.Handler("click",function(){return function(){var f4;f4={$:1,$0:f0};return n.Set(fV,f4);};})]);f5=d.ofArray([c.Element("a",f1,d.ofArray([c.TextNode(f0.marketName)]))]);f6=c.Element("li",[],f5);return G.doc(f6);},fX);})));},renderMeetupMarkets:function(f7,f8){var f9,ga,gb,gc,gd,ge,gf,gg,gh,gi,gj,gk,gl,gm,gn,go,gp,gq,gr,gs,gt,gu;f9=function(f_){var f$;f$=P.renderMarketsList(f8,f7,f_);return G.doc(f$);};ga=j.Create("style","border-right : 1px solid #ddd;");gb=j.Create("style","border-radius: 0 0 10px 10px;");gc=f7.game.gameId;gd=gc[0];ge=gc[1];gf=E.getMarkets(gd,ge);gg=(P.window(3))(gf);if(gg.$==1){if(gg.$1.$==1){if(gg.$1.$1.$==1){if(gg.$1.$1.$1.$==0){gl=gg.$0;gm=gg.$1.$0;gn=gg.$1.$1.$0;go=d.ofArray([G.op_SpliceUntyped("w3-row w3-sand"),gb]);gp=c.Element("div",go,d.ofArray([c.Element("div",d.ofArray([G.op_SpliceUntyped("w3-col s4"),ga]),d.ofArray([f9(gl)])),c.Element("div",d.ofArray([G.op_SpliceUntyped("w3-col s4"),ga]),d.ofArray([f9(gm)])),c.Element("div",d.ofArray([G.op_SpliceUntyped("w3-col s4")]),d.ofArray([f9(gn)]))]));gk=G.doc(gp);}else{gk=c.get_Empty();}gj=gk;}else{gq=gg.$0;gr=gg.$1.$0;gs=d.ofArray([G.op_SpliceUntyped("w3-row w3-sand"),gb]);gt=c.Element("div",gs,d.ofArray([c.Element("div",d.ofArray([G.op_SpliceUntyped("w3-col s6"),ga]),d.ofArray([f9(gq)])),c.Element("div",d.ofArray([G.op_SpliceUntyped("w3-col s6")]),d.ofArray([f9(gr)]))]));gj=G.doc(gt);}gi=gj;}else{gu=gg.$0;gi=f9(gu);}gh=gi;}else{gh=c.get_Empty();}return gh;},window:function(gv){var gw,gz,gB;gw=function(gx){return function(gy){return[gx%gv,gy];};};gz=function(gA){return gA[0];};gB=function(gC){var gD,gE;gC[0];gD=gC[1];gE=p.map(function(gF){return gF[1];},gD);return p.toList(gE);};return function(gG){var gH,gI,gJ;gH=p.mapi(gw,gG);gI=t.groupBy(gz,gH);gJ=p.map(gB,gI);return p.toList(gJ);};}},doc:function(gK){return gK;},op_SpliceUntyped:function(gL){return j.Create("class",gL);},renderExploreMarkets:function(gM){var gN;gN=gM.Meetup;return((P.renderDialog())(d.ofArray([j.Create("style","border-radius: 10px;")])))(d.ofArray([P.renderGameInfo(gN.game.home,gN.game.away,gN.status.get_View(),gN.summary.get_View()),P.renderContent(gM)]));},varError:$.Field(function(){return l.Create(false);})},Games:{Helpers1:{addNewGames:function(gO,gP,gQ,gR){var gS,gT,gU,ha,hc,he,hf,hg;gS=n.Get(E.meetups().Var);gT=p.toList(gS);E.meetups().Clear();gU=function(gV){var gW,gX,gY,gZ,g0,g1,g2,g3,g4,g5,g6,g7,g8,g9,g_,g$;gW=gV[0];gX=gV[1];gY=gV[2];gZ=gO(gW.gameId);g0=gP(gW.gameId);g1=l.Create(gX.playMinute);g2=l.Create(gX.status);g3=l.Create(gX.summary);g4=l.Create(gX.order);g5=l.Create(gX.winBack);g6=l.Create(gX.winLay);g7=l.Create(gX.drawBack);g8=l.Create(gX.drawLay);g9=l.Create(gX.loseBack);g_=l.Create(gX.loseLay);g$=gQ(gW.gameId);return $.New(R,{game:gW,playMinute:g1,status:g2,summary:g3,order:g4,winBack:g5,winLay:g6,drawBack:g7,drawLay:g8,loseBack:g9,loseLay:g_,country:l.Create(gZ),totalMatched:l.Create(g$),hash:gY});};ha=function(hb){return n.Get(hb.order);};hc=function(hd){return E.meetups().Add(hd);};he=d.map(gU,gR);hf=p.append(gT,he);hg=p.sortBy(ha,hf);return p.iter(hc,hg);},isCouponMode:function(){return w.Equals(n.Get(E.varMode()),{$:0});},notCouponMode:function(){var hh;hh=S.isCouponMode();return!hh;}},Helpers2:{eventsCatalogue:$.Field(function(){var hi,hj,hk,hl,hn,ho,hp,hq,hu,hw,hx;hi=T.checkTodayKey("CentBetEventsCatalogueCreated","CentBetEventsCatalogue");try{hl=function(hm){return U.id(hm);};ho=(B.get_Default().EncodeRecord(U,[["gameId",B.get_Default().EncodeTuple([C,C]),0],["country",C,1],["markets",B.get_Default().EncodeList(B.get_Default().EncodeRecord(undefined,[["marketId",C,0],["marketName",C,0],["totalMatched",C,1],["runners",B.get_Default().EncodeList(B.get_Default().EncodeRecord(undefined,[["selectionId",C,0],["runnerName",C,0]])),0]])),0]]))();hn=z.LocalStorage("CentBetEventsCatalogue",{Encode:ho,Decode:(B.get_Default().DecodeRecord(U,[["gameId",B.get_Default().DecodeTuple([C,C]),0],["country",C,1],["markets",B.get_Default().DecodeList(B.get_Default().DecodeRecord(undefined,[["marketId",C,0],["marketName",C,0],["totalMatched",C,1],["runners",B.get_Default().DecodeList(B.get_Default().DecodeRecord(undefined,[["selectionId",C,0],["runnerName",C,0]])),0]])),0]]))()});hk=D.CreateWithStorage(hl,hn);}catch(hp){hq=function(hr){return function(hs){var ht;ht="error when restoring "+x.prettyPrint(hr)+" - "+x.prettyPrint(hs);return y?y.log(ht):undefined;};};(hq("CentBetEventsCatalogue"))(hp);hu=function(hv){return U.id(hv);};hw=$.New(h,{$:0});hk=D.Create(hu,hw);}hj=hk;hx=function(hy){return function(hz){return function(hA){var hB;hB=x.prettyPrint(hy)+" - "+$$.String(hz)+", "+x.prettyPrint(hA);return y?y.log(hB):undefined;};};};((hx("CentBetEventsCatalogue"))(hj.get_Length()))(hi);return hj;}),tryGetEvent:function(hC,hD){var hE,hF,hI;hE=[hC,hD];hF=function(hG){var hH;hH=hG.gameId;return w.Equals(hE,hH);};hI=n.Get(V.eventsCatalogue().Var);return p.tryFind(hF,hI);},updateCurentCoupon:$.Field(function(){var hJ;hJ=function(hK){var hL,hM,hN,hO,hQ;hL=hK[0];hM=hK[1];hN=hK[2];hO=function(hP){return[hP,hM,hN];};hQ=E.meetups().TryFindByKey(hL);return o.map(hO,hQ);};return function(hR){var hS;hS=d.choose(hJ,hR);return p.iter(function(hT){var hU,hV,hW;hU=hT[0];hV=hT[1];hW=hT[2];return E.updateGameInfo(hU,hV,hW);},hS);};})},Helpers3:{Work:$.Class({},{loop:function(hX){return m.Delay(function(){var hZ;hZ=m.Delay(function(){return m.Bind(hX.work,function(){return m.Bind(m.Sleep(hX.sleepInterval),function(){return m.Return(null);});});});return m.Combine(m.TryWith(hZ,function(h3){var h4,h8;h4=function(h5){return function(h6){var h7;h7="task error "+x.prettyPrint(h5)+" : "+x.prettyPrint(h6);return y?y.log(h7):undefined;};};h8=hX.what;(h4(h8))(h3);return m.Bind(m.Sleep(hX.sleepErrorInterval),function(){return m.Return(null);});}),m.Delay(function(){return X.loop(hX);}));});},"new":function(h$,ia,ib,ic){var id;id=$.New(X,{what:h$,sleepInterval:ia,sleepErrorInterval:ib,work:ic});return X.run(id);},run:function(ie){var _if;_if=m.Delay(function(){var ih,ik;ih=function(ii){var ij;ij="task "+x.prettyPrint(ii)+" : started";return y?y.log(ij):undefined;};ik=ie.what;ih(ik);return m.Bind(X.loop(ie),function(){var im,ip;im=function(_in){var io;io="task "+x.prettyPrint(_in)+" : terminated";return y?y.log(io):undefined;};ip=ie.what;im(ip);return m.Return(null);});});return m.Start(_if,{$:0});}}),processCoupon:function(iq){return m.Delay(function(){var is,it,iv,iw,ix,iy,iz;if(S.notCouponMode()){is=m.Return(null);}else{it=function(iu){return[iu.game.gameId,iu.hash];};iv=n.Get(E.meetups().Var);iw=p.map(it,iv);ix=p.toList(iw);iy=H.get();iz=v.Async("WebFace:0",[ix,n.Get(E.varTargetPageNumber()),iy]);is=m.Bind(iz,function(iA){var iB,iC,iD,iE,iF,iG,iH;iB=iA[1];iC=iA[2];iD=iA[0];iE=iA[3];iF=(iE/iy>>0)+(iE%iy===0?0:1);K.updateVarValue(E.varPagesCount(),iF);if(n.Get(E.varTargetPageNumber())>iF){n.Set(E.varTargetPageNumber(),0);iH=m.Return(null);}else{iH=m.Return(null);}iG=iH;return m.Combine(iG,m.Delay(function(){var iJ,iK,iL;iK=iD.$==0;if(!iK){S.addNewGames(function(iM){var iN,iO;iN=iM[0];iO=iM[1];return E.getCountry(iN,iO);},function(iP){var iQ,iR;iQ=iP[0];iR=iP[1];return E.getMarkets(iQ,iR);},function(iS){var iT,iU;iT=iS[0];iU=iS[1];return E.getLastTotalMatched(iT,iU);},iD);iL=m.Return(null);}else{iL=m.Return(null);}iJ=iL;return m.Combine(iJ,m.Delay(function(){var iW,iX,iY,iZ;iX=p.isEmpty(iC);if(!iX){iZ=function(i0){return E.meetups().RemoveByKey(i0);};p.iter(iZ,iC);iY=m.Return(null);}else{iY=m.Return(null);}iW=iY;return m.Combine(iW,m.Delay(function(){(V.updateCurentCoupon())(iB);E.updateColumnCountryVisible();E.updateColumnGpbVisible();K.updateVarValue(iq,true);K.updateVarValue(E.varCurrentPageNumber(),n.Get(E.varTargetPageNumber()));return m.Return(null);}));}));}));});}return is;});},processEvents:$.Field(function(){return m.Delay(function(){var i3,i4,i8,i9,i_,i$;if(S.notCouponMode()){i3=m.Return(null);}else{i4=function(i5){var i6,i7;if(i5[1].$==0){i7=i5[0];i6={$:1,$0:i7};}else{i6={$:0};}return i6;};i8=W.zipMeetupsWithEvents();i9=d.choose(i4,i8);if(i9.$==0?true:Y.hasNot()){i_=m.Return(null);}else{i$=v.Async("WebFace:4",[i9]);i_=m.Bind(i$,function(ja){var jb;jb=m.For(ja,function(jc){var jd,je;jc[1];jd=jc[0];je=jc[2];V.eventsCatalogue().Add($.New(U,{gameId:jd,country:je,markets:$.New(h,{$:0})}));return m.Return(null);});return m.Combine(jb,m.Delay(function(){return m.Combine(m.For(n.Get(E.meetups().Var),function(jg){var jh,ji,jj;jh=jg.game.gameId;ji=jh[0];jj=jh[1];n.Set(jg.country,E.getCountry(ji,jj));return m.Return(null);}),m.Delay(function(){E.updateColumnCountryVisible();return m.Return(null);}));}));});}i3=i_;}return i3;});}),processMarkets:$.Field(function(){return m.Delay(function(){var jm,jn,js,jt;if(S.notCouponMode()){jm=m.Return(null);}else{jn=function(jo){var jp,jq,jr;if(jo[1].$==1){if(jo[1].$0.markets.$==0){jr=jo[0];jq={$:1,$0:jr};}else{jq={$:0};}jp=jq;}else{jp={$:0};}return jp;};js=W.zipMeetupsWithEvents();jt=d.choose(jn,js);jm=(jt.$==0?true:Y.hasNot())?m.Return(null):m.For(jt,function(ju){var jv,jw,jx;if(S.notCouponMode()){jv=m.Return(null);}else{jw=ju[0];jx=ju[1];jv=m.Bind(v.Async("WebFace:5",[jw,jx]),function(jy){var jz,jA,jB,jC;if(jy.$==1){jA=jy.$0;jB=ju[0];jC=ju[1];W.setMarket(jB,jC,jA);jz=m.Return(null);}else{jz=m.Return(null);}return jz;});}return jv;});}return jm;});}),processTotalMatched:$.Field(function(){return m.Delay(function(){var jE,jF,jK,jL;if(S.notCouponMode()){jE=m.Return(null);}else{jF=function(jG){var jH,jI,jJ;if(jG[1].$==1){if(jG[1].$0.markets.$==1){jJ=jG[0];jI={$:1,$0:jJ};}else{jI={$:0};}jH=jI;}else{jH={$:0};}return jH;};jK=W.zipMeetupsWithEvents();jL=d.choose(jF,jK);jE=(jL.$==0?true:Y.hasNot())?m.Return(null):m.Combine(m.For(jL,function(jM){var jN,jO,jP,jQ;if(S.notCouponMode()){jN=m.Return(null);}else{jO=jM[0];jP=jM[1];jQ=v.Async("WebFace:6",[jO,jP]);jN=m.Bind(jQ,function(jR){var jS,jT,jX,jY,jZ;if(jR.$==0){jS=m.Return(null);}else{jT=function(jU){return function(jV){var jW;jV[0];jW=jV[1];return jU+jW;};};jX=jM[0];jY=jM[1];jZ=p.fold(jT,0,jR);E.updateTotalMatched(jX,jY,jZ);jS=m.Return(null);}return jS;});}return jN;}),m.Delay(function(){E.updateColumnGpbVisible();return m.Return(null);}));}return jE;});}),setMarket:function(j1,j2,j3){var j4,j5,j8,j$,ka,kb,kc,kd,kn,ko;j4=[j1,j2];j5=function(j6){var j7;j6[0];j6[1];j6[2];j7=j6[3];return j7;};j8=function(j9){return function(j_){return j9+j_;};};j$=j4[0];ka=j4[1];kb=d.choose(j5,j3);kc=p.fold(j8,0,kb);E.updateTotalMatched(j$,ka,kc);kd=function(ke){var kf,kg,kh,ki,kj;kf=ke[0];kg=ke[1];kh=ke[2];ki=ke[3];kj=function(kk){var kl,km;kl=kk[0];km=kk[1];return{selectionId:km,runnerName:kl};};return{marketId:kf,marketName:kg,totalMatched:ki,runners:d.map(kj,kh)};};kn=d.map(kd,j3);ko=function(kp){return{$:1,$0:$.New(U,{gameId:kp.gameId,country:kp.country,markets:kn})};};return V.eventsCatalogue().UpdateBy(ko,j4);},zipMeetupsWithEvents:function(){var kq,kr,kw;kq=n.Get(E.meetups().Var);kr=function(ks){var kt,kv;kt=function(ku){return w.Equals(ku.gameId,ks.game.gameId);};kv=n.Get(V.eventsCatalogue().Var);return[ks.game.gameId,p.tryFind(kt,kv)];};kw=p.map(kr,kq);return p.toList(kw);}},PageLen:{get:function(){return H.validateValue(n.Get(H["var"]()));},localStorageKey:$.Field(function(){return"pageLen";}),set:function(kx){var ky,kz;ky=H.validateValue(kx);if(ky!==n.Get(H["var"]())){n.Set(H["var"](),ky);kz=T.set(H.localStorageKey(),ky);}else{kz=null;}return kz;},validateValue:function(kA){return kA<10?30:kA>40?40:kA;},"var":$.Field(function(){var kB,kC;kB=T.getWithDef(H.localStorageKey(),30);kC=H.validateValue(kB);return l.Create(kC);}),view:$.Field(function(){return H["var"]().get_View();})},ServerBetfairsSession:{check:$.Field(function(){return m.Delay(function(){return m.Bind(v.Async("WebFace:3",[]),function(kE){Y.hasServerBetfairsSession=function(){return kE;};return m.Return(null);});});}),has:function(){return Y.hasServerBetfairsSession();},hasNot:function(){return!Y.hasServerBetfairsSession();},hasServerBetfairsSession:$.Field(function(){return true;})},getCountry:function(kF,kG){var kH,kI,kJ,kK,kL,kM,kN;kH=[kF,kG];kI=kH[0];kJ=kH[1];kK=V.tryGetEvent(kI,kJ);if(kK.$==1){if(kK.$0.country.$==1){kN=kK.$0.country.$0;kM=kN;}else{kM="";}kL=kM;}else{kL="";}return kL;},getLastTotalMatched:function(kO,kP){var kQ,kR,kZ;kQ=[kO,kP];kR=function(kS){var kT,kV,kW,kX,kY;kT=function(kU){return kU.totalMatched;};kV=kS.markets;kW=d.choose(kT,kV);if(kW.$==0){kX={$:0};}else{kY=p.sum(kW);kX={$:1,$0:kY};}return kX;};kZ=V.eventsCatalogue().TryFindByKey(kQ);return o.bind(kR,kZ);},getMarkets:function(k0,k1){var k2,k3,k4,k5,k6,k7,k8;k2=[k0,k1];k3=k2[0];k4=k2[1];k5=V.tryGetEvent(k3,k4);if(k5.$==1){if(k5.$0.markets.$==1){k8=k5.$0.markets;k7=k8;}else{k7=$.New(h,{$:0});}k6=k7;}else{k6=$.New(h,{$:0});}return k6;},meetups:$.Field(function(){var k9,k$;k9=function(k_){return R.id(k_);};k$=$.New(h,{$:0});return D.Create(k9,k$);}),processGameDetail:$.Field(function(){return m.Delay(function(){var lb,lc,ld,le,lf,lg,lh;lb=n.Get(E.varMode());if(lb.$==1){ld=lb.$0;le=ld.Meetup.game.gameId;lf=le[0];lg=le[1];lh=v.Async("WebFace:1",[lf,lg]);lc=m.Bind(lh,function(li){var lj,lk,ll,lm,ln;lj=E.varGameDetailError();lk=li.$==0;n.Set(lj,lk);if(li.$==1){lm=li.$0[0];ln=li.$0[1];E.updateGameInfo(ld.Meetup,lm,ln);ll=m.Return(null);}else{ll=m.Return(null);}return ll;});}else{lc=m.Return(null);}return lc;});}),start:function(lo){var lp;lp=function(lq,lr){var ls,lt,lu;ls=lq[0];lt=lq[1];lu=lq[2];return X["new"](ls,lt,lu,lr);};lp(["COUPON",0,0],W.processCoupon(lo));lp(["CHECK-SERVER-BETFAIRS-SESSION",0,0],Y.check());lp(["EVENTS-CATALOGUE",0,0],W.processEvents());lp(["MARKETS-CATALOGUE",0,0],W.processMarkets());lp(["TOTAL-MATCHED",0,0],W.processTotalMatched());return lp(["GAME-DETAIL",0,0],E.processGameDetail());},updateColumnCountryVisible:function(){var lv,lx,ly;lv=function(lw){return n.Get(lw.country)!=="";};lx=n.Get(E.meetups().Var);ly=p.exists(lv,lx);return!w.Equals(n.Get(E.varColumnCountryVisible()),ly)?n.Set(E.varColumnCountryVisible(),ly):null;},updateColumnGpbVisible:function(){var lz,lB,lC;lz=function(lA){return n.Get(lA.totalMatched).$==1;};lB=n.Get(E.meetups().Var);lC=p.exists(lz,lB);return!w.Equals(n.Get(E.varColumnGpbVisible()),lC)?n.Set(E.varColumnGpbVisible(),lC):null;},updateGameInfo:function(lD,lE,lF){lD.hash=lF;K.updateVarValue(lD.playMinute,lE.playMinute);K.updateVarValue(lD.status,lE.status);K.updateVarValue(lD.summary,lE.summary);K.updateVarValue(lD.order,lE.order);K.updateVarValue(lD.winBack,lE.winBack);K.updateVarValue(lD.winLay,lE.winLay);K.updateVarValue(lD.drawBack,lE.drawBack);K.updateVarValue(lD.drawLay,lE.drawLay);K.updateVarValue(lD.loseBack,lE.loseBack);return K.updateVarValue(lD.loseLay,lE.loseLay);},updateTotalMatched:function(lG,lH,lI){var lJ,lK,lL,lM;lJ=[lG,lH];lK=E.meetups().TryFindByKey(lJ);if(lK.$==1){lM=lK.$0;lL=K.updateVarValue(lM.totalMatched,{$:1,$0:lI});}else{lL=null;}return lL;},varColumnCountryVisible:$.Field(function(){return l.Create(false);}),varColumnGpbVisible:$.Field(function(){return l.Create(false);}),varCurrentPageNumber:$.Field(function(){return l.Create(0);}),varGameDetailError:$.Field(function(){return l.Create(false);}),varMode:$.Field(function(){return l.Create({$:0});}),varPagesCount:$.Field(function(){return l.Create(1);}),varTargetPageNumber:$.Field(function(){return l.Create(0);})},Meetup:{doc:function(lN){return lN;},renderGamesHeaderRow:function(lO){return p.toList(p.delay(function(){var lQ,lR,lS,lT,lU,lV;lR=d.ofArray([c.TextNode("\u2116")]);lS=d.ofArray([c.TextNode("\u0414\u043e\u043c\u0430")]);lT=$.New(h,{$:0});lU=d.ofArray([c.TextNode("\u0412 \u0433\u043e\u0441\u0442\u044f\u0445")]);lV=$.New(h,{$:0});lQ=d.ofArray([c.Element("th",[],lR),c.Element("th",[],lS),c.Element("th",[],lT),c.Element("th",[],lU),c.Element("th",[],lV),c.Element("th",d.ofArray([j.Create("colspan","2")]),d.ofArray([c.TextNode("\u041f\u043e\u0431\u0435\u0434\u0430")])),c.Element("th",d.ofArray([j.Create("colspan","2")]),d.ofArray([c.TextNode("\u041d\u0438\u0447\u044c\u044f")])),c.Element("th",d.ofArray([j.Create("colspan","2")]),d.ofArray([c.TextNode("\u041f\u043e\u0440\u0430\u0436\u0435\u043d\u0438\u0435")]))]);return p.append(d.map(function(lW){return M.doc(lW);},lQ),p.delay(function(){var lY,l3;lY=function(lZ){var l0,l1,l2;if(lZ){l1=d.ofArray([c.TextNode("GPB")]);l2=c.Element("th",[],l1);l0=M.doc(l2);}else{l0=c.get_Empty();}return l0;};l3=q.Map(lY,lO);return p.append([c.EmbedView(l3)],p.delay(function(){var l5,l6;l5=$.New(h,{$:0});l6=c.Element("th",[],l5);return[M.doc(l6)];}));}));}));},renderMeetup:function(l7,l8,l9){var l_,mj,mk,ml,mo,mr,ms,mt,mx,my,mz,mA,mB,mC,mD,mS,mT,mU,mX,m6,m7,m_,nc;l_=function(l$){return function(ma){return function(mb){var mc,md,me,mf,mh,mi;md=l$?"back":"lay";me="kef "+x.toSafe(ma)+" "+x.toSafe(md);mf=function(mg){return K.formatDecimalOption(mg);};mh=mb.get_View();mi=q.Map(mf,mh);mc=c.Element("td",d.ofArray([j.Create("class",me)]),d.ofArray([c.TextView(mi)]));return M.doc(mc);};};};mj=l_(true);mk=l_(false);ml=i.Handler("click",function(){return function(){return n.Set(E.varMode(),{$:1,$0:{Meetup:l9,Market:l.Create({$:0})}});};});mo=function(mp){var mq;mq=c.Element("a",d.ofArray([j.Create("href","#"),ml]),d.ofArray([c.TextNode(mp)]));return M.doc(mq);};mt=function(mu){var mv,mw;mv=mu[0];mw=mu[1];return $$.String(mv)+"."+$$.String(mw);};mx=l9.order.get_View();my=q.Map(mt,mx);ms=d.ofArray([c.TextView(my)]);mz=c.Element("td",[],ms);mA=c.Element("td",d.ofArray([j.Create("class","home-team")]),d.ofArray([mo(l9.game.home)]));mB=q.get_Do();mC=l9.playMinute.get_View();mD=N.Bind(function(mE){var mF;mF=l9.summary.get_View();return N.Bind(function(mG){var mH,mI,mJ,mK,mL,mM,mN,mO,mP,mQ,mR;if(mE.$==1){if(mG!==""){mJ=c.Element("td",d.ofArray([j.Create("class","game-status")]),d.ofArray([c.TextNode(mG)]));mI=M.doc(mJ);}else{if(mG!==""){mL=c.Element("td",d.ofArray([j.Create("class","game-status")]),d.ofArray([c.TextNode(mG)]));mK=M.doc(mL);}else{mM=$.New(h,{$:0});mN=c.Element("td",[],mM);mK=M.doc(mN);}mI=mK;}mH=mI;}else{if(mG!==""){mP=c.Element("td",d.ofArray([j.Create("class","game-status")]),d.ofArray([c.TextNode(mG)]));mO=M.doc(mP);}else{mQ=$.New(h,{$:0});mR=c.Element("td",[],mQ);mO=M.doc(mR);}mH=mO;}return N.Const(mH);},mF);},mC);mS=c.Element("td",d.ofArray([j.Create("class","away-team")]),d.ofArray([mo(l9.game.away)]));mT=c.Element("td",d.ofArray([j.Create("class","game-status")]),d.ofArray([c.TextView(l9.status.get_View())]));q.get_Do();mU=N.Bind(function(mV){return N.Bind(function(mW){return N.Const([mV,mW]);},l7);},l9.totalMatched.get_View());mX=function(mY){var mZ,m0,m1,m2,m3,m4,m5;if(mY[1]){if(mY[0].$==1){m1=mY[0].$0;m3=$$.String(m1);m2=c.Element("td",d.ofArray([j.Create("class","game-gpb")]),d.ofArray([c.TextNode(m3)]));m0=M.doc(m2);}else{m4=$.New(h,{$:0});m5=c.Element("td",[],m4);m0=M.doc(m5);}mZ=m0;}else{mZ=c.get_Empty();}return mZ;};m6=q.Map(mX,mU);q.get_Do();m7=N.Bind(function(m8){return N.Bind(function(m9){return N.Const([m8,m9]);},l8);},l9.country.get_View());m_=function(m$){var na,nb;if(m$[1]){m$[0];nb=c.Element("td",d.ofArray([j.Create("class","game-country")]),d.ofArray([c.TextView(l9.country.get_View())]));na=M.doc(nb);}else{na=c.get_Empty();}return na;};nc=q.Map(m_,m7);mr=d.ofArray([M.doc(mz),M.doc(mA),c.EmbedView(mD),M.doc(mS),M.doc(mT),(mj("win"))(l9.winBack),(mk("win"))(l9.winLay),(mj("draw"))(l9.drawBack),(mk("draw"))(l9.drawLay),(mj("lose"))(l9.loseBack),(mk("lose"))(l9.loseLay),c.EmbedView(m6),c.EmbedView(nc)]);return c.Element("tr",[],mr);}},Utils:{Left:function(nd){return{$:0,$0:nd};},LocalStorage:{checkTodayKey:function(ne,nf){var ng,nh,ni,nj;ng=Z.now();nh=T.getWithDef(ne,ng);if(ng-nh>1*86400000){T.clear(nf);T.set(ne,Z.now());nj=function(nk){return function(nl){var nm;nm="local storage "+x.prettyPrint(nk)+" of "+x.prettyPrint(nl)+" is inspired";return y?y.log(nm):undefined;};};(nj(nf))(nh);ni=ng;}else{ni=nh;}return ni;},clear:function(nn){return T.strg().removeItem(nn);},get:function(no){var np,nq,nr,ns,nt;try{nq=T.strg().getItem(no);nr=_0.parse(nq);np={$:1,$0:nr};}catch(ns){nt=function(nu){return function(nv){var nw;nw="error getting from local storage, key "+x.prettyPrint(nu)+" : "+x.prettyPrint(nv);return y?y.log(nw):undefined;};};(nt(no))(ns);np={$:0};}return np;},getWithDef:function(nx,ny){var nz,nA,nB;nz=T.get(nx);if(nz.$==1){nB=nz.$0;nA=nB;}else{nA=ny;}return nA;},set:function(nC,nD){var nE,nF,nG,nH;try{nF=_0.stringify(nD);nE=T.strg().setItem(nC,nF);}catch(nG){nH=function(nI){return function(nJ){return function(nK){return O.FailWith("error setting to local storage, key "+x.prettyPrint(nI)+", value "+x.prettyPrint(nJ)+" : "+x.prettyPrint(nK));};};};nE=((nH(nC))(nD))(nG);}return nE;},strg:$.Field(function(){return _1.localStorage;})},Right:function(nL){return{$:1,$0:nL};},createModal:function(nM,nN){var nO,nQ,nS;nO=function(nP){return nP;};nQ=function(nR){return j.Create("class",nR);};(K.initializeModalVar())(nN);nS=function(nT){return function(nU){var nV,nZ;nV=function(nW){return nW?nO(c.Element("div",d.ofArray([nQ("w3-modal"),j.Create("style","display : block;")]),d.ofArray([c.Element("div",p.toList(p.delay(function(){return p.append(nT,p.delay(function(){return[nQ("w3-modal-content w3-animate-zoom w3-card-8")];}));})),nU)]))):c.get_Empty();};nZ=q.Map(nV,nM);return c.EmbedView(nZ);};};return nS;},dateTimeToString:function($s){var $0=this,$this=this;return $$.dateTimeToString($s);},formatDecimal:function(n0){return K.trimEnd(n0.toFixed(6),d.ofArray([48,46]));},formatDecimalOption:function(n1){var n2,n3;if(n1.$==1){n3=n1.$0;n2=K.formatDecimal(n3);}else{n2="";}return n2;},getDatePart:function(n4){var n5;n5=new Z(n4.getTime());n5.setHours(0,0,0,0);return n5;},initializeModalVar:$.Field(function(){var n6,n7;n6=[$.New(h,{$:0})];n7=function(n8){var n9,n_,oa;if(n8.target.className==="w3-modal"){n_=function(n$){return n$(null);};oa=n6[0];n9=p.iter(n_,oa);}else{n9=null;}return n9;};_1.addEventListener("click",n7,false);return function(ob){n6[0]=$.New(h,{$:1,$0:ob,$1:n6[0]});};}),mkids:function(oc,od){var oe,og,oh,oi,oj;oe=function(of){return[od(of),of];};og=d.map(oe,oc);oh=_3.OfArray(p.toArray(og));oi=d.map(od,oc);oj=_4.New1(_5.OfSeq(oi));return[oj,oh];},titleAndCloseButton:function(ok,ol){var om,oo;om=function(on){return j.Create("class",on);};oo=d.ofArray([om("w3-row w3-teal")]);return c.Element("header",oo,d.ofArray([c.Element("h4",d.ofArray([om("w3-col s11 w3-center"),j.Create("style","padding-left : 10px;")]),d.ofArray([c.TextNode(ok)])),c.Element("div",d.ofArray([om("w3-col s1 w3-center")]),d.ofArray([c.Element("span",d.ofArray([om("w3-closebtn"),j.Create("style","padding-right : 5px;"),i.Handler("click",function(){return function(){return ol(null);};})]),d.ofArray([c.TextNode("×")]))]))]));},trimEnd:function(or,os){var ot,ou,ov,ow,ox,oy,oz,oA,oB,oC,oD,oE;ot=[or,os];if(ot[0]===""){ou="";}else{if(ot[1].$==1){ow=ot[0];ot[1];ox=ot[1].$0;if(ow.charCodeAt(ow.length-1)===ox){ot[1].$0;oz=ot[1];oA=ot[0];oy=K.trimEnd(_6.string(oA,{$:0},{$:1,$0:oA.length-2}),oz);}else{if(ot[1].$==1){oC=ot[0];oD=ot[1].$1;oB=K.trimEnd(oC,oD);}else{oB=O.Raise(_7.New("C:\\Users\\User\\Documents\\Visual Studio 2015\\Projects\\Betfair\\CentBet\\CentBet\\WebFace\\ClientUtils.fs",8,18));}oy=oB;}ov=oy;}else{oE=ot[0];ov=oE;}ou=ov;}return ou;},updateVarValue:function(oF,oG){return!w.Equals(n.Get(oF),oG)?n.Set(oF,oG):null;},"|Left|Right|":function(oH){var oI,oJ,oK;if(oH.$==1){oJ=oH.$0;oI={$:1,$0:oJ};}else{oK=oH.$0;oI={$:0,$0:oK};}return oI;}}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.UI);b=$.Safe(a.Next);c=$.Safe(b.Doc);d=$.Safe($$.WebSharper.List);e=$.Safe($$.CentBet);f=$.Safe(e.Client);g=$.Safe(f.Admin);h=$.Safe(d.T);i=$.Safe(b.AttrModule);j=$.Safe(b.AttrProxy);k=$.Safe(b.Key);l=$.Safe(b.Var);m=$.Safe($$.WebSharper.Concurrency);n=$.Safe(b.Var1);o=$.Safe($$.WebSharper.Option);p=$.Safe($$.WebSharper.Seq);q=$.Safe(b.View);r=$.Safe(g.RecordType);s=$.Safe($$.WebSharper.Strings);t=$.Safe($$.Seq);u=$.Safe($$.WebSharper.Remoting);v=$.Safe(u.AjaxRemotingProvider);w=$.Safe($$.WebSharper.Unchecked);x=$.Safe($$.WebSharper.PrintfHelpers);y=$.Safe($$.console);z=$.Safe(b.Storage1);A=$.Safe($$.WebSharper.Json);B=$.Safe(A.Provider);C=$.Safe(B.Id);D=$.Safe(b.ListModel);E=$.Safe(f.Games);F=$.Safe(f.Coupon);G=$.Safe(f.GameDetail);H=$.Safe(E.PageLen);I=$.Safe(F.SettingsDialog);J=$.Safe(I.Helpers);K=$.Safe(f.Utils);L=$.Safe(F.Work);M=$.Safe(f.Meetup);N=$.Safe(b.View1);O=$.Safe($$.WebSharper.Operators);P=$.Safe(G.Helpers);Q=$.Safe(f.Football);R=$.Safe(Q.Meetup);S=$.Safe(E.Helpers1);T=$.Safe(K.LocalStorage);U=$.Safe(Q.EventCatalogue);V=$.Safe(E.Helpers2);W=$.Safe(E.Helpers3);X=$.Safe(W.Work);Y=$.Safe(E.ServerBetfairsSession);Z=$.Safe($$.Date);_0=$.Safe($$.JSON);_1=$.Safe($$.window);_2=$.Safe($$.WebSharper.Collections);_3=$.Safe(_2.MapModule);_4=$.Safe(_2.FSharpSet);_5=$.Safe(_2.BalancedTree);_6=$.Safe($$.WebSharper.Slice);return _7=$.Safe($$.WebSharper.MatchFailureException);});$.OnLoad(function(){K.initializeModalVar();T.strg();E.varTargetPageNumber();E.varPagesCount();E.varMode();E.varGameDetailError();E.varCurrentPageNumber();E.varColumnGpbVisible();E.varColumnCountryVisible();E.processGameDetail();E.meetups();Y.hasServerBetfairsSession();Y.check();H.view();H["var"]();H.localStorageKey();W.processTotalMatched();W.processMarkets();W.processEvents();V.updateCurentCoupon();V.eventsCatalogue();G.varError();P.renderDialog();F["render\u0421oupon"]();F.renderPagination();F.renderMeetup();I.elt();J.varVisible();J.renderDialog();J.content();g.varConsole();g.varCommandsHistory();g.varCmd();g.renderRecord();g.op_SpliceUntyped();g["cmd-input"]();return;});}());
