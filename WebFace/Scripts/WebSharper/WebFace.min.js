(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V;$.Define($$,{CentBet:{Client:{Admin:{RecordType:$.Class({},{get_color:function(){return function(W){return W.$==1?["lightgrey","red"]:W.$==2?["lightgrey","green"]:["white","navy"];};}}),Render:function(){var X,Y;Y=$.New(e,{$:0});X=a.ofArray([d.RenderCommandPrompt(),(d.op_SpliceUntyped())(h.Element("br",[],Y)),d.RenderRecords()]);return h.Concat(X);},RenderCommandPrompt:function(){var Z;Z=a.ofArray([(d.op_SpliceUntyped())(h.Element("span",a.ofArray([i.Style("margin-left","10px")]),$.New(e,{$:0}))),(d.op_SpliceUntyped())(h.Element("label",a.ofArray([j.Create("for",d["cmd-input"]())]),a.ofArray([h.TextNode("Input here:")]))),d.renderInput()]);return h.Concat(Z);},RenderRecords:function(){var _0,_4;_0=function(_1){var _2,_3;_3=$.New(e,{$:0});_2=a.ofArray([(d.renderRecord())(_1),(d.op_SpliceUntyped())(h.Element("br",[],_3))]);return h.Concat(_2);};_4=d.varConsole().get_View();return h.ConvertSeq(_0,_4);},addRecord:function(_5,_6){return d.varConsole().Add({Id:k.Fresh(),Text:_6,RecordType:_5});},"cmd-input":$.Field(function(){return"cmd-input";}),cmdKey:function(_7){return _7.Id;},doc:function(_8){return _8;},op_SpliceUntyped:$.Field(function(){return function(_9){return d.doc(_9);};}),recordKey:function(_){return _.Id;},renderInput:function(){var ba,bb,bc,bd,bg,bj,bn,bo,bD;ba=l.Create("");bb=l.Create(null);bc=l.Create(false);bd=m.Delay(function(){n.Set(bc,true);return m.Bind(d.send(n.Get(ba)),function(){n.Set(bc,false);n.Set(ba,"");return m.Return(null);});});bg=function(bh){var bi;bi={$:1,$0:bh};d.varCmd=function(){return bi;};return n.Set(ba,bh.Text);};bj=function(bk){var bl,bm;bl=d.tryGetCommandFromHistory(bk);bm=o.map(bg,bl);return;};bn=bc.get_View();bo=function(bp){var bq;bq=a.ofArray([h.Input(p.toList(p.delay(function(){return p.append([j.Create("id",d["cmd-input"]())],p.delay(function(){return p.append(bp?[j.Create("disabled","disabled")]:p.empty(),p.delay(function(){return p.append([i.Style("width","80%")],p.delay(function(){return p.append([i.CustomVar(bb,function(bv){return function(){return bv.focus();};},function(){return{$:0};})],p.delay(function(){return[i.Handler("keydown",function(){return function(bz){var bA,bB,bC;bA=bz.keyCode;if(bA===13){bC=n.Get(ba).toLowerCase();bB=bC==="-clear-output"?d.varConsole().Clear():bC==="-clear-hist"?d.varCommandsHistory().Clear():m.Start(bd,{$:0});}else{bB=bA===38?bj(true):bA===40?bj(false):null;}return bB;};})];}));}));}));}));})),ba)]);return h.Concat(bq);};bD=q.Map(bo,bn);return h.EmbedView(bD);},renderRecord:$.Field(function(){var bE;bE=function(bF){var bG,bH,bI;bG=(r.get_color())(bF.RecordType);bH=bG[1];bI=bG[0];return(d.op_SpliceUntyped())(h.Element("span",a.ofArray([i.Style("color",bH),i.Style("background",bI)]),a.ofArray([h.TextNode(bF.Text)])));};return function(bJ){var bK;bK=q.Map(bE,bJ);return h.EmbedView(bK);};}),send:function(bL){return m.Delay(function(){var bN,bO,bP,bQ,bR,bS;bN=s.Trim(bL);d.addRecord($.New(r,{$:2}),bN);bP=n.Get(d.varCommandsHistory().Var);if(p.isEmpty(bP)){bQ=true;}else{bR=t.last(bP);bQ=bR.Text!==bN;}if(bQ){d.varCommandsHistory().Add({Id:k.Fresh(),Text:bN});bS=m.Return(null);}else{bS=m.Return(null);}bO=bS;return m.Combine(bO,m.Delay(function(){return m.TryWith(m.Delay(function(){var bV;bV=v.Async("WebFace:1",[bN]);return m.Bind(bV,function(bW){var bX,bY,bZ;if(bW.$==1){bY=bW.$0;d.addRecord($.New(r,{$:1}),bY);bX=m.Return(null);}else{bZ=bW.$0;d.addRecord($.New(r,{$:0}),bZ);bX=m.Return(null);}return bX;});}),function(b0){d.addRecord($.New(r,{$:1}),b0.message);return m.Return(null);});}));});},tryGetCommandFromHistory:function(b1){var b2,b3,b4,b5,b6,b7,b8,b$,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB;b2=n.Get(d.varCommandsHistory().Var);b3=p.length(b2);if(b3===0){b4={$:0};}else{if(d.varCmd().$==1){b7=d.varCmd().$0.Id;b8=function(b9){return function(b_){return[b_,b9];};};b$=function(ca){var cb,cc;cb=ca[0];ca[1];cc=cb.Id;return w.Equals(cc,b7);};cd=n.Get(d.varCommandsHistory().Var);ce=p.mapi(b8,cd);cf=p.tryFind(b$,ce);cg=[cf,b1];if(cg[0].$==1){if(cg[1]){cg[0].$0[0];cj=cg[0].$0[1];if(b3>0?cj<b3-1:false){cl=cg[0].$0[1];cg[0].$0[0];ck=cl+1;}else{if(cg[0].$==1){if(cg[1]){cn=cg[1]?b3-1:0;}else{cg[0].$0[0];co=cg[0].$0[1];if(b3>0?co>0:false){cq=cg[0].$0[1];cg[0].$0[0];cp=cq-1;}else{cp=cg[1]?b3-1:0;}cn=cp;}cm=cn;}else{cm=cg[1]?b3-1:0;}ck=cm;}ci=ck;}else{if(cg[0].$==1){if(cg[1]){cs=cg[1]?b3-1:0;}else{cg[0].$0[0];ct=cg[0].$0[1];if(b3>0?ct>0:false){cv=cg[0].$0[1];cg[0].$0[0];cu=cv-1;}else{cu=cg[1]?b3-1:0;}cs=cu;}cr=cs;}else{cr=cg[1]?b3-1:0;}ci=cr;}ch=ci;}else{if(cg[0].$==1){if(cg[1]){cx=cg[1]?b3-1:0;}else{cg[0].$0[0];cy=cg[0].$0[1];if(b3>0?cy>0:false){cA=cg[0].$0[1];cg[0].$0[0];cz=cA-1;}else{cz=cg[1]?b3-1:0;}cx=cz;}cw=cx;}else{cw=cg[1]?b3-1:0;}ch=cw;}b6=ch;}else{b6=b3-1;}b5=b6;cB=p.nth(b5,b2);b4={$:1,$0:cB};}return b4;},varCmd:$.Field(function(){return{$:0};}),varCommandsHistory:$.Field(function(){var cC,cD,cF,cG,cH,cJ;try{cD=function(cE){return d.cmdKey(cE);};cF=x.LocalStorage("CentBetConsoleCommandsHistory",{Encode:(z.get_Default().EncodeRecord(undefined,[["Id",z.get_Default().EncodeUnion(k,"$",[[0,[["$0","Item",A,0]]]]),0],["Text",A,0]]))(),Decode:(z.get_Default().DecodeRecord(undefined,[["Id",z.get_Default().DecodeUnion(k,"$",[[0,[["$0","Item",A,0]]]]),0],["Text",A,0]]))()});cC=B.CreateWithStorage(cD,cF);}catch(cG){cH=function(cI){return d.cmdKey(cI);};cJ=$.New(e,{$:0});cC=B.Create(cH,cJ);}return cC;}),varConsole:$.Field(function(){var cK,cL,cN,cO,cP,cR;try{cL=function(cM){return d.recordKey(cM);};cN=x.LocalStorage("CentBetConsole",{Encode:(z.get_Default().EncodeRecord(undefined,[["Id",z.get_Default().EncodeUnion(k,"$",[[0,[["$0","Item",A,0]]]]),0],["Text",A,0],["RecordType",z.get_Default().EncodeUnion(r,"$",[[0,[]],[1,[]],[2,[]]]),0]]))(),Decode:(z.get_Default().DecodeRecord(undefined,[["Id",z.get_Default().DecodeUnion(k,"$",[[0,[["$0","Item",A,0]]]]),0],["Text",A,0],["RecordType",z.get_Default().DecodeUnion(r,"$",[[0,[]],[1,[]],[2,[]]]),0]]))()});cK=B.CreateWithStorage(cL,cN);}catch(cO){cP=function(cQ){return d.recordKey(cQ);};cR=$.New(e,{$:0});cK=B.Create(cP,cR);}return cK;})},Coupon:{EventCatalogue:$.Class({},{id:function(cS){return cS.gameId;}}),Meetup:$.Class({},{id:function(cT){return cT.game.gameId;}}),Render:function(){var cU,cV,cW,cX,cY,c0,c1,c2,c3,c4,c6,c7,c8,c9,c_,da,db,dc,dd,de,dg,dk,dl;cU=["COUPON",0,0];cV=cU[0];cW=cU[1];cX=cU[2];cY=function(){return D.check();};E["new"](cV,cW,cX,cY);c0=["CHECK-SERVER-BETFAIRS-SESSION",0,0];c1=c0[0];c2=c0[1];c3=c0[2];c4=function(){return C.processCoupon();};E["new"](c1,c2,c3,c4);c6=["EVENTS-CATALOGUE",0,0];c7=c6[0];c8=c6[1];c9=c6[2];c_=function(){return C.processEvents();};E["new"](c7,c8,c9,c_);da=["MARKETS-CATALOGUE",0,0];db=da[0];dc=da[1];dd=da[2];de=function(){return C.processMarkets();};E["new"](db,dc,dd,de);dg=function(dh){var di,dj;if(dh){di=C["render\u0421oupon"]();}else{dj=a.ofArray([h.TextNode("\u0414\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435.")]);di=h.Element("h1",[],dj);}return di;};dk=C.varDataRecived().get_View();dl=q.Map(dg,dk);return h.EmbedView(dl);},ServerBetfairsSession:{check:function(){return m.Delay(function(){return m.Bind(v.Async("WebFace:2",[]),function(dn){D.hasServerBetfairsSession=function(){return dn;};return m.Return(null);});});},has:function(){return D.hasServerBetfairsSession();},hasNot:function(){return!D.hasServerBetfairsSession();},hasServerBetfairsSession:$.Field(function(){return true;})},Work:$.Class({},{loop:function(_do){return m.Delay(function(){var dq;dq=m.Delay(function(){return m.Bind(_do.work.call(null,null),function(){return m.Bind(m.Sleep(_do.sleepInterval),function(){return m.Return(null);});});});return m.Combine(m.TryWith(dq,function(du){var dv,dz;dv=function(dw){return function(dx){var dy;dy="task error "+F.prettyPrint(dw)+" : "+F.prettyPrint(dx);return G?G.log(dy):undefined;};};dz=_do.what;(dv(dz))(du);return m.Bind(m.Sleep(_do.sleepErrorInterval),function(){return m.Return(null);});}),m.Delay(function(){return E.loop(_do);}));});},"new":function(dC,dD,dE,dF){var dG;dG=$.New(E,{what:dC,sleepInterval:dD,sleepErrorInterval:dE,work:dF});return E.run(dG);},run:function(dH){var dI;dI=m.Delay(function(){var dK,dN;dK=function(dL){var dM;dM="task "+F.prettyPrint(dL)+" : started";return G?G.log(dM):undefined;};dN=dH.what;dK(dN);return m.Bind(E.loop(dH),function(){var dP,dS;dP=function(dQ){var dR;dR="task "+F.prettyPrint(dQ)+" : terminated";return G?G.log(dR):undefined;};dS=dH.what;dP(dS);return m.Return(null);});});return m.Start(dI,{$:0});}}),addNewGames:function(dT){var dU,dV,dW,ed,ef,eh,ei,ej;dU=n.Get(C.meetups().Var);dV=p.toList(dU);C.meetups().Clear();dW=function(dX){var dY,dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb,ec;dY=dX[0];dZ=dX[1];d0=dX[2];d1=dY.gameId;d2=d1[0];d3=d1[1];d4=C.tryGetCountry(d2,d3);d5=l.Create(dZ.playMinute);d6=l.Create(dZ.status);d7=l.Create(dZ.summary);d8=l.Create(dZ.order);d9=l.Create(dZ.winBack);d_=l.Create(dZ.winLay);d$=l.Create(dZ.drawBack);ea=l.Create(dZ.drawLay);eb=l.Create(dZ.loseBack);ec=l.Create(dZ.loseLay);return $.New(H,{game:dY,playMinute:d5,status:d6,summary:d7,order:d8,winBack:d9,winLay:d_,drawBack:d$,drawLay:ea,loseBack:eb,loseLay:ec,country:l.Create(d4),totalMatched:l.Create({$:0}),hash:d0});};ed=function(ee){return n.Get(ee.order);};ef=function(eg){return C.meetups().Add(eg);};eh=a.map(dW,dT);ei=p.append(dV,eh);ej=p.sortBy(ed,ei);return p.iter(ef,ej);},doc:function(ek){return ek;},eventsCatalogue:$.Field(function(){var el,em,en,eo,eq,er,es,et,ex,ez,eA;el=J.checkTodayKey("CentBetEventsCatalogueCreated","CentBetEventsCatalogue");try{eo=function(ep){return K.id(ep);};er=(z.get_Default().EncodeRecord(K,[["gameId",z.get_Default().EncodeTuple([A,A]),0],["country",A,1],["markets",z.get_Default().EncodeList(z.get_Default().EncodeRecord(undefined,[["marketId",A,0],["marketName",A,0],["runners",z.get_Default().EncodeList(z.get_Default().EncodeRecord(undefined,[["selectionId",A,0],["runnerName",A,0]])),0]])),0]]))();eq=x.LocalStorage("CentBetEventsCatalogue",{Encode:er,Decode:(z.get_Default().DecodeRecord(K,[["gameId",z.get_Default().DecodeTuple([A,A]),0],["country",A,1],["markets",z.get_Default().DecodeList(z.get_Default().DecodeRecord(undefined,[["marketId",A,0],["marketName",A,0],["runners",z.get_Default().DecodeList(z.get_Default().DecodeRecord(undefined,[["selectionId",A,0],["runnerName",A,0]])),0]])),0]]))()});en=B.CreateWithStorage(eo,eq);}catch(es){et=function(eu){return function(ev){var ew;ew="error when restoring "+F.prettyPrint(eu)+" - "+F.prettyPrint(ev);return G?G.log(ew):undefined;};};(et("CentBetEventsCatalogue"))(es);ex=function(ey){return K.id(ey);};ez=$.New(e,{$:0});en=B.Create(ex,ez);}em=en;eA=function(eB){return function(eC){return function(eD){var eE;eE=F.prettyPrint(eB)+" - "+$$.String(eC)+", "+F.prettyPrint(eD);return G?G.log(eE):undefined;};};};((eA("CentBetEventsCatalogue"))(em.get_Length()))(el);return em;}),meetups:$.Field(function(){var eF,eH;eF=function(eG){return H.id(eG);};eH=$.New(e,{$:0});return B.Create(eF,eH);}),processCoupon:function(){return m.Delay(function(){var eJ,eL,eM,eN,eO;eJ=function(eK){return[eK.game.gameId,eK.hash];};eL=n.Get(C.meetups().Var);eM=p.map(eJ,eL);eN=p.toList(eM);eO=v.Async("WebFace:0",[eN,n.Get(C.varCurrentPageNumber()),30]);return m.Bind(eO,function(eP){var eQ,eR,eS,eT,eU,eV,eW;eQ=eP[1];eR=eP[2];eS=eP[0];eT=eP[3];eU=eT/30>>0;if(n.Get(C.varPagesCount())!==eU){n.Set(C.varPagesCount(),eU);eW=m.Return(null);}else{eW=m.Return(null);}eV=eW;return m.Combine(eV,m.Delay(function(){var eY,eZ;if(n.Get(C.varCurrentPageNumber())>eU){n.Set(C.varCurrentPageNumber(),0);eZ=m.Return(null);}else{eZ=m.Return(null);}eY=eZ;return m.Combine(eY,m.Delay(function(){var e1;if(!n.Get(C.varDataRecived())){n.Set(C.varDataRecived(),true);e1=m.Return(null);}else{e1=m.Return(null);}return m.Combine(e1,m.Delay(function(){C.updateCoupon(eS,eQ,eR);return m.Return(null);}));}));}));});});},processEvents:function(){return m.Delay(function(){var e4,e5,e6,e$,fa,fb,fc;e4=n.Get(C.eventsCatalogue().Var);e5=n.Get(C.meetups().Var);e6=function(e7){var e8,e_;e8=function(e9){return w.Equals(e9.gameId,e7.game.gameId);};e_=p.tryFind(e8,e4);return e_.$==0?{$:1,$0:e7.game.gameId}:{$:0};};e$=p.choose(e6,e5);fa=p.toList(e$);if(fa.$==0?true:D.hasNot()){fb=m.Return(null);}else{fc=v.Async("WebFace:3",[fa]);fb=m.Bind(fc,function(fd){var fe;fe=m.For(fd,function(ff){var fg,fh;ff[1];fg=ff[0];fh=ff[2];C.eventsCatalogue().Add($.New(K,{gameId:fg,country:fh,markets:$.New(e,{$:0})}));return m.Return(null);});return m.Combine(fe,m.Delay(function(){return m.For(n.Get(C.meetups().Var),function(fj){var fk,fl,fm;fk=fj.game.gameId;fl=fk[0];fm=fk[1];n.Set(fj.country,C.tryGetCountry(fl,fm));return m.Return(null);});}));});}return fb;});},processMarkets:function(){return m.Delay(function(){var fo,fq,fr,fs;fo=function(fp){return fp.markets.$==0;};fq=n.Get(C.eventsCatalogue().Var);fr=p.filter(fo,fq);fs=p.toList(fr);return(fs.$==0?true:D.hasNot())?m.Return(null):m.For(fs,function(ft){var fu,fv,fw,fx;fu=ft.gameId;fv=fu[0];fw=fu[1];fx=v.Async("WebFace:4",[fv,fw]);return m.Bind(fx,function(fy){var fz,fA,fB,fE,fH,fI,fJ,fK,fL,fM,fV,fW,fY;if(fy.$==1){fA=fy.$0;fB=function(fC){var fD;fC[0];fC[1];fC[2];fD=fC[3];return fD;};fE=function(fF){return function(fG){return fF+fG;};};fH=ft.gameId;fI=fH[0];fJ=fH[1];fK=a.choose(fB,fA);fL=p.fold(fE,0,fK);C.updateTotalMatched(fI,fJ,fL);fM=function(fN){var fO,fP,fQ,fR;fO=fN[0];fP=fN[1];fQ=fN[2];fN[3];fR=function(fS){var fT,fU;fT=fS[0];fU=fS[1];return{selectionId:fU,runnerName:fT};};return{marketId:fO,marketName:fP,runners:a.map(fR,fQ)};};fV=a.map(fM,fA);fW=function(fX){return{$:1,$0:$.New(K,{gameId:fX.gameId,country:fX.country,markets:fV})};};fY=ft.gameId;C.eventsCatalogue().UpdateBy(fW,fY);fz=m.Return(null);}else{fz=m.Return(null);}return fz;});});});},renderGamesHeaderRow:$.Field(function(){var fZ,f0,f1,f2,f3,f4,f5;fZ=a.ofArray([h.TextNode("\u2116")]);f0=a.ofArray([h.TextNode("1")]);f1=$.New(e,{$:0});f2=a.ofArray([h.TextNode("2")]);f3=$.New(e,{$:0});f4=a.ofArray([h.TextNode("GPB")]);f5=$.New(e,{$:0});return a.ofArray([h.Element("th",[],fZ),h.Element("th",[],f0),h.Element("th",[],f1),h.Element("th",[],f2),h.Element("th",[],f3),h.Element("th",a.ofArray([j.Create("colspan","2")]),a.ofArray([h.TextNode("1")])),h.Element("th",a.ofArray([j.Create("colspan","2")]),a.ofArray([h.TextNode("×")])),h.Element("th",a.ofArray([j.Create("colspan","2")]),a.ofArray([h.TextNode("2")])),h.Element("th",[],f4),h.Element("th",[],f5)]);}),renderMeetup:function(f6){var f7,gd,ge,gf,gg,gh,gl,gm,gn,go,gp,gq,gr,gG,gH,gI,gJ,gP,gQ;f7=function(f8){return function(f9){var f_,f$,gb,gc;f$=function(ga){return I.formatDecimalOption(ga);};gb=f9.get_View();gc=q.Map(f$,gb);f_=h.Element("td",a.ofArray([j.Create("class",f8?"kef kef-back":"kef kef-lay")]),a.ofArray([h.TextView(gc)]));return C.doc(f_);};};gd=f7(true);ge=f7(false);gh=function(gi){var gj,gk;gj=gi[0];gk=gi[1];return $$.String(gj)+"."+$$.String(gk);};gl=f6.order.get_View();gm=q.Map(gh,gl);gg=a.ofArray([h.TextView(gm)]);gn=h.Element("td",[],gg);go=h.Element("td",a.ofArray([j.Create("class","home-team")]),a.ofArray([h.TextNode(f6.game.home)]));gp=q.get_Do();gq=f6.playMinute.get_View();gr=L.Bind(function(gs){var gt;gt=f6.summary.get_View();return L.Bind(function(gu){var gv,gw,gx,gy,gz,gA,gB,gC,gD,gE,gF;if(gs.$==1){if(gu!==""){gx=h.Element("td",a.ofArray([j.Create("class","game-status")]),a.ofArray([h.TextNode(gu)]));gw=C.doc(gx);}else{if(gu!==""){gz=h.Element("td",a.ofArray([j.Create("class","game-status")]),a.ofArray([h.TextNode(gu)]));gy=C.doc(gz);}else{gA=$.New(e,{$:0});gB=h.Element("td",[],gA);gy=C.doc(gB);}gw=gy;}gv=gw;}else{if(gu!==""){gD=h.Element("td",a.ofArray([j.Create("class","game-status")]),a.ofArray([h.TextNode(gu)]));gC=C.doc(gD);}else{gE=$.New(e,{$:0});gF=h.Element("td",[],gE);gC=C.doc(gF);}gv=gC;}return L.Const(gv);},gt);},gq);gG=h.Element("td",a.ofArray([j.Create("class","away-team")]),a.ofArray([h.TextNode(f6.game.away)]));gH=h.Element("td",a.ofArray([j.Create("class","game-status")]),a.ofArray([h.TextView(f6.status.get_View())]));gI=f6.totalMatched.get_View();gJ=function(gK){var gL,gM,gN,gO;if(gK.$==1){gM=gK.$0;gN=$$.String(gM);gL=h.Element("td",a.ofArray([j.Create("class","game-gpb")]),a.ofArray([h.TextNode(gN)]));}else{gO=$.New(e,{$:0});gL=h.Element("td",[],gO);}return gL;};gP=q.Map(gJ,gI);gQ=h.Element("td",a.ofArray([j.Create("class","game-country")]),a.ofArray([h.TextView(f6.country.get_View())]));gf=a.ofArray([C.doc(gn),C.doc(go),h.EmbedView(gr),C.doc(gG),C.doc(gH),gd(f6.winBack),ge(f6.winLay),gd(f6.drawBack),ge(f6.drawLay),gd(f6.loseBack),ge(f6.loseLay),h.EmbedView(gP),C.doc(gQ)]);return h.Element("tr",[],gf);},renderPagination:$.Field(function(){var gR,gS,gT;gR=q.get_Do();gS=C.varPagesCount().get_View();gT=L.Bind(function(gU){var gV,gW;if(gU<2){gV=L.Const(h.get_Empty());}else{gW=C.varCurrentPageNumber().get_View();gV=L.Bind(function(gX){var gY;gY=p.toList(p.delay(function(){return p.map(function(g0){var g1,g7,g8,g9,g_;g1=p.toList(p.delay(function(){return p.append([j.Create("href","#")],p.delay(function(){return p.append([i.Handler("click",function(){return function(){return n.Set(C.varCurrentPageNumber(),g0);};})],p.delay(function(){return g0===gX?[j.Create("class","w3-green")]:p.empty();}));}));}));g7="\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 "+$$.String(g0+1);g8=h.TextNode(g7);g9=a.ofArray([h.Element("a",g1,a.ofArray([g8]))]);g_=h.Element("li",[],g9);return C.doc(g_);},M.range(0,gU));}));return L.Const(h.Concat(gY));},gW);}return gV;},gS);return h.EmbedView(gT);}),"render\u0421oupon":$.Field(function(){var g$,ha,hb,hd,he,hh,hk,hl;g$=a.ofArray([j.Create("class","w3-container")]);hb=a.ofArray([h.Element("tr",a.ofArray([i.Class("coupon-header-row")]),p.map(function(hc){return C.doc(hc);},C.renderGamesHeaderRow()))]);he=function(hf){var hg;hg=C.renderMeetup(hf);return C.doc(hg);};hh=function(hi){var hj;hj=p.map(he,hi);return h.Concat(hj);};hk=C.meetups().get_View();hl=q.Map(hh,hk);hd=a.ofArray([h.EmbedView(hl)]);ha=a.ofArray([h.Element("thead",[],hb),h.Element("tbody",[],hd)]);return h.Element("div",g$,a.ofArray([h.Element("div",a.ofArray([j.Create("class","w3-center")]),a.ofArray([h.Element("ul",a.ofArray([j.Create("class","w3-pagination")]),a.ofArray([C.renderPagination()]))])),h.Element("table",[],ha)]));}),stvr:function(hm,hn){return!w.Equals(n.Get(hm),hn)?n.Set(hm,hn):null;},tryGetCountry:function(ho,hp){var hq,hr,hs,ht,hu,hv,hw;hq=[ho,hp];hr=hq[0];hs=hq[1];ht=C.tryGetEvent(hr,hs);if(ht.$==1){if(ht.$0.country.$==1){hw=ht.$0.country.$0;hv=hw;}else{hv="";}hu=hv;}else{hu="";}return hu;},tryGetEvent:function(hx,hy){var hz,hA,hD;hz=[hx,hy];hA=function(hB){var hC;hC=hB.gameId;return w.Equals(hz,hC);};hD=n.Get(C.eventsCatalogue().Var);return p.tryFind(hA,hD);},updateCoupon:function(hE,hF,hG){var hH,hI,hJ,hM,hN,hO,hP,hR,hU,hV;hH=hE.$==0;if(!hH){hJ=function(hK){var hL;hL="adding new games "+$$.String(hK);return G?G.log(hL):undefined;};hM=hE.get_Length();hJ(hM);hI=C.addNewGames(hE);}else{hI=null;}hN=p.isEmpty(hG);if(!hN){hP=function(hQ){return C.meetups().RemoveByKey(hQ);};p.iter(hP,hG);hR=function(hS){var hT;hT="removing out games "+$$.String(hS);return G?G.log(hT):undefined;};hU=p.length(hG);hO=hR(hU);}else{hO=null;}hV=function(hW){var hX,hY,hZ,h0,h1,h2,h3,h4;hX=hW[0];hY=hW[1];hZ=hW[2];h0=C.meetups().TryFindByKey(hX);if(h0.$==1){h2=h0.$0;if(h2.hash!==hZ){h4=h0.$0;h4.hash=hZ;C.stvr(h4.playMinute,hY.playMinute);C.stvr(h4.status,hY.status);C.stvr(h4.summary,hY.summary);C.stvr(h4.order,hY.order);C.stvr(h4.winBack,hY.winBack);C.stvr(h4.winLay,hY.winLay);C.stvr(h4.drawBack,hY.drawBack);C.stvr(h4.drawLay,hY.drawLay);C.stvr(h4.loseBack,hY.loseBack);h3=C.stvr(h4.loseLay,hY.loseLay);}else{h3=null;}h1=h3;}else{h1=null;}return h1;};return p.iter(hV,hF);},updateTotalMatched:function(h5,h6,h7){var h8,h9,h_,h$;h8=[h5,h6];h9=C.meetups().TryFindByKey(h8);if(h9.$==1){h$=h9.$0;h_=n.Set(h$.totalMatched,{$:1,$0:h7});}else{h_=null;}return h_;},varCurrentPageNumber:$.Field(function(){return l.Create(0);}),varDataRecived:$.Field(function(){return l.Create(false);}),varPagesCount:$.Field(function(){return l.Create(1);})},Utils:{Left:function(ia){return{$:0,$0:ia};},LocalStorage:{checkTodayKey:function(ib,ic){var id,ie,_if,ig;id=N.now();ie=J.getWithDef(ib,id);if(id-ie>1*86400000){J.clear(ic);J.set(ib,N.now());ig=function(ih){return function(ii){var ij;ij="local storage "+F.prettyPrint(ih)+" of "+F.prettyPrint(ii)+" is inspired";return G?G.log(ij):undefined;};};(ig(ic))(ie);_if=id;}else{_if=ie;}return _if;},clear:function(ik){return J.strg().removeItem(ik);},get:function(il){var im,_in,io,ip,iq;try{_in=J.strg().getItem(il);io=O.parse(_in);im={$:1,$0:io};}catch(ip){iq=function(ir){return function(is){var it;it="error getting from local storage, key "+F.prettyPrint(ir)+" : "+F.prettyPrint(is);return G?G.log(it):undefined;};};(iq(il))(ip);im={$:0};}return im;},getWithDef:function(iu,iv){var iw,ix,iy;iw=J.get(iu);if(iw.$==1){iy=iw.$0;ix=iy;}else{ix=iv;}return ix;},set:function(iz,iA){var iB,iC,iD,iE;try{iC=O.stringify(iA);iB=J.strg().setItem(iz,iC);}catch(iD){iE=function(iF){return function(iG){return function(iH){return M.FailWith("error setting to local storage, key "+F.prettyPrint(iF)+", value "+F.prettyPrint(iG)+" : "+F.prettyPrint(iH));};};};iB=((iE(iz))(iA))(iD);}return iB;},strg:$.Field(function(){return P.localStorage;})},Right:function(iI){return{$:1,$0:iI};},dateTimeToString:function($s){var $0=this,$this=this;return $$.dateTimeToString($s);},formatDecimal:function(iJ){return I.trimEnd(iJ.toFixed(6),a.ofArray([48,46]));},formatDecimalOption:function(iK){var iL,iM;if(iK.$==1){iM=iK.$0;iL=I.formatDecimal(iM);}else{iL="";}return iL;},getDatePart:function(iN){var iO;iO=new N(iN.getTime());iO.setHours(0,0,0,0);return iO;},mkids:function(iP,iQ){var iR,iT,iU,iV,iW;iR=function(iS){return[iQ(iS),iS];};iT=a.map(iR,iP);iU=R.OfArray(p.toArray(iT));iV=a.map(iQ,iP);iW=S.New1(T.OfSeq(iV));return[iW,iU];},trimEnd:function(iX,iY){var iZ,i0,i1,i2,i3,i4,i5,i6,i7,i8,i9,i_;iZ=[iX,iY];if(iZ[0]===""){i0="";}else{if(iZ[1].$==1){i2=iZ[0];iZ[1];i3=iZ[1].$0;if(i2.charCodeAt(i2.length-1)===i3){iZ[1].$0;i5=iZ[1];i6=iZ[0];i4=I.trimEnd(U.string(i6,{$:0},{$:1,$0:i6.length-2}),i5);}else{if(iZ[1].$==1){i8=iZ[0];i9=iZ[1].$1;i7=I.trimEnd(i8,i9);}else{i7=M.Raise(V.New("E:\\User\\Docs\\Visual Studio 2015\\Projects\\Betfair\\CentBet\\WebFace\\ClientUtils.fs",8,18));}i4=i7;}i1=i4;}else{i_=iZ[0];i1=i_;}i0=i1;}return i0;},"|Left|Right|":function(i$){var ja,jb,jc;if(i$.$==1){jb=i$.$0;ja={$:1,$0:jb};}else{jc=i$.$0;ja={$:0,$0:jc};}return ja;}}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.List);b=$.Safe($$.CentBet);c=$.Safe(b.Client);d=$.Safe(c.Admin);e=$.Safe(a.T);f=$.Safe($$.WebSharper.UI);g=$.Safe(f.Next);h=$.Safe(g.Doc);i=$.Safe(g.AttrModule);j=$.Safe(g.AttrProxy);k=$.Safe(g.Key);l=$.Safe(g.Var);m=$.Safe($$.WebSharper.Concurrency);n=$.Safe(g.Var1);o=$.Safe($$.WebSharper.Option);p=$.Safe($$.WebSharper.Seq);q=$.Safe(g.View);r=$.Safe(d.RecordType);s=$.Safe($$.WebSharper.Strings);t=$.Safe($$.Seq);u=$.Safe($$.WebSharper.Remoting);v=$.Safe(u.AjaxRemotingProvider);w=$.Safe($$.WebSharper.Unchecked);x=$.Safe(g.Storage1);y=$.Safe($$.WebSharper.Json);z=$.Safe(y.Provider);A=$.Safe(z.Id);B=$.Safe(g.ListModel);C=$.Safe(c.Coupon);D=$.Safe(C.ServerBetfairsSession);E=$.Safe(C.Work);F=$.Safe($$.WebSharper.PrintfHelpers);G=$.Safe($$.console);H=$.Safe(C.Meetup);I=$.Safe(c.Utils);J=$.Safe(I.LocalStorage);K=$.Safe(C.EventCatalogue);L=$.Safe(g.View1);M=$.Safe($$.WebSharper.Operators);N=$.Safe($$.Date);O=$.Safe($$.JSON);P=$.Safe($$.window);Q=$.Safe($$.WebSharper.Collections);R=$.Safe(Q.MapModule);S=$.Safe(Q.FSharpSet);T=$.Safe(Q.BalancedTree);U=$.Safe($$.WebSharper.Slice);return V=$.Safe($$.WebSharper.MatchFailureException);});$.OnLoad(function(){J.strg();C.varPagesCount();C.varDataRecived();C.varCurrentPageNumber();C["render\u0421oupon"]();C.renderPagination();C.renderGamesHeaderRow();C.meetups();C.eventsCatalogue();D.hasServerBetfairsSession();d.varConsole();d.varCommandsHistory();d.varCmd();d.renderRecord();d.op_SpliceUntyped();d["cmd-input"]();return;});}());

//# sourceMappingURL=WebFace.min.map