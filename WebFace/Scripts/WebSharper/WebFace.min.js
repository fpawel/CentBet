(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S;$.Define($$,{CentBet:{Client:{Admin:{Level:$.Class({},{get_color:function(){return function(T){return T.$==1?["lightgrey","red"]:T.$==2?["lightgrey","green"]:["white","navy"];};}}),LocalStorage:$.Class({Get:function(U){var V,W,X,Y,Z;try{W=this.strg.getItem(U);X=a.parse(W);V={$:0,$0:X};}catch(Y){Z=this.strg;V={$:1,$0:"local storage get item "+b.prettyPrint(U)+" error : "+b.prettyPrint(Y)+", storage "+b.prettyPrint(Z)};}return V;},Set:function(_0,_1){var _2,_3,_4,_5;try{_3=a.stringify(_1);_2={$:0,$0:this.strg.setItem(_0,_3)};}catch(_4){_5=this.strg;_2={$:1,$0:"local storage set item "+b.prettyPrint(_0)+" error : "+b.prettyPrint(_4)+", value "+b.prettyPrint(_1)+", storage "+b.prettyPrint(_5)};}return _2;}},{New:function(){var _7;_7=$.New(this,{});_7.strg=c.localStorage;return _7;}}),Render:function(){var _8;_8=$.New(k,{$:0});return f.Concat(g.ofArray([j.RenderCommandPrompt(),(j.op_SpliceUntyped())(f.Element("br",[],_8)),j.RenderRecords()]));},RenderCommandPrompt:function(){var _9;_9=g.ofArray([(j.op_SpliceUntyped())(f.Element("span",g.ofArray([l.Style("margin-left","10px")]),$.New(k,{$:0}))),(j.op_SpliceUntyped())(f.Element("label",g.ofArray([m.Create("for",j["cmd-input"]())]),g.ofArray([f.TextNode("Input here:")]))),j.renderInput()]);return f.Concat(_9);},RenderMenu:function(){var _,bb,bj;_=function(ba){return ba;};bb=g.ofArray([f.Element("a",n.toList(n.delay(function(){return n.append([m.Create("href","#")],n.delay(function(){return[l.Handler("click",function(){return function(){return j.varConsole().Clear();};})];}));})),g.ofArray([f.TextNode("Clear console")])),f.Element("a",n.toList(n.delay(function(){return n.append([m.Create("href","#")],n.delay(function(){return[l.Handler("click",function(){return function(){return j.varCommandsHistory().Clear();};})];}));})),g.ofArray([f.TextNode("Clear history")]))]);bj=g.map(_,bb);return f.Concat(bj);},RenderRecords:function(){var bk,bo;bk=function(bl){var bm,bn;bn=$.New(k,{$:0});bm=g.ofArray([(j.renderRecord())(bl),(j.op_SpliceUntyped())(f.Element("br",[],bn))]);return f.Concat(bm);};bo=j.varConsole().get_View();return f.ConvertSeq(bk,bo);},addRecord:function(bp,bq){return j.varConsole().Add({Id:o.Fresh(),Text:bq,Level:bp});},"cmd-input":$.Field(function(){return"cmd-input";}),cmdKey:function(br){return br.Id;},doc:function(bs){return bs;},op_SpliceUntyped:$.Field(function(){return function(bt){return j.doc(bt);};}),recordKey:function(bu){return bu.Id;},renderInput:function(){var bv,bw,bx,by,bB,bE,bI,bJ,bX;bv=p.Create("");bw=p.Create(null);bx=p.Create(false);by=q.Delay(function(){r.Set(bx,true);return q.Bind(j.send(r.Get(bv)),function(){r.Set(bx,false);r.Set(bv,"");return q.Return(null);});});bB=function(bC){var bD;bD={$:1,$0:bC};j.varCmd=function(){return bD;};return r.Set(bv,bC.Text);};bE=function(bF){var bG,bH;bG=j.tryGetCommandFromHistory(bF);bH=s.map(bB,bG);return;};bI=bx.get_View();bJ=function(bK){var bL;bL=g.ofArray([f.Input(n.toList(n.delay(function(){return n.append([m.Create("id",j["cmd-input"]())],n.delay(function(){return n.append(bK?[m.Create("disabled","disabled")]:n.empty(),n.delay(function(){return n.append([l.Style("width","80%")],n.delay(function(){return n.append([l.CustomVar(bw,function(bQ){return function(){return bQ.focus();};},function(){return{$:0};})],n.delay(function(){return[l.Handler("keydown",function(){return function(bV){var bW;bW=bV.keyCode;return bW===13?q.Start(by,{$:0}):bW===38?bE(true):bW===40?bE(false):null;};})];}));}));}));}));})),bv)]);return f.Concat(bL);};bX=t.Map(bJ,bI);return f.EmbedView(bX);},renderRecord:$.Field(function(){var bY;bY=function(bZ){var b0,b1,b2;b0=(u.get_color())(bZ.Level);b1=b0[1];b2=b0[0];return(j.op_SpliceUntyped())(f.Element("span",g.ofArray([l.Style("color",b1),l.Style("background",b2)]),g.ofArray([f.TextNode(bZ.Text)])));};return function(b3){var b4;b4=t.Map(bY,b3);return f.EmbedView(b4);};}),send:function(b5){return q.Delay(function(){var b7,b8,b9,b_,b$,ca;b7=v.Trim(b5);j.addRecord($.New(u,{$:2}),b7);b9=r.Get(j.varCommandsHistory().Var);if(n.isEmpty(b9)){b_=true;}else{b$=w.last(b9);b_=b$.Text!==b7;}if(b_){j.varCommandsHistory().Add({Id:o.Fresh(),Text:b7});ca=q.Return(null);}else{ca=q.Return(null);}b8=ca;return q.Combine(b8,q.Delay(function(){return q.TryWith(q.Delay(function(){return q.Bind(y.Async("WebFace:1",[b7]),function(cd){var ce;cd[0];ce=cd[1];j.addRecord($.New(u,{$:0}),ce);return q.Return(null);});}),function(cf){j.addRecord($.New(u,{$:1}),cf.message);return q.Return(null);});}));});},tryGetCommandFromHistory:function(cg){var ch,ci,cj,ck,cl,cm,cn,cq,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS;ch=r.Get(j.varCommandsHistory().Var);ci=n.length(ch);if(ci===0){cj={$:0};}else{if(j.varCmd().$==1){cm=j.varCmd().$0.Id;cn=function(co){return function(cp){return[cp,co];};};cq=function(cr){var cs,ct;cs=cr[0];cr[1];ct=cs.Id;return z.Equals(ct,cm);};cu=r.Get(j.varCommandsHistory().Var);cv=n.mapi(cn,cu);cw=n.tryFind(cq,cv);cx=[cw,cg];if(cx[0].$==1){if(cx[1]){cx[0].$0[0];cA=cx[0].$0[1];if(ci>0?cA<ci-1:false){cC=cx[0].$0[1];cx[0].$0[0];cB=cC+1;}else{if(cx[0].$==1){if(cx[1]){cE=cx[1]?ci-1:0;}else{cx[0].$0[0];cF=cx[0].$0[1];if(ci>0?cF>0:false){cH=cx[0].$0[1];cx[0].$0[0];cG=cH-1;}else{cG=cx[1]?ci-1:0;}cE=cG;}cD=cE;}else{cD=cx[1]?ci-1:0;}cB=cD;}cz=cB;}else{if(cx[0].$==1){if(cx[1]){cJ=cx[1]?ci-1:0;}else{cx[0].$0[0];cK=cx[0].$0[1];if(ci>0?cK>0:false){cM=cx[0].$0[1];cx[0].$0[0];cL=cM-1;}else{cL=cx[1]?ci-1:0;}cJ=cL;}cI=cJ;}else{cI=cx[1]?ci-1:0;}cz=cI;}cy=cz;}else{if(cx[0].$==1){if(cx[1]){cO=cx[1]?ci-1:0;}else{cx[0].$0[0];cP=cx[0].$0[1];if(ci>0?cP>0:false){cR=cx[0].$0[1];cx[0].$0[0];cQ=cR-1;}else{cQ=cx[1]?ci-1:0;}cO=cQ;}cN=cO;}else{cN=cx[1]?ci-1:0;}cy=cN;}cl=cy;}else{cl=ci-1;}ck=cl;cS=n.nth(ck,ch);cj={$:1,$0:cS};}return cj;},varCmd:$.Field(function(){return{$:0};}),varCommandsHistory:$.Field(function(){var cT,cV;cT=function(cU){return j.cmdKey(cU);};cV=A.LocalStorage("CentBetConsoleCommandsHistory",{Encode:(C.get_Default().EncodeRecord(undefined,[["Id",C.get_Default().EncodeUnion(o,"$",[[0,[["$0","Item",D,0]]]]),0],["Text",D,0]]))(),Decode:(C.get_Default().DecodeRecord(undefined,[["Id",C.get_Default().DecodeUnion(o,"$",[[0,[["$0","Item",D,0]]]]),0],["Text",D,0]]))()});return E.CreateWithStorage(cT,cV);}),varConsole:$.Field(function(){var cW,cY;cW=function(cX){return j.recordKey(cX);};cY=A.LocalStorage("CentBetConsole",{Encode:(C.get_Default().EncodeRecord(undefined,[["Id",C.get_Default().EncodeUnion(o,"$",[[0,[["$0","Item",D,0]]]]),0],["Text",D,0],["Level",C.get_Default().EncodeUnion(u,"$",[[0,[]],[1,[]],[2,[]]]),0]]))(),Decode:(C.get_Default().DecodeRecord(undefined,[["Id",C.get_Default().DecodeUnion(o,"$",[[0,[["$0","Item",D,0]]]]),0],["Text",D,0],["Level",C.get_Default().DecodeUnion(u,"$",[[0,[]],[1,[]],[2,[]]]),0]]))()});return E.CreateWithStorage(cW,cY);})},Coupon:{Event:$.Class({},{id:function(cZ){return cZ.gameId;}}),Meetup:$.Class({},{id:function(c0){return c0.game.gameId;},inplay:function(c1){return r.Get(c1.gameInfo).playMinute.$==1;},notinplay:function(c2){return r.Get(c2.gameInfo).playMinute.$==0;},viewGameInfo:function(c3){return c3.gameInfo.get_View();}}),Render:function(){var c4,de,df,dg,dq,dz;c4=q.Delay(function(){return q.While(function(){return true;},q.Delay(function(){return q.TryWith(q.Delay(function(){return q.Bind(F.processCoupon(),function(){return q.Bind(F.processEvents(),function(){return q.Return(null);});});}),function(c$){var da;da=function(db){var dc;dc="error updating coupon : "+b.prettyPrint(db);return G?G.log(dc):undefined;};da(c$);return q.Bind(q.Sleep(5000),function(){return q.Return(null);});});}));});q.Start(c4,{$:0});de=t.get_Do();df=F.varInplayOnly().get_View();dg=H.Bind(function(dh){return H.Bind(function(di){var dj,dk,dl,dn,_do,dp;dj=n.isEmpty(di);dk=!dj;dl=function(dm){return I.inplay(dm);};dn=n.filter(dl,di);_do=n.isEmpty(dn);dp=!_do;return H.Const([dk,dp,dh]);},F.meetups().get_View());},df);dq=function(dr){var ds,dt,du,dv,dw,dx,dy;if(dr[0]){if(dr[1]){du=g.ofArray([F.renderMeetups()]);dt=f.Element("table",g.ofArray([l.Style("font-weight","bold")]),g.ofArray([f.Element("tbody",[],du)]));}else{if(dr[2]){dw=g.ofArray([f.TextNode("\u0424\u0443\u0442\u0431\u043e\u043b\u044c\u043d\u044b\u0435 \u043c\u0430\u0442\u0447\u0438 \u0441\u0435\u0433\u043e\u0434\u043d\u044f \u0435\u0449\u0451 \u043d\u0435 \u043d\u0430\u0447\u0430\u043b\u0438\u0441\u044c")]);dv=f.Element("h1",[],dw);}else{dx=g.ofArray([F.renderMeetups()]);dv=f.Element("table",g.ofArray([l.Style("font-weight","bold")]),g.ofArray([f.Element("tbody",[],dx)]));}dt=dv;}ds=dt;}else{dy=g.ofArray([f.TextNode("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043a\u0430\u043a\u0430\u044f-\u0442\u043e \u043e\u0448\u0438\u0431\u043a\u0430 :( \u041f\u0440\u0438\u043d\u043e\u0441\u0438\u043c \u0441\u0432\u043e\u0438 \u0438\u0437\u0432\u0438\u043d\u0435\u043d\u0438\u044f. ")]);ds=f.Element("h1",[],dy);}return ds;};dz=t.Map(dq,dg);return f.EmbedView(dz);},RenderMenu:function(){var dA,dB,d3;dA=F.varInplayOnly().get_View();dB=function(dC){var dD,dG,dQ,dR,dS;t.get_Do();dD=H.Bind(function(dE){return H.Bind(function(dF){return H.Const([dE,dF]);},F.varSelectedCountry().get_View());},F.viewCountries());dG=function(dH){var dI,dJ,dK,dL,dN,dO,dP;dI=dH[0];dJ=dH[1];if(n.isEmpty(dI)){dK=f.get_Empty();}else{dL=function(dM){return F.renderMenuItemCountry(dJ,dM);};dN=n.map(dL,dI);dO=f.Concat(dN);dP=F.renderMenuItemAllCountries();dK=f.Append(dP,dO);}return dK;};dQ=t.Map(dG,dD);dR=f.EmbedView(dQ);dS=g.ofArray([f.Element("a",n.toList(n.delay(function(){return n.append([m.Create("href","#")],n.delay(function(){return n.append([l.Handler("click",function(){return function(){r.Set(F.varSelectedCountry(),{$:0});return r.Set(F.varInplayOnly(),true);};})],n.delay(function(){return dC?[m.Create("class","active")]:n.empty();}));}));})),g.ofArray([f.TextNode("\u0412 \u0438\u0433\u0440\u0435")])),f.Element("a",n.toList(n.delay(function(){return n.append([m.Create("href","#")],n.delay(function(){return n.append([l.Handler("click",function(){return function(){r.Set(F.varSelectedCountry(),{$:0});return r.Set(F.varInplayOnly(),false);};})],n.delay(function(){return!dC?[m.Create("class","active")]:n.empty();}));}));})),g.ofArray([f.TextNode("\u0412\u0441\u0435 \u043c\u0430\u0442\u0447\u0438")])),dR]);return f.Concat(dS);};d3=t.Map(dB,dA);return f.EmbedView(d3);},addNewGames:function(d4){var d5,d6,d7,ef,eh,ej,ek,el;d5=r.Get(F.meetups().Var);d6=n.toList(d5);F.meetups().Clear();d7=function(d8){var d9,d_,d$,ea,eb,ec,ed,ee;d9=d8[0];d_=d8[1];d$=d8[2];ea=d9.gameId;eb=ea[0];ec=ea[1];ed=F.tryGetCountry(eb,ec);ee=p.Create(d_);return $.New(I,{game:d9,gameInfo:ee,country:p.Create(ed),hash:d$});};ef=function(eg){return r.Get(eg.gameInfo).order;};eh=function(ei){return F.meetups().Add(ei);};ej=g.map(d7,d4);ek=n.append(d6,ej);el=n.sortBy(ef,ek);return n.iter(eh,el);},events:$.Field(function(){var em,eo;em=function(en){return J.id(en);};eo=$.New(k,{$:0});return E.Create(em,eo);}),meetups:$.Field(function(){var ep,er;ep=function(eq){return I.id(eq);};er=$.New(k,{$:0});return E.Create(ep,er);}),processCoupon:function(){return q.Delay(function(){var et,ev,ew,ex;et=function(eu){return[eu.game.gameId,eu.hash];};ev=r.Get(F.meetups().Var);ew=n.map(et,ev);ex=n.toList(ew);return q.Bind(y.Async("WebFace:0",[ex,r.Get(F.varInplayOnly())]),function(ey){var ez,eA,eB;ez=ey[1];eA=ey[2];eB=ey[0];F.updateCoupon(eB,ez,eA);return q.Return(null);});});},processEvents:function(){return q.Delay(function(){var eD,eE,eF,eK,eL,eM,eN;eD=r.Get(F.events().Var);eE=r.Get(F.meetups().Var);eF=function(eG){var eH,eJ;eH=function(eI){return z.Equals(eI.gameId,eG.game.gameId);};eJ=n.tryFind(eH,eD);return eJ.$==0?{$:1,$0:eG.game.gameId}:{$:0};};eK=n.choose(eF,eE);eL=n.toList(eK);if(eL.$==0){eM=q.Return(null);}else{eN=y.Async("WebFace:2",[eL]);eM=q.Bind(eN,function(eO){var eP;eP=q.For(eO,function(eQ){var eR,eS,eT;eR=eQ[3];eQ[1];eS=eQ[0];eT=eQ[2];F.events().Add($.New(J,{gameId:eS,country:eT,openDate:eR}));return q.Return(null);});return q.Combine(eP,q.Delay(function(){return q.For(r.Get(F.meetups().Var),function(eV){var eW,eX,eY;eW=eV.game.gameId;eX=eW[0];eY=eW[1];r.Set(eV.country,F.tryGetCountry(eX,eY));return q.Return(null);});}));});}return eM;});},renderMeetup:function(eZ,e0,e1){var e2,e3,e4,e5,e6,e7,e8,e9,fc,fd,fe,fj,fk,fl,fm,fn,fo,ft,fu,fv,fA;e2=[e0,r.Get(eZ.gameInfo).playMinute,e1];if(e2[0]){if(e2[1].$==0){e4=f.get_Empty();}else{if(e2[2].$==1){e6=e2[2].$0;if(e6!==""?e6!==r.Get(eZ.country):false){e2[2].$0;e7=f.get_Empty();}else{e8=eZ.gameInfo.get_View();e9=function(e_){var e$,fb;e$=function(fa){return fa.$==1;};fb=g.ofArray([e_.drawBack,e_.drawLay,e_.winBack,e_.winLay,e_.loseBack,e_.loseLay]);return n.exists(e$,fb)?F.renderMeetup1(eZ):f.get_Empty();};fc=t.Map(e9,e8);e7=f.EmbedView(fc);}e5=e7;}else{fd=eZ.gameInfo.get_View();fe=function(ff){var fg,fi;fg=function(fh){return fh.$==1;};fi=g.ofArray([ff.drawBack,ff.drawLay,ff.winBack,ff.winLay,ff.loseBack,ff.loseLay]);return n.exists(fg,fi)?F.renderMeetup1(eZ):f.get_Empty();};fj=t.Map(fe,fd);e5=f.EmbedView(fj);}e4=e5;}e3=e4;}else{if(e2[2].$==1){fl=e2[2].$0;if(fl!==""?fl!==r.Get(eZ.country):false){e2[2].$0;fm=f.get_Empty();}else{fn=eZ.gameInfo.get_View();fo=function(fp){var fq,fs;fq=function(fr){return fr.$==1;};fs=g.ofArray([fp.drawBack,fp.drawLay,fp.winBack,fp.winLay,fp.loseBack,fp.loseLay]);return n.exists(fq,fs)?F.renderMeetup1(eZ):f.get_Empty();};ft=t.Map(fo,fn);fm=f.EmbedView(ft);}fk=fm;}else{fu=eZ.gameInfo.get_View();fv=function(fw){var fx,fz;fx=function(fy){return fy.$==1;};fz=g.ofArray([fw.drawBack,fw.drawLay,fw.winBack,fw.winLay,fw.loseBack,fw.loseLay]);return n.exists(fx,fz)?F.renderMeetup1(eZ):f.get_Empty();};fA=t.Map(fv,fu);fk=f.EmbedView(fA);}e3=fk;}return e3;},renderMeetup1:function(fB){var fC,fG,fJ,fM,fO,fP,fU,f3;fC=function(fD){var fE,fF;fE=fB.gameInfo.get_View();fF=t.Map(fD,fE);return f.TextView(fF);};fG=function(fH,fI){return f.Element("span",g.ofArray([l.Style("color",fH)]),g.ofArray([fI]));};fJ=function(fK,fL){return f.Element("td",g.ofArray([m.Create("class",fK?"kef kef-back":"kef kef-lay")]),g.ofArray([fC(fL)]));};fM=function(fN){return K.formatDecimalOption(fN);};fO=$.New(k,{$:0});fP=g.ofArray([fC(function(fQ){var fR,fS,fT;fR=fQ.order;fS=fR[0];fT=fR[1];return $$.String(fS)+"."+$$.String(fT);})]);fU=g.ofArray([fG("RoyalBlue",f.TextNode(fB.game.home)),fG("SeaGreen",fC(function(fV){return fV.summary;})),fG("SteelBlue",f.TextNode(fB.game.away)),fG("SeaGreen",fC(function(fW){return fW.status;}))]);f3=g.ofArray([f.TextView(fB.country.get_View())]);return f.Element("tr",fO,g.ofArray([f.Element("td",[],fP),f.Element("td",[],fU),fJ(true,function(fX){return fM(fX.winBack);}),fJ(false,function(fY){return fM(fY.winLay);}),fJ(true,function(fZ){return fM(fZ.drawBack);}),fJ(false,function(f0){return fM(f0.drawLay);}),fJ(true,function(f1){return fM(f1.loseBack);}),fJ(false,function(f2){return fM(f2.loseLay);}),f.Element("td",[],f3)]));},renderMeetups:function(){var f4,f5;f4=F.meetups().get_View();f5=function(f6){var f7,ga,ge;f7=function(f8){var f9,f_,f$;f9=f8[0];f_=f8[1];f$=f8[2];return F.renderMeetup(f9,f_,f$);};t.get_Do();ga=H.Bind(function(gb){return H.Bind(function(gc){return H.Bind(function(gd){return H.Const([gb,gc,gd]);},F.varSelectedCountry().get_View());},F.varInplayOnly().get_View());},f6);ge=t.Map(f7,ga);return f.EmbedView(ge);};return f.ConvertSeq(f5,f4);},renderMenuItemAllCountries:function(){var gf,gg,gq;gf=F.varSelectedCountry().get_View();gg=function(gh){return f.Element("a",n.toList(n.delay(function(){var gj,gk,gl;if(gh.$==1){gk=gh.$0;if(gk!==""){gh.$0;gl=n.empty();}else{gl=[m.Create("class","active")];}gj=gl;}else{gj=[m.Create("class","active")];}return n.append(gj,n.delay(function(){return n.append([m.Create("href","#")],n.delay(function(){return[l.Handler("click",function(){return function(){return r.Set(F.varSelectedCountry(),{$:0});};})];}));}));})),g.ofArray([f.TextNode("\u0412\u0441\u0435 \u0441\u0442\u0440\u0430\u043d\u044b")]));};gq=t.Map(gg,gf);return f.EmbedView(gq);},renderMenuItemCountry:function(gr,gs){return f.Element("a",n.toList(n.delay(function(){var gu,gv,gw;if(gr.$==1){gv=gr.$0;if(gv===gs){gr.$0;gw=[m.Create("class","active")];}else{gw=n.empty();}gu=gw;}else{gu=n.empty();}return n.append(gu,n.delay(function(){return n.append([m.Create("href","#")],n.delay(function(){return[l.Handler("click",function(){return function(){return r.Set(F.varSelectedCountry(),{$:1,$0:gs});};})];}));}));})),g.ofArray([f.TextNode(gs)]));},tryGetCountry:function(gB,gC){var gD,gE,gF,gG,gH,gI,gJ;gD=[gB,gC];gE=gD[0];gF=gD[1];gG=F.tryGetEvent(gE,gF);if(gG.$==1){if(gG.$0.country.$==1){gJ=gG.$0.country.$0;gI=gJ;}else{gI="";}gH=gI;}else{gH="";}return gH;},tryGetEvent:function(gK,gL){var gM,gN,gQ;gM=[gK,gL];gN=function(gO){var gP;gP=gO.gameId;return z.Equals(gM,gP);};gQ=r.Get(F.events().Var);return n.tryFind(gN,gQ);},updateCoupon:function(gR,gS,gT){var gU,gV,gW,gZ,g0,g1,g2,g4,g7,g8;gU=gR.$==0;if(!gU){gW=function(gX){var gY;gY="adding new games "+$$.String(gX);return G?G.log(gY):undefined;};gZ=gR.get_Length();gW(gZ);gV=F.addNewGames(gR);}else{gV=null;}g0=n.isEmpty(gT);if(!g0){g2=function(g3){return F.meetups().RemoveByKey(g3);};n.iter(g2,gT);g4=function(g5){var g6;g6="removing out games "+$$.String(g5);return G?G.log(g6):undefined;};g7=n.length(gT);g1=g4(g7);}else{g1=null;}g8=function(g9){var g_,g$,ha,hb,hc,hd;g_=g9[0];g$=g9[1];ha=g9[2];hb=F.meetups().TryFindByKey(g_);if(hb.$==1){hd=hb.$0;r.Set(hd.gameInfo,g$);hc=void(hd.hash=ha);}else{hc=null;}return hc;};return n.iter(g8,gS);},varInplayOnly:$.Field(function(){return p.Create(true);}),varSelectedCountry:$.Field(function(){return p.Create({$:0});}),viewCountries:function(){var he,hf;he=t.get_Do();hf=F.events().get_View();return H.Bind(function(hg){var hh,hj,hk,hl;hh=function(hi){return[hi.gameId,hi];};hj=n.map(hh,hg);hk=M.OfArray(n.toArray(hj));hl=F.viewGames();return H.Bind(function(hm){var hn,ht,hu,hv,hx,hy,hA,hB;hn=function(ho){var hp,hq,hs;hp=ho[0];ho[1];hq=function(hr){return hr.country;};hs=hk.TryFind(hp.gameId);return s.map(hq,hs);};ht=n.choose(hn,hm);hu={$:0};hv=function(hw){return!z.Equals(hu,hw);};hx=n.filter(hv,ht);hy=function(hz){return hz;};hA=n.choose(hy,hx);hB=w.distinct(hA);return H.Const(n.sort(hB));},hl);},hf);},viewGames:$.Field(function(){var hC,hD;hC=t.get_Do();hD=F.meetups().get_View();return H.Bind(function(hE){var hF;hF=F.varInplayOnly().get_View();return H.Bind(function(hG){var hH,hJ,hO,hP;hH=function(hI){return!hG?true:r.Get(hI.gameInfo).playMinute.$==1;};hJ=function(hK){var hL,hN;hL=function(hM){return[hK.game,hM];};hN=hK.gameInfo.get_View();return t.Map(hL,hN);};hO=n.filter(hH,hE);hP=n.map(hJ,hO);return H.Bind(function(hQ){return H.Const(hQ);},H.Sequence(hP));},hF);},hD);})},Utils:{dateTimeToString:function($s){var $0=this,$this=this;return $$.dateTimeToString($s);},formatDecimal:function(hR){return K.trimEnd(hR.toFixed(6),g.ofArray([48,46]));},formatDecimalOption:function(hS){var hT,hU;if(hS.$==1){hU=hS.$0;hT=K.formatDecimal(hU);}else{hT="";}return hT;},getDatePart:function(hV){var hW;hW=new N(hV.getTime());hW.setHours(0,0,0,0);return hW;},mkids:function(hX,hY){var hZ,h1,h2,h3,h4;hZ=function(h0){return[hY(h0),h0];};h1=g.map(hZ,hX);h2=M.OfArray(n.toArray(h1));h3=g.map(hY,hX);h4=O.New1(P.OfSeq(h3));return[h4,h2];},trimEnd:function(h5,h6){var h7,h8,h9,h_,h$,ia,ib,ic,id,ie,_if,ig;h7=[h5,h6];if(h7[0]===""){h8="";}else{if(h7[1].$==1){h_=h7[0];h7[1];h$=h7[1].$0;if(h_.charCodeAt(h_.length-1)===h$){h7[1].$0;ib=h7[1];ic=h7[0];ia=K.trimEnd(Q.string(ic,{$:0},{$:1,$0:ic.length-2}),ib);}else{if(h7[1].$==1){ie=h7[0];_if=h7[1].$1;id=K.trimEnd(ie,_if);}else{id=R.Raise(S.New("E:\\User\\Docs\\Visual Studio 2015\\Projects\\Betfair\\CentBet\\WebFace\\ClientUtils.fs",9,18));}ia=id;}h9=ia;}else{ig=h7[0];h9=ig;}h8=h9;}return h8;}}}}});$.OnInit(function(){a=$.Safe($$.JSON);b=$.Safe($$.WebSharper.PrintfHelpers);c=$.Safe($$.window);d=$.Safe($$.WebSharper.UI);e=$.Safe(d.Next);f=$.Safe(e.Doc);g=$.Safe($$.WebSharper.List);h=$.Safe($$.CentBet);i=$.Safe(h.Client);j=$.Safe(i.Admin);k=$.Safe(g.T);l=$.Safe(e.AttrModule);m=$.Safe(e.AttrProxy);n=$.Safe($$.WebSharper.Seq);o=$.Safe(e.Key);p=$.Safe(e.Var);q=$.Safe($$.WebSharper.Concurrency);r=$.Safe(e.Var1);s=$.Safe($$.WebSharper.Option);t=$.Safe(e.View);u=$.Safe(j.Level);v=$.Safe($$.WebSharper.Strings);w=$.Safe($$.Seq);x=$.Safe($$.WebSharper.Remoting);y=$.Safe(x.AjaxRemotingProvider);z=$.Safe($$.WebSharper.Unchecked);A=$.Safe(e.Storage1);B=$.Safe($$.WebSharper.Json);C=$.Safe(B.Provider);D=$.Safe(C.Id);E=$.Safe(e.ListModel);F=$.Safe(i.Coupon);G=$.Safe($$.console);H=$.Safe(e.View1);I=$.Safe(F.Meetup);J=$.Safe(F.Event);K=$.Safe(i.Utils);L=$.Safe($$.WebSharper.Collections);M=$.Safe(L.MapModule);N=$.Safe($$.Date);O=$.Safe(L.FSharpSet);P=$.Safe(L.BalancedTree);Q=$.Safe($$.WebSharper.Slice);R=$.Safe($$.WebSharper.Operators);return S=$.Safe($$.WebSharper.MatchFailureException);});$.OnLoad(function(){F.viewGames();F.varSelectedCountry();F.varInplayOnly();F.meetups();F.events();j.varConsole();j.varCommandsHistory();j.varCmd();j.renderRecord();j.op_SpliceUntyped();j["cmd-input"]();return;});}());
