(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7;$.Define($$,{CentBet:{Client:{Admin:{RecordType:$.Class({},{get_color:function(){return function(_8){return _8.$==1?["lightgrey","red"]:_8.$==2?["lightgrey","green"]:["white","navy"];};}}),Render:function(){var _9;_9=$.New(h,{$:0});return c.Concat(d.ofArray([g.RenderCommandPrompt(),(g.op_SpliceUntyped())(c.Element("br",[],_9)),g.RenderRecords()]));},RenderCommandPrompt:function(){var _;_=d.ofArray([(g.op_SpliceUntyped())(c.Element("span",d.ofArray([i.Style("margin-left","10px")]),$.New(h,{$:0}))),(g.op_SpliceUntyped())(c.Element("label",d.ofArray([j.Create("for",g["cmd-input"]())]),d.ofArray([c.TextNode("Input here:")]))),g.renderInput()]);return c.Concat(_);},RenderRecords:function(){var ba,be;ba=function(bb){var bc,bd;bd=$.New(h,{$:0});bc=d.ofArray([(g.renderRecord())(bb),(g.op_SpliceUntyped())(c.Element("br",[],bd))]);return c.Concat(bc);};be=g.varConsole().get_View();return c.ConvertSeq(ba,be);},addRecord:function(be,bf){return g.varConsole().Add({Id:k.Fresh(),Text:bf,RecordType:be});},"cmd-input":$.Field(function(){return"cmd-input";}),cmdKey:function(bg){return bg.Id;},doc:function(bh){return bh;},op_SpliceUntyped:$.Field(function(){return function(bi){return g.doc(bi);};}),recordKey:function(bj){return bj.Id;},renderInput:function(){var bk,bl,bm,bn,bq,bt,bx,by,bO;bk=l.Create("");bl=l.Create(null);bm=l.Create(false);bn=m.Delay(function(){n.Set(bm,true);return m.Bind(g.send(n.Get(bk)),function(){n.Set(bm,false);n.Set(bk,"");return m.Return(null);});});bq=function(br){var bs;bs={$:1,$0:br};g.varCmd=function(){return bs;};return n.Set(bk,br.Text);};bt=function(bu){var bv,bw;bv=g.tryGetCommandFromHistory(bu);bw=o.map(bq,bv);return;};bx=bm.get_View();by=function(bz){var bA;bA=d.ofArray([c.Input(p.toList(p.delay(function(){return p.append([j.Create("id",g["cmd-input"]())],p.delay(function(){return p.append(bz?[j.Create("disabled","disabled")]:p.empty(),p.delay(function(){return p.append([i.Style("width","80%")],p.delay(function(){return p.append([i.CustomVar(bl,function(bF){return function(){return bF.focus();};},function(){return{$:0};})],p.delay(function(){return[i.Handler("keydown",function(){return function(bK){var bL,bM,bN;bL=bK.keyCode;if(bL===13){bN=n.Get(bk).toLowerCase();bM=bN==="-clear-output"?g.varConsole().Clear():bN==="-clear-hist"?g.varCommandsHistory().Clear():m.Start(bn,{$:0});}else{bM=bL===38?bt(true):bL===40?bt(false):null;}return bM;};})];}));}));}));}));})),bk)]);return c.Concat(bA);};bO=q.Map(by,bx);return c.EmbedView(bO);},renderRecord:$.Field(function(){var bP;bP=function(bQ){var bR,bS,bT,bU,bV;try{bS=(r.get_color())(bQ.RecordType);bT=bS[1];bU=bS[0];bR=(g.op_SpliceUntyped())(c.Element("span",d.ofArray([i.Style("color",bT),i.Style("background",bU)]),d.ofArray([c.TextNode(bQ.Text)])));}catch(bV){g.varCommandsHistory().Clear();g.varConsole().Clear();bR=c.get_Empty();}return bR;};return function(bW){var bX;bX=q.Map(bP,bW);return c.EmbedView(bX);};}),send:function(bY){return m.Delay(function(){var b0,b1,b2,b3,b4,b5;b0=s.Trim(bY);g.addRecord($.New(r,{$:2}),b0);b2=n.Get(g.varCommandsHistory().Var);if(p.isEmpty(b2)){b3=true;}else{b4=t.last(b2);b3=b4.Text!==b0;}if(b3){g.varCommandsHistory().Add({Id:k.Fresh(),Text:b0});b5=m.Return(null);}else{b5=m.Return(null);}b1=b5;return m.Combine(b1,m.Delay(function(){return m.TryWith(m.Delay(function(){var b8;b8=v.Async("WebFace:2",[b0]);return m.Bind(b8,function(b9){var b_,b$,ca;if(b9.$==1){b$=b9.$0;g.addRecord($.New(r,{$:1}),b$);b_=m.Return(null);}else{ca=b9.$0;g.addRecord($.New(r,{$:0}),ca);b_=m.Return(null);}return b_;});}),function(cb){g.addRecord($.New(r,{$:1}),cb.message);return m.Return(null);});}));});},tryGetCommandFromHistory:function(cc){var cd,ce,cf,cg,ch,ci,cj,cm,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO;cd=n.Get(g.varCommandsHistory().Var);ce=p.length(cd);if(ce===0){cf={$:0};}else{if(g.varCmd().$==1){ci=g.varCmd().$0.Id;cj=function(ck){return function(cl){return[cl,ck];};};cm=function(cn){var co,cp;co=cn[0];cn[1];cp=co.Id;return w.Equals(cp,ci);};cq=n.Get(g.varCommandsHistory().Var);cr=p.mapi(cj,cq);cs=p.tryFind(cm,cr);ct=[cs,cc];if(ct[0].$==1){if(ct[1]){ct[0].$0[0];cw=ct[0].$0[1];if(ce>0?cw<ce-1:false){cy=ct[0].$0[1];ct[0].$0[0];cx=cy+1;}else{if(ct[0].$==1){if(ct[1]){cA=ct[1]?ce-1:0;}else{ct[0].$0[0];cB=ct[0].$0[1];if(ce>0?cB>0:false){cD=ct[0].$0[1];ct[0].$0[0];cC=cD-1;}else{cC=ct[1]?ce-1:0;}cA=cC;}cz=cA;}else{cz=ct[1]?ce-1:0;}cx=cz;}cv=cx;}else{if(ct[0].$==1){if(ct[1]){cF=ct[1]?ce-1:0;}else{ct[0].$0[0];cG=ct[0].$0[1];if(ce>0?cG>0:false){cI=ct[0].$0[1];ct[0].$0[0];cH=cI-1;}else{cH=ct[1]?ce-1:0;}cF=cH;}cE=cF;}else{cE=ct[1]?ce-1:0;}cv=cE;}cu=cv;}else{if(ct[0].$==1){if(ct[1]){cK=ct[1]?ce-1:0;}else{ct[0].$0[0];cL=ct[0].$0[1];if(ce>0?cL>0:false){cN=ct[0].$0[1];ct[0].$0[0];cM=cN-1;}else{cM=ct[1]?ce-1:0;}cK=cM;}cJ=cK;}else{cJ=ct[1]?ce-1:0;}cu=cJ;}ch=cu;}else{ch=ce-1;}cg=ch;cO=p.nth(cg,cd);cf={$:1,$0:cO};}return cf;},varCmd:$.Field(function(){return{$:0};}),varCommandsHistory:$.Field(function(){var cP,cQ,cR,cU,cW,cX,cY,c2,c3,c7,c9;try{cR=function(cS){var cT;cT="restoring list - "+x.prettyPrint(cS);return y?y.log(cT):undefined;};cR("CentBetConsoleCommandsHistory");cU=function(cV){return g.cmdKey(cV);};cW=z.LocalStorage("CentBetConsoleCommandsHistory",{Encode:(B.get_Default().EncodeRecord(undefined,[["Id",B.get_Default().EncodeUnion(k,"$",[[0,[["$0","Item",C,0]]]]),0],["Text",C,0]]))(),Decode:(B.get_Default().DecodeRecord(undefined,[["Id",B.get_Default().DecodeUnion(k,"$",[[0,[["$0","Item",C,0]]]]),0],["Text",C,0]]))()});cX=D.CreateWithStorage(cU,cW);cY=function(cZ){return function(c0){var c1;c1=x.prettyPrint(cZ)+" - "+$$.String(c0);return y?y.log(c1):undefined;};};(cY("CentBetConsoleCommandsHistory"))(cX.get_Length());cQ=cX;}catch(c2){c3=function(c4){return function(c5){var c6;c6="error when restoring "+x.prettyPrint(c4)+" - "+x.prettyPrint(c5);return y?y.log(c6):undefined;};};(c3("CentBetConsoleCommandsHistory"))(c2);c7=function(c8){return g.cmdKey(c8);};c9=$.New(h,{$:0});cQ=D.Create(c7,c9);}cP=cQ;return cP;}),varConsole:$.Field(function(){var c_,c$,da,dd,df,dg,dh,dl,dm,dq,ds;try{da=function(db){var dc;dc="restoring list - "+x.prettyPrint(db);return y?y.log(dc):undefined;};da("CentBetConsole");dd=function(de){return g.recordKey(de);};df=z.LocalStorage("CentBetConsole",{Encode:(B.get_Default().EncodeRecord(undefined,[["Id",B.get_Default().EncodeUnion(k,"$",[[0,[["$0","Item",C,0]]]]),0],["Text",C,0],["RecordType",B.get_Default().EncodeUnion(r,"$",[[0,[]],[1,[]],[2,[]]]),0]]))(),Decode:(B.get_Default().DecodeRecord(undefined,[["Id",B.get_Default().DecodeUnion(k,"$",[[0,[["$0","Item",C,0]]]]),0],["Text",C,0],["RecordType",B.get_Default().DecodeUnion(r,"$",[[0,[]],[1,[]],[2,[]]]),0]]))()});dg=D.CreateWithStorage(dd,df);dh=function(di){return function(dj){var dk;dk=x.prettyPrint(di)+" - "+$$.String(dj);return y?y.log(dk):undefined;};};(dh("CentBetConsole"))(dg.get_Length());c$=dg;}catch(dl){dm=function(dn){return function(_do){var dp;dp="error when restoring "+x.prettyPrint(dn)+" - "+x.prettyPrint(_do);return y?y.log(dp):undefined;};};(dm("CentBetConsole"))(dl);dq=function(dr){return g.recordKey(dr);};ds=$.New(h,{$:0});c$=D.Create(dq,ds);}c_=c$;return c_;})},Coupon:{Render:function(){var dt,du,dv,dB,dC,dD,dH,dI;dt=l.Create(false);E.start(dt);dv=function(dw){var dx,dy,dz,dA;if(dw){dy=F["render\u0421oupon"]();dx=F.doc(dy);}else{dz=d.ofArray([c.TextNode("\u0414\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435.")]);dA=c.Element("h1",[],dz);dx=F.doc(dA);}return dx;};dB=dt.get_View();dC=q.Map(dv,dB);dD=function(dE){var dF,dG;if(dE.$==1){dG=dE.$0;dF=G.renderExploreMarkets(dG);}else{dF=c.get_Empty();}return dF;};dH=E.varMode().get_View();dI=q.Map(dD,dH);du=d.ofArray([c.EmbedView(dC),c.EmbedView(dI)]);return c.Concat(du);},SettingsDialog:{Helpers:{buttonDoc:function(dJ){var dK,dL,dP;dK=H.view();dL=function(dM){var dN,dO;if((dJ?dM===40:false)?true:!dJ?dM===10:false){dN=c.get_Empty();}else{dO=J.buttonElt(dJ,dM);dN=F.doc(dO);}return dN;};dP=q.Map(dL,dK);return c.EmbedView(dP);},buttonElt:function(dQ,dR){var d0;d0=dQ?"+":"-";return c.Element("button",d.ofArray([J.op_SpliceUntyped("w3-btn w3-teal"),j.Create("style","margin: 10px; width: 50px; height: 50px;"),i.Handler("click",function(){return function(){var dU,dV,dW,dX,dY,dZ;dU=[dQ,dR];if(dU[0]){if(dU[1]===40){dW=null;}else{dX=dR+(dQ?1:-1);dW=H.set(dX);}dV=dW;}else{if(dU[1]===10){dY=null;}else{dZ=dR+(dQ?1:-1);dY=H.set(dZ);}dV=dY;}return dV;};})]),d.ofArray([c.TextNode(d0)]));},close:function(){return n.Set(J.varVisible(),false);},content:$.Field(function(){var d1,d3,d4,d6;d1=K.titleAndCloseButton("\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0430\u0442\u0447\u0435\u0439 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435",function(){return J.close();});d4=function(d5){return $$.String(d5);};d6=H.view();d3=c.Element("div",d.ofArray([J.op_SpliceUntyped("w3-xxlarge"),j.Create("style","margin : 10px; float : left;")]),d.ofArray([c.TextView(q.Map(d4,d6))]));return d.ofArray([F.doc(d1),F.doc(d3),J.buttonDoc(true),J.buttonDoc(false)]);}),op_SpliceUntyped:function(d7){return j.Create("class",d7);},renderDialog:$.Field(function(){return K.createModal(J.varVisible().get_View(),function(){return J.close();});}),varVisible:$.Field(function(){return l.Create(false);})},elt:$.Field(function(){return(J.renderDialog())(J.content());}),show:function(){return n.Set(J.varVisible(),true);}},Work:$.Class({},{loop:function(d9){return m.Delay(function(){var d$;d$=m.Delay(function(){return m.Combine(m.While(function(){return d9.suspended.call(null,null);},m.Delay(function(){return m.Bind(m.Sleep(100),function(){return m.Return(null);});})),m.Delay(function(){return m.Bind(d9.work,function(){return m.Bind(m.Sleep(d9.sleepInterval),function(){return m.Return(null);});});}));});return m.Combine(m.TryWith(d$,function(eh){var ei,em;ei=function(ej){return function(ek){var el;el="task error "+x.prettyPrint(ej)+" : "+x.prettyPrint(ek);return y?y.log(el):undefined;};};em=d9.what;(ei(em))(eh);return m.Bind(m.Sleep(d9.sleepErrorInterval),function(){return m.Return(null);});}),m.Delay(function(){return L.loop(d9);}));});},"new":function(ep,eq,er,es,et){var eu;eu=$.New(L,{what:ep,sleepInterval:eq,sleepErrorInterval:er,work:et,suspended:es});return L.run(eu);},run:function(ev){var ew;ew=m.Delay(function(){var ey,eB;ey=function(ez){var eA;eA="task "+x.prettyPrint(ez)+" : started";return y?y.log(eA):undefined;};eB=ev.what;ey(eB);return m.Bind(L.loop(ev),function(){var eD,eG;eD=function(eE){var eF;eF="task "+x.prettyPrint(eE)+" : terminated";return y?y.log(eF):undefined;};eG=ev.what;eD(eG);return m.Return(null);});});return m.Start(ew,{$:0});}}),doc:function(eH){return eH;},renderMeetup:$.Field(function(){var eI,eJ,eK;eI=[E.varColumnGpbVisible().get_View(),E.varColumnCountryVisible().get_View()];eJ=eI[0];eK=eI[1];return function(eL){return M.renderMeetup(eJ,eK,eL);};}),renderPagination:$.Field(function(){var eM,eN,eO;eM=q.get_Do();eN=E.varPagesCount().get_View();eO=N.Bind(function(eP){var eQ;eQ=E.varCurrentPageNumber().get_View();return N.Bind(function(eR){var eS,eV,e8;eS=i.Handler("click",function(){return function(){return I.show();};});eV=p.toList(p.delay(function(){return p.append(p.map(function(eX){var eY,e4,e5;eY=p.toList(p.delay(function(){return p.append([j.Create("href","#")],p.delay(function(){return p.append([i.Handler("click",function(){return function(){return n.Set(E.varTargetPageNumber(),eX);};})],p.delay(function(){return eX===eR?[j.Create("class","w3-teal")]:p.empty();}));}));}));e5=$$.String(eX+1);e4=d.ofArray([c.Element("a",eY,d.ofArray([c.TextNode(e5)]))]);return c.Element("li",[],e4);},O.range(0,eP-1)),p.delay(function(){var e7;e7=d.ofArray([c.Element("a",d.ofArray([j.Create("href","#"),eS]),d.ofArray([c.TextNode("...")]))]);return[c.Element("li",[],e7)];}));}));e8=d.map(function(e9){return F.doc(e9);},eV);return N.Const(c.Concat(e8));},eQ);},eN);return c.EmbedView(eO);}),"render\u0421oupon":$.Field(function(){var e_,e$,fa,fb,fc,fd,fe,ff,fi,fl,fm,fn,fo,fp,fq;e_=d.ofArray([j.Create("class","w3-responsive")]);fa=d.ofArray([j.Create("class","w3-table w3-bordered w3-striped w3-hoverable")]);fb=d.ofArray([c.Element("tr",d.ofArray([i.Class("coupon-header-row w3-teal")]),M.renderGamesHeaderRow(E.varColumnGpbVisible().get_View()))]);fd=E.meetups().get_View();fe=F.renderMeetup();ff=function(fg){var fh;fh=fe(fg);return F.doc(fh);};fi=function(fj){var fk;fk=p.map(ff,fj);return c.Concat(fk);};fl=q.Map(fi,fd);fc=d.ofArray([c.EmbedView(fl)]);e$=d.ofArray([c.Element("table",fa,d.ofArray([c.Element("thead",[],fb),c.Element("tbody",[],fc)]))]);fm=c.Element("div",e_,e$);fn=d.ofArray([j.Create("class","w3-container")]);fo=q.get_Do();fp=E.varCurrentPageNumber().get_View();fq=N.Bind(function(fr){return N.Bind(function(fs){var ft,fu,fv,fw;if(fr===fs){fu=fm;}else{fw="\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043f\u0435\u0440\u0435\u0445\u043e\u0434 \u043a \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 \u2116 "+$$.String(fs+1)+"...";fv=d.ofArray([c.TextNode(fw)]);fu=c.Element("h1",[],fv);}ft=fu;return N.Const(F.doc(ft));},E.varTargetPageNumber().get_View());},fp);return c.Element("div",fn,d.ofArray([c.Element("div",d.ofArray([j.Create("class","w3-center")]),d.ofArray([c.Element("ul",d.ofArray([j.Create("class","w3-pagination w3-border w3-round")]),d.ofArray([F.renderPagination()]))])),c.EmbedView(fq),I.elt()]));})},Football:{EventCatalogue:$.Class({},{id:function(fx){return fx.gameId;}}),Meetup:$.Class({},{id:function(fy){return fy.game.gameId;}})},GameDetail:{Helpers:{renderContent:function(fz){var fA,fB;fA=q.get_Do();fB=N.Bind(function(fC){var fD,fE;if(fC.$==1){fE=fC.$0;fD=N.Const(c.TextNode(fE.marketName));}else{fD=N.Const(P.renderMeetupMarkets(fz.Meetup,fz.Market));}return fD;},fz.Market.get_View());return c.EmbedView(fB);},renderDialog:$.Field(function(){var fF,fH,fJ,fK;fF=function(){if(y){y.log("back to coupon");}return n.Set(E.varMode(),{$:0});};fH=function(fI){return fI.$==1?true:false;};fJ=E.varMode().get_View();fK=q.Map(fH,fJ);return K.createModal(fK,fF);}),renderGameInfo:function(fL,fM,fN,fO){return c.Element("div",d.ofArray([G.op_SpliceUntyped("w3-row header-content-football")]),d.ofArray([c.Element("div",d.ofArray([G.op_SpliceUntyped("w3-col s12")]),d.ofArray([P.renderGameTeams(fL,fM),P.renderGameScore(fN,fO)]))]));},renderGameScore:function(fP,fQ){var fR;fR=d.ofArray([G.op_SpliceUntyped("w3-row")]);return c.Element("div",fR,d.ofArray([c.Element("h5",d.ofArray([G.op_SpliceUntyped("w3-col s6"),j.Create("style","text-align: right; padding-right : 10px;")]),d.ofArray([c.TextView(fP)])),c.Element("h5",d.ofArray([G.op_SpliceUntyped("w3-col s6"),j.Create("style","text-align: left; color : #b4e500;")]),d.ofArray([c.TextView(fQ)]))]));},renderGameTeams:function(fS,fT){var fU;fU=d.ofArray([G.op_SpliceUntyped("w3-row")]);return c.Element("div",fU,d.ofArray([c.Element("h3",d.ofArray([G.op_SpliceUntyped("w3-col s5"),j.Create("style","text-align: right;")]),d.ofArray([c.TextNode(fS)])),c.Element("h2",d.ofArray([G.op_SpliceUntyped("w3-col s2"),j.Create("style","color : #b4e500; text-align: center;")]),d.ofArray([c.TextNode("V")])),c.Element("h3",d.ofArray([G.op_SpliceUntyped("w3-col s5"),j.Create("style","text-align: left;")]),d.ofArray([c.TextNode(fT)]))]));},renderMarketsList:function(fV,fW,fX){var fY;fY=d.ofArray([G.op_SpliceUntyped("w3-ul w3-hoverable")]);return c.Element("ul",fY,p.toList(p.delay(function(){return p.map(function(f0){var f1,f5,f6;f1=d.ofArray([j.Create("href","#"),i.Handler("click",function(){return function(){var f4;f4={$:1,$0:f0};return n.Set(fV,f4);};})]);f5=d.ofArray([c.Element("a",f1,d.ofArray([c.TextNode(f0.marketName)]))]);f6=c.Element("li",[],f5);return G.doc(f6);},fX);})));},renderMeetupMarkets:function(f7,f8){var f9,ga,gb,gc,gd,ge,gf,gg,gh,gi,gj,gk,gl,gm,gn,go,gp,gq,gr,gs;f9=function(f_){var f$;f$=P.renderMarketsList(f8,f7,f_);return G.doc(f$);};ga=f7.game.gameId;gb=ga[0];gc=ga[1];gd=E.getMarkets(gb,gc);ge=(P.window(3))(gd);if(ge.$==1){if(ge.$1.$==1){if(ge.$1.$1.$==1){if(ge.$1.$1.$1.$==0){gj=ge.$0;gk=ge.$1.$0;gl=ge.$1.$1.$0;gm=d.ofArray([G.op_SpliceUntyped("w3-row w3-sand")]);gn=c.Element("div",gm,d.ofArray([c.Element("div",d.ofArray([G.op_SpliceUntyped("w3-col s4")]),d.ofArray([f9(gj)])),c.Element("div",d.ofArray([G.op_SpliceUntyped("w3-col s4")]),d.ofArray([f9(gk)])),c.Element("div",d.ofArray([G.op_SpliceUntyped("w3-col s4")]),d.ofArray([f9(gl)]))]));gi=G.doc(gn);}else{gi=c.get_Empty();}gh=gi;}else{go=ge.$0;gp=ge.$1.$0;gq=d.ofArray([G.op_SpliceUntyped("w3-row w3-sand")]);gr=c.Element("div",gq,d.ofArray([c.Element("div",d.ofArray([G.op_SpliceUntyped("w3-col s6")]),d.ofArray([f9(go)])),c.Element("div",d.ofArray([G.op_SpliceUntyped("w3-col s6")]),d.ofArray([f9(gp)]))]));gh=G.doc(gr);}gg=gh;}else{gs=ge.$0;gg=f9(gs);}gf=gg;}else{gf=c.get_Empty();}return gf;},window:function(gt){var gu,gx,gz;gu=function(gv){return function(gw){return[gv%gt,gw];};};gx=function(gy){return gy[0];};gz=function(gA){var gB,gC;gA[0];gB=gA[1];gC=p.map(function(gD){return gD[1];},gB);return p.toList(gC);};return function(gE){var gF,gG,gH;gF=p.mapi(gu,gE);gG=t.groupBy(gx,gF);gH=p.map(gz,gG);return p.toList(gH);};}},doc:function(gI){return gI;},op_SpliceUntyped:function(gJ){return j.Create("class",gJ);},renderExploreMarkets:function(gK){var gL;gL=gK.Meetup;return(P.renderDialog())(d.ofArray([P.renderGameInfo(gL.game.home,gL.game.away,gL.status.get_View(),gL.summary.get_View()),P.renderContent(gK)]));},varError:$.Field(function(){return l.Create(false);})},Games:{Helpers1:{addNewGames:function(gM,gN,gO,gP){var gQ,gR,gS,g_,ha,hc,hd,he;gQ=n.Get(E.meetups().Var);gR=p.toList(gQ);E.meetups().Clear();gS=function(gT){var gU,gV,gW,gX,gY,gZ,g0,g1,g2,g3,g4,g5,g6,g7,g8,g9;gU=gT[0];gV=gT[1];gW=gT[2];gX=gM(gU.gameId);gY=gN(gU.gameId);gZ=l.Create(gV.playMinute);g0=l.Create(gV.status);g1=l.Create(gV.summary);g2=l.Create(gV.order);g3=l.Create(gV.winBack);g4=l.Create(gV.winLay);g5=l.Create(gV.drawBack);g6=l.Create(gV.drawLay);g7=l.Create(gV.loseBack);g8=l.Create(gV.loseLay);g9=gO(gU.gameId);return $.New(R,{game:gU,playMinute:gZ,status:g0,summary:g1,order:g2,winBack:g3,winLay:g4,drawBack:g5,drawLay:g6,loseBack:g7,loseLay:g8,country:l.Create(gX),totalMatched:l.Create(g9),hash:gW});};g_=function(g$){return n.Get(g$.order);};ha=function(hb){return E.meetups().Add(hb);};hc=d.map(gS,gP);hd=p.append(gR,hc);he=p.sortBy(g_,hd);return p.iter(ha,he);},isCouponMode:function(){return w.Equals(n.Get(E.varMode()),{$:0});},notCouponMode:function(){var hf;hf=S.isCouponMode();return!hf;}},Helpers2:{eventsCatalogue:$.Field(function(){var hg,hh,hi,hj,hl,hm,hn,ho,hs,hu,hv;hg=T.checkTodayKey("CentBetEventsCatalogueCreated","CentBetEventsCatalogue");try{hj=function(hk){return U.id(hk);};hm=(B.get_Default().EncodeRecord(U,[["gameId",B.get_Default().EncodeTuple([C,C]),0],["country",C,1],["markets",B.get_Default().EncodeList(B.get_Default().EncodeRecord(undefined,[["marketId",C,0],["marketName",C,0],["totalMatched",C,1],["runners",B.get_Default().EncodeList(B.get_Default().EncodeRecord(undefined,[["selectionId",C,0],["runnerName",C,0]])),0]])),0]]))();hl=z.LocalStorage("CentBetEventsCatalogue",{Encode:hm,Decode:(B.get_Default().DecodeRecord(U,[["gameId",B.get_Default().DecodeTuple([C,C]),0],["country",C,1],["markets",B.get_Default().DecodeList(B.get_Default().DecodeRecord(undefined,[["marketId",C,0],["marketName",C,0],["totalMatched",C,1],["runners",B.get_Default().DecodeList(B.get_Default().DecodeRecord(undefined,[["selectionId",C,0],["runnerName",C,0]])),0]])),0]]))()});hi=D.CreateWithStorage(hj,hl);}catch(hn){ho=function(hp){return function(hq){var hr;hr="error when restoring "+x.prettyPrint(hp)+" - "+x.prettyPrint(hq);return y?y.log(hr):undefined;};};(ho("CentBetEventsCatalogue"))(hn);hs=function(ht){return U.id(ht);};hu=$.New(h,{$:0});hi=D.Create(hs,hu);}hh=hi;hv=function(hw){return function(hx){return function(hy){var hz;hz=x.prettyPrint(hw)+" - "+$$.String(hx)+", "+x.prettyPrint(hy);return y?y.log(hz):undefined;};};};((hv("CentBetEventsCatalogue"))(hh.get_Length()))(hg);return hh;}),tryGetEvent:function(hA,hB){var hC,hD,hG;hC=[hA,hB];hD=function(hE){var hF;hF=hE.gameId;return w.Equals(hC,hF);};hG=n.Get(V.eventsCatalogue().Var);return p.tryFind(hD,hG);},updateCurentCoupon:$.Field(function(){var hH;hH=function(hI){var hJ,hK,hL,hM,hO;hJ=hI[0];hK=hI[1];hL=hI[2];hM=function(hN){return[hN,hK,hL];};hO=E.meetups().TryFindByKey(hJ);return o.map(hM,hO);};return function(hP){var hQ;hQ=d.choose(hH,hP);return p.iter(function(hR){var hS,hT,hU;hS=hR[0];hT=hR[1];hU=hR[2];return E.updateGameInfo(hS,hT,hU);},hQ);};})},Helpers3:{Work:$.Class({},{loop:function(hV){return m.Delay(function(){var hX;hX=m.Delay(function(){return m.Bind(hV.work,function(){return m.Bind(m.Sleep(hV.sleepInterval),function(){return m.Return(null);});});});return m.Combine(m.TryWith(hX,function(h1){var h2,h6;h2=function(h3){return function(h4){var h5;h5="task error "+x.prettyPrint(h3)+" : "+x.prettyPrint(h4);return y?y.log(h5):undefined;};};h6=hV.what;(h2(h6))(h1);return m.Bind(m.Sleep(hV.sleepErrorInterval),function(){return m.Return(null);});}),m.Delay(function(){return X.loop(hV);}));});},"new":function(h9,h_,h$,ia){var ib;ib=$.New(X,{what:h9,sleepInterval:h_,sleepErrorInterval:h$,work:ia});return X.run(ib);},run:function(ic){var id;id=m.Delay(function(){var _if,ii;_if=function(ig){var ih;ih="task "+x.prettyPrint(ig)+" : started";return y?y.log(ih):undefined;};ii=ic.what;_if(ii);return m.Bind(X.loop(ic),function(){var ik,_in;ik=function(il){var im;im="task "+x.prettyPrint(il)+" : terminated";return y?y.log(im):undefined;};_in=ic.what;ik(_in);return m.Return(null);});});return m.Start(id,{$:0});}}),processCoupon:function(io){return m.Delay(function(){var iq,ir,it,iu,iv,iw,ix;if(S.notCouponMode()){iq=m.Return(null);}else{ir=function(is){return[is.game.gameId,is.hash];};it=n.Get(E.meetups().Var);iu=p.map(ir,it);iv=p.toList(iu);iw=H.get();ix=v.Async("WebFace:0",[iv,n.Get(E.varTargetPageNumber()),iw]);iq=m.Bind(ix,function(iy){var iz,iA,iB,iC,iD,iE,iF;iz=iy[1];iA=iy[2];iB=iy[0];iC=iy[3];iD=(iC/iw>>0)+(iC%iw===0?0:1);K.updateVarValue(E.varPagesCount(),iD);if(n.Get(E.varTargetPageNumber())>iD){n.Set(E.varTargetPageNumber(),0);iF=m.Return(null);}else{iF=m.Return(null);}iE=iF;return m.Combine(iE,m.Delay(function(){var iH,iI,iJ;iI=iB.$==0;if(!iI){S.addNewGames(function(iK){var iL,iM;iL=iK[0];iM=iK[1];return E.getCountry(iL,iM);},function(iN){var iO,iP;iO=iN[0];iP=iN[1];return E.getMarkets(iO,iP);},function(iQ){var iR,iS;iR=iQ[0];iS=iQ[1];return E.getLastTotalMatched(iR,iS);},iB);iJ=m.Return(null);}else{iJ=m.Return(null);}iH=iJ;return m.Combine(iH,m.Delay(function(){var iU,iV,iW,iX;iV=p.isEmpty(iA);if(!iV){iX=function(iY){return E.meetups().RemoveByKey(iY);};p.iter(iX,iA);iW=m.Return(null);}else{iW=m.Return(null);}iU=iW;return m.Combine(iU,m.Delay(function(){(V.updateCurentCoupon())(iz);E.updateColumnCountryVisible();E.updateColumnGpbVisible();K.updateVarValue(io,true);K.updateVarValue(E.varCurrentPageNumber(),n.Get(E.varTargetPageNumber()));return m.Return(null);}));}));}));});}return iq;});},processEvents:$.Field(function(){return m.Delay(function(){var i1,i2,i6,i7,i8,i9;if(S.notCouponMode()){i1=m.Return(null);}else{i2=function(i3){var i4,i5;if(i3[1].$==0){i5=i3[0];i4={$:1,$0:i5};}else{i4={$:0};}return i4;};i6=W.zipMeetupsWithEvents();i7=d.choose(i2,i6);if(i7.$==0?true:Y.hasNot()){i8=m.Return(null);}else{i9=v.Async("WebFace:4",[i7]);i8=m.Bind(i9,function(i_){var i$;i$=m.For(i_,function(ja){var jb,jc;ja[1];jb=ja[0];jc=ja[2];V.eventsCatalogue().Add($.New(U,{gameId:jb,country:jc,markets:$.New(h,{$:0})}));return m.Return(null);});return m.Combine(i$,m.Delay(function(){return m.Combine(m.For(n.Get(E.meetups().Var),function(je){var jf,jg,jh;jf=je.game.gameId;jg=jf[0];jh=jf[1];n.Set(je.country,E.getCountry(jg,jh));return m.Return(null);}),m.Delay(function(){E.updateColumnCountryVisible();return m.Return(null);}));}));});}i1=i8;}return i1;});}),processMarkets:$.Field(function(){return m.Delay(function(){var jk,jl,jq,jr;if(S.notCouponMode()){jk=m.Return(null);}else{jl=function(jm){var jn,jo,jp;if(jm[1].$==1){if(jm[1].$0.markets.$==0){jp=jm[0];jo={$:1,$0:jp};}else{jo={$:0};}jn=jo;}else{jn={$:0};}return jn;};jq=W.zipMeetupsWithEvents();jr=d.choose(jl,jq);jk=(jr.$==0?true:Y.hasNot())?m.Return(null):m.For(jr,function(js){var jt,ju,jv;if(S.notCouponMode()){jt=m.Return(null);}else{ju=js[0];jv=js[1];jt=m.Bind(v.Async("WebFace:5",[ju,jv]),function(jw){var jx,jy,jz,jA;if(jw.$==1){jy=jw.$0;jz=js[0];jA=js[1];W.setMarket(jz,jA,jy);jx=m.Return(null);}else{jx=m.Return(null);}return jx;});}return jt;});}return jk;});}),processTotalMatched:$.Field(function(){return m.Delay(function(){var jC,jD,jI,jJ;if(S.notCouponMode()){jC=m.Return(null);}else{jD=function(jE){var jF,jG,jH;if(jE[1].$==1){if(jE[1].$0.markets.$==1){jH=jE[0];jG={$:1,$0:jH};}else{jG={$:0};}jF=jG;}else{jF={$:0};}return jF;};jI=W.zipMeetupsWithEvents();jJ=d.choose(jD,jI);jC=(jJ.$==0?true:Y.hasNot())?m.Return(null):m.Combine(m.For(jJ,function(jK){var jL,jM,jN,jO;if(S.notCouponMode()){jL=m.Return(null);}else{jM=jK[0];jN=jK[1];jO=v.Async("WebFace:6",[jM,jN]);jL=m.Bind(jO,function(jP){var jQ,jR,jV,jW,jX;if(jP.get_IsEmpty()){jQ=m.Return(null);}else{jR=function(jS){return function(){return function(jU){return jS+jU;};};};jV=jK[0];jW=jK[1];jX=_0.Fold(jR,0,jP);E.updateTotalMatched(jV,jW,jX);jQ=m.Return(null);}return jQ;});}return jL;}),m.Delay(function(){E.updateColumnGpbVisible();return m.Return(null);}));}return jC;});}),setMarket:function(jZ,j0,j1){var j2,j3,j6,j9,j_,j$,ka,kb,kl,km;j2=[jZ,j0];j3=function(j4){var j5;j4[0];j4[1];j4[2];j5=j4[3];return j5;};j6=function(j7){return function(j8){return j7+j8;};};j9=j2[0];j_=j2[1];j$=d.choose(j3,j1);ka=p.fold(j6,0,j$);E.updateTotalMatched(j9,j_,ka);kb=function(kc){var kd,ke,kf,kg,kh;kd=kc[0];ke=kc[1];kf=kc[2];kg=kc[3];kh=function(ki){var kj,kk;kj=ki[0];kk=ki[1];return{selectionId:kk,runnerName:kj};};return{marketId:kd,marketName:ke,totalMatched:kg,runners:d.map(kh,kf)};};kl=d.map(kb,j1);km=function(kn){return{$:1,$0:$.New(U,{gameId:kn.gameId,country:kn.country,markets:kl})};};return V.eventsCatalogue().UpdateBy(km,j2);},zipMeetupsWithEvents:function(){var ko,kp,ku;ko=n.Get(E.meetups().Var);kp=function(kq){var kr,kt;kr=function(ks){return w.Equals(ks.gameId,kq.game.gameId);};kt=n.Get(V.eventsCatalogue().Var);return[kq.game.gameId,p.tryFind(kr,kt)];};ku=p.map(kp,ko);return p.toList(ku);}},PageLen:{get:function(){return H.validateValue(n.Get(H["var"]()));},localStorageKey:$.Field(function(){return"pageLen";}),set:function(kv){var kw,kx;kw=H.validateValue(kv);if(kw!==n.Get(H["var"]())){n.Set(H["var"](),kw);kx=T.set(H.localStorageKey(),kw);}else{kx=null;}return kx;},validateValue:function(ky){return ky<10?30:ky>40?40:ky;},"var":$.Field(function(){var kz,kA;kz=T.getWithDef(H.localStorageKey(),30);kA=H.validateValue(kz);return l.Create(kA);}),view:$.Field(function(){return H["var"]().get_View();})},ServerBetfairsSession:{check:$.Field(function(){return m.Delay(function(){return m.Bind(v.Async("WebFace:3",[]),function(kC){Y.hasServerBetfairsSession=function(){return kC;};return m.Return(null);});});}),has:function(){return Y.hasServerBetfairsSession();},hasNot:function(){return!Y.hasServerBetfairsSession();},hasServerBetfairsSession:$.Field(function(){return true;})},getCountry:function(kD,kE){var kF,kG,kH,kI,kJ,kK,kL;kF=[kD,kE];kG=kF[0];kH=kF[1];kI=V.tryGetEvent(kG,kH);if(kI.$==1){if(kI.$0.country.$==1){kL=kI.$0.country.$0;kK=kL;}else{kK="";}kJ=kK;}else{kJ="";}return kJ;},getLastTotalMatched:function(kM,kN){var kO,kP,kX;kO=[kM,kN];kP=function(kQ){var kR,kT,kU,kV,kW;kR=function(kS){return kS.totalMatched;};kT=kQ.markets;kU=d.choose(kR,kT);if(kU.$==0){kV={$:0};}else{kW=p.sum(kU);kV={$:1,$0:kW};}return kV;};kX=V.eventsCatalogue().TryFindByKey(kO);return o.bind(kP,kX);},getMarkets:function(kY,kZ){var k0,k1,k2,k3,k4,k5,k6;k0=[kY,kZ];k1=k0[0];k2=k0[1];k3=V.tryGetEvent(k1,k2);if(k3.$==1){if(k3.$0.markets.$==1){k6=k3.$0.markets;k5=k6;}else{k5=$.New(h,{$:0});}k4=k5;}else{k4=$.New(h,{$:0});}return k4;},meetups:$.Field(function(){var k7,k9;k7=function(k8){return R.id(k8);};k9=$.New(h,{$:0});return D.Create(k7,k9);}),processGameDetail:$.Field(function(){return m.Delay(function(){var k$,la,lb,lc,ld,le,lf;k$=n.Get(E.varMode());if(k$.$==1){lb=k$.$0;lc=lb.Meetup.game.gameId;ld=lc[0];le=lc[1];lf=v.Async("WebFace:1",[ld,le]);la=m.Bind(lf,function(lg){var lh,li,lj,lk,ll;lh=E.varGameDetailError();li=lg.$==0;n.Set(lh,li);if(lg.$==1){lk=lg.$0[0];ll=lg.$0[1];E.updateGameInfo(lb.Meetup,lk,ll);lj=m.Return(null);}else{lj=m.Return(null);}return lj;});}else{la=m.Return(null);}return la;});}),start:function(lm){var ln;ln=function(lo,lp){var lq,lr,ls;lq=lo[0];lr=lo[1];ls=lo[2];return X["new"](lq,lr,ls,lp);};ln(["COUPON",0,0],W.processCoupon(lm));ln(["CHECK-SERVER-BETFAIRS-SESSION",0,0],Y.check());ln(["EVENTS-CATALOGUE",0,0],W.processEvents());ln(["MARKETS-CATALOGUE",0,0],W.processMarkets());ln(["TOTAL-MATCHED",0,0],W.processTotalMatched());return ln(["GAME-DETAIL",0,0],E.processGameDetail());},updateColumnCountryVisible:function(){var lt,lv,lw;lt=function(lu){return n.Get(lu.country)!=="";};lv=n.Get(E.meetups().Var);lw=p.exists(lt,lv);return!w.Equals(n.Get(E.varColumnCountryVisible()),lw)?n.Set(E.varColumnCountryVisible(),lw):null;},updateColumnGpbVisible:function(){var lx,lz,lA;lx=function(ly){return n.Get(ly.totalMatched).$==1;};lz=n.Get(E.meetups().Var);lA=p.exists(lx,lz);return!w.Equals(n.Get(E.varColumnGpbVisible()),lA)?n.Set(E.varColumnGpbVisible(),lA):null;},updateGameInfo:function(lB,lC,lD){lB.hash=lD;K.updateVarValue(lB.playMinute,lC.playMinute);K.updateVarValue(lB.status,lC.status);K.updateVarValue(lB.summary,lC.summary);K.updateVarValue(lB.order,lC.order);K.updateVarValue(lB.winBack,lC.winBack);K.updateVarValue(lB.winLay,lC.winLay);K.updateVarValue(lB.drawBack,lC.drawBack);K.updateVarValue(lB.drawLay,lC.drawLay);K.updateVarValue(lB.loseBack,lC.loseBack);return K.updateVarValue(lB.loseLay,lC.loseLay);},updateTotalMatched:function(lE,lF,lG){var lH,lI,lJ,lK;lH=[lE,lF];lI=E.meetups().TryFindByKey(lH);if(lI.$==1){lK=lI.$0;lJ=K.updateVarValue(lK.totalMatched,{$:1,$0:lG});}else{lJ=null;}return lJ;},varColumnCountryVisible:$.Field(function(){return l.Create(false);}),varColumnGpbVisible:$.Field(function(){return l.Create(false);}),varCurrentPageNumber:$.Field(function(){return l.Create(0);}),varGameDetailError:$.Field(function(){return l.Create(false);}),varMode:$.Field(function(){return l.Create({$:0});}),varPagesCount:$.Field(function(){return l.Create(1);}),varTargetPageNumber:$.Field(function(){return l.Create(0);})},Meetup:{doc:function(lL){return lL;},renderGamesHeaderRow:function(lM){return p.toList(p.delay(function(){var lO,lP,lQ,lR,lS,lT;lP=d.ofArray([c.TextNode("\u2116")]);lQ=d.ofArray([c.TextNode("\u0414\u043e\u043c\u0430")]);lR=$.New(h,{$:0});lS=d.ofArray([c.TextNode("\u0412 \u0433\u043e\u0441\u0442\u044f\u0445")]);lT=$.New(h,{$:0});lO=d.ofArray([c.Element("th",[],lP),c.Element("th",[],lQ),c.Element("th",[],lR),c.Element("th",[],lS),c.Element("th",[],lT),c.Element("th",d.ofArray([j.Create("colspan","2")]),d.ofArray([c.TextNode("\u041f\u043e\u0431\u0435\u0434\u0430")])),c.Element("th",d.ofArray([j.Create("colspan","2")]),d.ofArray([c.TextNode("\u041d\u0438\u0447\u044c\u044f")])),c.Element("th",d.ofArray([j.Create("colspan","2")]),d.ofArray([c.TextNode("\u041f\u043e\u0440\u0430\u0436\u0435\u043d\u0438\u0435")]))]);return p.append(d.map(function(lU){return M.doc(lU);},lO),p.delay(function(){var lW,l1;lW=function(lX){var lY,lZ,l0;if(lX){lZ=d.ofArray([c.TextNode("GPB")]);l0=c.Element("th",[],lZ);lY=M.doc(l0);}else{lY=c.get_Empty();}return lY;};l1=q.Map(lW,lM);return p.append([c.EmbedView(l1)],p.delay(function(){var l3,l4;l3=$.New(h,{$:0});l4=c.Element("th",[],l3);return[M.doc(l4)];}));}));}));},renderMeetup:function(l5,l6,l7){var l8,mh,mi,mj,mm,mp,mq,mr,mv,mw,mx,my,mz,mA,mB,mQ,mR,mS,mV,m4,m5,m8,na;l8=function(l9){return function(l_){return function(l$){var ma,mb,mc,md,mf,mg;mb=l9?"back":"lay";mc="kef "+x.toSafe(l_)+" "+x.toSafe(mb);md=function(me){return K.formatDecimalOption(me);};mf=l$.get_View();mg=q.Map(md,mf);ma=c.Element("td",d.ofArray([j.Create("class",mc)]),d.ofArray([c.TextView(mg)]));return M.doc(ma);};};};mh=l8(true);mi=l8(false);mj=i.Handler("click",function(){return function(){return n.Set(E.varMode(),{$:1,$0:{Meetup:l7,Market:l.Create({$:0})}});};});mm=function(mn){var mo;mo=c.Element("a",d.ofArray([j.Create("href","#"),mj]),d.ofArray([c.TextNode(mn)]));return M.doc(mo);};mr=function(ms){var mt,mu;mt=ms[0];mu=ms[1];return $$.String(mt)+"."+$$.String(mu);};mv=l7.order.get_View();mw=q.Map(mr,mv);mq=d.ofArray([c.TextView(mw)]);mx=c.Element("td",[],mq);my=c.Element("td",d.ofArray([j.Create("class","home-team")]),d.ofArray([mm(l7.game.home)]));mz=q.get_Do();mA=l7.playMinute.get_View();mB=N.Bind(function(mC){var mD;mD=l7.summary.get_View();return N.Bind(function(mE){var mF,mG,mH,mI,mJ,mK,mL,mM,mN,mO,mP;if(mC.$==1){if(mE!==""){mH=c.Element("td",d.ofArray([j.Create("class","game-status")]),d.ofArray([c.TextNode(mE)]));mG=M.doc(mH);}else{if(mE!==""){mJ=c.Element("td",d.ofArray([j.Create("class","game-status")]),d.ofArray([c.TextNode(mE)]));mI=M.doc(mJ);}else{mK=$.New(h,{$:0});mL=c.Element("td",[],mK);mI=M.doc(mL);}mG=mI;}mF=mG;}else{if(mE!==""){mN=c.Element("td",d.ofArray([j.Create("class","game-status")]),d.ofArray([c.TextNode(mE)]));mM=M.doc(mN);}else{mO=$.New(h,{$:0});mP=c.Element("td",[],mO);mM=M.doc(mP);}mF=mM;}return N.Const(mF);},mD);},mA);mQ=c.Element("td",d.ofArray([j.Create("class","away-team")]),d.ofArray([mm(l7.game.away)]));mR=c.Element("td",d.ofArray([j.Create("class","game-status")]),d.ofArray([c.TextView(l7.status.get_View())]));q.get_Do();mS=N.Bind(function(mT){return N.Bind(function(mU){return N.Const([mT,mU]);},l5);},l7.totalMatched.get_View());mV=function(mW){var mX,mY,mZ,m0,m1,m2,m3;if(mW[1]){if(mW[0].$==1){mZ=mW[0].$0;m1=$$.String(mZ);m0=c.Element("td",d.ofArray([j.Create("class","game-gpb")]),d.ofArray([c.TextNode(m1)]));mY=M.doc(m0);}else{m2=$.New(h,{$:0});m3=c.Element("td",[],m2);mY=M.doc(m3);}mX=mY;}else{mX=c.get_Empty();}return mX;};m4=q.Map(mV,mS);q.get_Do();m5=N.Bind(function(m6){return N.Bind(function(m7){return N.Const([m6,m7]);},l6);},l7.country.get_View());m8=function(m9){var m_,m$;if(m9[1]){m9[0];m$=c.Element("td",d.ofArray([j.Create("class","game-country")]),d.ofArray([c.TextView(l7.country.get_View())]));m_=M.doc(m$);}else{m_=c.get_Empty();}return m_;};na=q.Map(m8,m5);mp=d.ofArray([M.doc(mx),M.doc(my),c.EmbedView(mB),M.doc(mQ),M.doc(mR),(mh("win"))(l7.winBack),(mi("win"))(l7.winLay),(mh("draw"))(l7.drawBack),(mi("draw"))(l7.drawLay),(mh("lose"))(l7.loseBack),(mi("lose"))(l7.loseLay),c.EmbedView(m4),c.EmbedView(na)]);return c.Element("tr",[],mp);}},Utils:{Left:function(nb){return{$:0,$0:nb};},LocalStorage:{checkTodayKey:function(nc,nd){var ne,nf,ng,nh;ne=_1.now();nf=T.getWithDef(nc,ne);if(ne-nf>1*86400000){T.clear(nd);T.set(nc,_1.now());nh=function(ni){return function(nj){var nk;nk="local storage "+x.prettyPrint(ni)+" of "+x.prettyPrint(nj)+" is inspired";return y?y.log(nk):undefined;};};(nh(nd))(nf);ng=ne;}else{ng=nf;}return ng;},clear:function(nl){return T.strg().removeItem(nl);},get:function(nm){var nn,no,np,nq,nr;try{no=T.strg().getItem(nm);np=_2.parse(no);nn={$:1,$0:np};}catch(nq){nr=function(ns){return function(nt){var nu;nu="error getting from local storage, key "+x.prettyPrint(ns)+" : "+x.prettyPrint(nt);return y?y.log(nu):undefined;};};(nr(nm))(nq);nn={$:0};}return nn;},getWithDef:function(nv,nw){var nx,ny,nz;nx=T.get(nv);if(nx.$==1){nz=nx.$0;ny=nz;}else{ny=nw;}return ny;},set:function(nA,nB){var nC,nD,nE,nF;try{nD=_2.stringify(nB);nC=T.strg().setItem(nA,nD);}catch(nE){nF=function(nG){return function(nH){return function(nI){return O.FailWith("error setting to local storage, key "+x.prettyPrint(nG)+", value "+x.prettyPrint(nH)+" : "+x.prettyPrint(nI));};};};nC=((nF(nA))(nB))(nE);}return nC;},strg:$.Field(function(){return _3.localStorage;})},Right:function(nJ){return{$:1,$0:nJ};},createModal:function(nK,nL){var nM,nO,nQ,nS;nM=function(nN){return nN;};nO=function(nP){return j.Create("class",nP);};(K.initializeModalVar())(nL);nQ=function(nR){return nM(c.Element("div",d.ofArray([nO("w3-modal"),j.Create("style","display : block;")]),d.ofArray([c.Element("div",d.ofArray([nO("w3-modal-content w3-animate-zoom w3-card-8")]),nR)])));};nS=function(nT){var nU,nW;nU=function(nV){return nV?nQ(nT):c.get_Empty();};nW=q.Map(nU,nK);return c.EmbedView(nW);};return nS;},dateTimeToString:function($s){var $0=this,$this=this;return $$.dateTimeToString($s);},formatDecimal:function(nX){return K.trimEnd(nX.toFixed(6),d.ofArray([48,46]));},formatDecimalOption:function(nY){var nZ,n0;if(nY.$==1){n0=nY.$0;nZ=K.formatDecimal(n0);}else{nZ="";}return nZ;},getDatePart:function(n1){var n2;n2=new _1(n1.getTime());n2.setHours(0,0,0,0);return n2;},initializeModalVar:$.Field(function(){var n3,n4;n3=[$.New(h,{$:0})];n4=function(n5){var n6,n7,n9;if(n5.target.className==="w3-modal"){n7=function(n8){return n8(null);};n9=n3[0];n6=p.iter(n7,n9);}else{n6=null;}return n6;};_3.addEventListener("click",n4,false);return function(n_){n3[0]=$.New(h,{$:1,$0:n_,$1:n3[0]});};}),mkids:function(n$,oa){var ob,od,oe,of,og;ob=function(oc){return[oa(oc),oc];};od=d.map(ob,n$);oe=_0.OfArray(p.toArray(od));of=d.map(oa,n$);og=_4.New1(_5.OfSeq(of));return[og,oe];},titleAndCloseButton:function(oh,oi){var oj,ol;oj=function(ok){return j.Create("class",ok);};ol=d.ofArray([oj("w3-row w3-teal")]);return c.Element("header",ol,d.ofArray([c.Element("h4",d.ofArray([oj("w3-col s11 w3-center"),j.Create("style","padding-left : 10px;")]),d.ofArray([c.TextNode(oh)])),c.Element("div",d.ofArray([oj("w3-col s1 w3-center")]),d.ofArray([c.Element("span",d.ofArray([oj("w3-closebtn"),j.Create("style","padding-right : 5px;"),i.Handler("click",function(){return function(){return oi(null);};})]),d.ofArray([c.TextNode("×")]))]))]));},trimEnd:function(oo,op){var oq,or,os,ot,ou,ov,ow,ox,oy,oz,oA,oB;oq=[oo,op];if(oq[0]===""){or="";}else{if(oq[1].$==1){ot=oq[0];oq[1];ou=oq[1].$0;if(ot.charCodeAt(ot.length-1)===ou){oq[1].$0;ow=oq[1];ox=oq[0];ov=K.trimEnd(_6.string(ox,{$:0},{$:1,$0:ox.length-2}),ow);}else{if(oq[1].$==1){oz=oq[0];oA=oq[1].$1;oy=K.trimEnd(oz,oA);}else{oy=O.Raise(_7.New("E:\\User\\Docs\\Visual Studio 2015\\Projects\\CentBet\\CentBet\\WebFace\\ClientUtils.fs",8,18));}ov=oy;}os=ov;}else{oB=oq[0];os=oB;}or=os;}return or;},updateVarValue:function(oC,oD){return!w.Equals(n.Get(oC),oD)?n.Set(oC,oD):null;},"|Left|Right|":function(oE){var oF,oG,oH;if(oE.$==1){oG=oE.$0;oF={$:1,$0:oG};}else{oH=oE.$0;oF={$:0,$0:oH};}return oF;}}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.UI);b=$.Safe(a.Next);c=$.Safe(b.Doc);d=$.Safe($$.WebSharper.List);e=$.Safe($$.CentBet);f=$.Safe(e.Client);g=$.Safe(f.Admin);h=$.Safe(d.T);i=$.Safe(b.AttrModule);j=$.Safe(b.AttrProxy);k=$.Safe(b.Key);l=$.Safe(b.Var);m=$.Safe($$.WebSharper.Concurrency);n=$.Safe(b.Var1);o=$.Safe($$.WebSharper.Option);p=$.Safe($$.WebSharper.Seq);q=$.Safe(b.View);r=$.Safe(g.RecordType);s=$.Safe($$.WebSharper.Strings);t=$.Safe($$.Seq);u=$.Safe($$.WebSharper.Remoting);v=$.Safe(u.AjaxRemotingProvider);w=$.Safe($$.WebSharper.Unchecked);x=$.Safe($$.WebSharper.PrintfHelpers);y=$.Safe($$.console);z=$.Safe(b.Storage1);A=$.Safe($$.WebSharper.Json);B=$.Safe(A.Provider);C=$.Safe(B.Id);D=$.Safe(b.ListModel);E=$.Safe(f.Games);F=$.Safe(f.Coupon);G=$.Safe(f.GameDetail);H=$.Safe(E.PageLen);I=$.Safe(F.SettingsDialog);J=$.Safe(I.Helpers);K=$.Safe(f.Utils);L=$.Safe(F.Work);M=$.Safe(f.Meetup);N=$.Safe(b.View1);O=$.Safe($$.WebSharper.Operators);P=$.Safe(G.Helpers);Q=$.Safe(f.Football);R=$.Safe(Q.Meetup);S=$.Safe(E.Helpers1);T=$.Safe(K.LocalStorage);U=$.Safe(Q.EventCatalogue);V=$.Safe(E.Helpers2);W=$.Safe(E.Helpers3);X=$.Safe(W.Work);Y=$.Safe(E.ServerBetfairsSession);Z=$.Safe($$.WebSharper.Collections);_0=$.Safe(Z.MapModule);_1=$.Safe($$.Date);_2=$.Safe($$.JSON);_3=$.Safe($$.window);_4=$.Safe(Z.FSharpSet);_5=$.Safe(Z.BalancedTree);_6=$.Safe($$.WebSharper.Slice);return _7=$.Safe($$.WebSharper.MatchFailureException);});$.OnLoad(function(){K.initializeModalVar();T.strg();E.varTargetPageNumber();E.varPagesCount();E.varMode();E.varGameDetailError();E.varCurrentPageNumber();E.varColumnGpbVisible();E.varColumnCountryVisible();E.processGameDetail();E.meetups();Y.hasServerBetfairsSession();Y.check();H.view();H["var"]();H.localStorageKey();W.processTotalMatched();W.processMarkets();W.processEvents();V.updateCurentCoupon();V.eventsCatalogue();G.varError();P.renderDialog();F["render\u0421oupon"]();F.renderPagination();F.renderMeetup();I.elt();J.varVisible();J.renderDialog();J.content();g.varConsole();g.varCommandsHistory();g.varCmd();g.renderRecord();g.op_SpliceUntyped();g["cmd-input"]();return;});}());
