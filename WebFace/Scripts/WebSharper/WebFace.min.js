(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S;$.Define($$,{CentBet:{Client:{Admin:{Level:$.Class({},{get_color:function(){return function(T){return T.$==1?["lightgrey","red"]:T.$==2?["lightgrey","green"]:["white","navy"];};}}),LocalStorage:$.Class({Get:function(U){var V,W,X,Y,Z;try{W=this.strg.getItem(U);X=a.parse(W);V={$:0,$0:X};}catch(Y){Z=this.strg;V={$:1,$0:"local storage get item "+b.prettyPrint(U)+" error : "+b.prettyPrint(Y)+", storage "+b.prettyPrint(Z)};}return V;},Set:function(_0,_1){var _2,_3,_4,_5;try{_3=a.stringify(_1);_2={$:0,$0:this.strg.setItem(_0,_3)};}catch(_4){_5=this.strg;_2={$:1,$0:"local storage set item "+b.prettyPrint(_0)+" error : "+b.prettyPrint(_4)+", value "+b.prettyPrint(_1)+", storage "+b.prettyPrint(_5)};}return _2;}},{New:function(){var _7;_7=$.New(this,{});_7.strg=c.localStorage;return _7;}}),Render:function(){var _8;_8=$.New(k,{$:0});return f.Concat(g.ofArray([j.RenderCommandPrompt(),(j.op_SpliceUntyped())(f.Element("br",[],_8)),j.RenderRecords()]));},RenderCommandPrompt:function(){var _9;_9=g.ofArray([(j.op_SpliceUntyped())(f.Element("span",g.ofArray([l.Style("margin-left","10px")]),$.New(k,{$:0}))),(j.op_SpliceUntyped())(f.Element("label",g.ofArray([m.Create("for",j["cmd-input"]())]),g.ofArray([f.TextNode("Input here:")]))),j.renderInput()]);return f.Concat(_9);},RenderMenu:function(){var _,bb,bj;_=function(ba){return ba;};bb=g.ofArray([f.Element("a",n.toList(n.delay(function(){return n.append([m.Create("href","#")],n.delay(function(){return[l.Handler("click",function(){return function(){return j.varConsole().Clear();};})];}));})),g.ofArray([f.TextNode("Clear console")])),f.Element("a",n.toList(n.delay(function(){return n.append([m.Create("href","#")],n.delay(function(){return[l.Handler("click",function(){return function(){return j.varCommandsHistory().Clear();};})];}));})),g.ofArray([f.TextNode("Clear history")]))]);bj=g.map(_,bb);return f.Concat(bj);},RenderRecords:function(){var bk,bo;bk=function(bl){var bm,bn;bn=$.New(k,{$:0});bm=g.ofArray([(j.renderRecord())(bl),(j.op_SpliceUntyped())(f.Element("br",[],bn))]);return f.Concat(bm);};bo=j.varConsole().get_View();return f.ConvertSeq(bk,bo);},addRecord:function(bp,bq){return j.varConsole().Add({Id:o.Fresh(),Text:bq,Level:bp});},"cmd-input":$.Field(function(){return"cmd-input";}),cmdKey:function(br){return br.Id;},doc:function(bs){return bs;},op_SpliceUntyped:$.Field(function(){return function(bt){return j.doc(bt);};}),recordKey:function(bu){return bu.Id;},renderInput:function(){var bv,bw,bx,by,bB,bE,bI,bJ,bX;bv=p.Create("");bw=p.Create(null);bx=p.Create(false);by=q.Delay(function(){r.Set(bx,true);return q.Bind(j.send(r.Get(bv)),function(){r.Set(bx,false);r.Set(bv,"");return q.Return(null);});});bB=function(bC){var bD;bD={$:1,$0:bC};j.varCmd=function(){return bD;};return r.Set(bv,bC.Text);};bE=function(bF){var bG,bH;bG=j.tryGetCommandFromHistory(bF);bH=s.map(bB,bG);return;};bI=bx.get_View();bJ=function(bK){var bL;bL=g.ofArray([f.Input(n.toList(n.delay(function(){return n.append([m.Create("id",j["cmd-input"]())],n.delay(function(){return n.append(bK?[m.Create("disabled","disabled")]:n.empty(),n.delay(function(){return n.append([l.Style("width","80%")],n.delay(function(){return n.append([l.CustomVar(bw,function(bQ){return function(){return bQ.focus();};},function(){return{$:0};})],n.delay(function(){return[l.Handler("keydown",function(){return function(bV){var bW;bW=bV.keyCode;return bW===13?q.Start(by,{$:0}):bW===38?bE(true):bW===40?bE(false):null;};})];}));}));}));}));})),bv)]);return f.Concat(bL);};bX=t.Map(bJ,bI);return f.EmbedView(bX);},renderRecord:$.Field(function(){var bY;bY=function(bZ){var b0,b1,b2;b0=(u.get_color())(bZ.Level);b1=b0[1];b2=b0[0];return(j.op_SpliceUntyped())(f.Element("span",g.ofArray([l.Style("color",b1),l.Style("background",b2)]),g.ofArray([f.TextNode(bZ.Text)])));};return function(b3){var b4;b4=t.Map(bY,b3);return f.EmbedView(b4);};}),send:function(b5){return q.Delay(function(){var b7,b8,b9,b_,b$,ca;b7=v.Trim(b5);j.addRecord($.New(u,{$:2}),b7);b9=r.Get(j.varCommandsHistory().Var);if(n.isEmpty(b9)){b_=true;}else{b$=w.last(b9);b_=b$.Text!==b7;}if(b_){j.varCommandsHistory().Add({Id:o.Fresh(),Text:b7});ca=q.Return(null);}else{ca=q.Return(null);}b8=ca;return q.Combine(b8,q.Delay(function(){return q.TryWith(q.Delay(function(){return q.Bind(y.Async("WebFace:1",[b7]),function(cd){var ce;cd[0];ce=cd[1];j.addRecord($.New(u,{$:0}),ce);return q.Return(null);});}),function(cf){j.addRecord($.New(u,{$:1}),cf.message);return q.Return(null);});}));});},tryGetCommandFromHistory:function(cg){var ch,ci,cj,ck,cl,cm,cn,cq,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS;ch=r.Get(j.varCommandsHistory().Var);ci=n.length(ch);if(ci===0){cj={$:0};}else{if(j.varCmd().$==1){cm=j.varCmd().$0.Id;cn=function(co){return function(cp){return[cp,co];};};cq=function(cr){var cs,ct;cs=cr[0];cr[1];ct=cs.Id;return z.Equals(ct,cm);};cu=r.Get(j.varCommandsHistory().Var);cv=n.mapi(cn,cu);cw=n.tryFind(cq,cv);cx=[cw,cg];if(cx[0].$==1){if(cx[1]){cx[0].$0[0];cA=cx[0].$0[1];if(ci>0?cA<ci-1:false){cC=cx[0].$0[1];cx[0].$0[0];cB=cC+1;}else{if(cx[0].$==1){if(cx[1]){cE=cx[1]?ci-1:0;}else{cx[0].$0[0];cF=cx[0].$0[1];if(ci>0?cF>0:false){cH=cx[0].$0[1];cx[0].$0[0];cG=cH-1;}else{cG=cx[1]?ci-1:0;}cE=cG;}cD=cE;}else{cD=cx[1]?ci-1:0;}cB=cD;}cz=cB;}else{if(cx[0].$==1){if(cx[1]){cJ=cx[1]?ci-1:0;}else{cx[0].$0[0];cK=cx[0].$0[1];if(ci>0?cK>0:false){cM=cx[0].$0[1];cx[0].$0[0];cL=cM-1;}else{cL=cx[1]?ci-1:0;}cJ=cL;}cI=cJ;}else{cI=cx[1]?ci-1:0;}cz=cI;}cy=cz;}else{if(cx[0].$==1){if(cx[1]){cO=cx[1]?ci-1:0;}else{cx[0].$0[0];cP=cx[0].$0[1];if(ci>0?cP>0:false){cR=cx[0].$0[1];cx[0].$0[0];cQ=cR-1;}else{cQ=cx[1]?ci-1:0;}cO=cQ;}cN=cO;}else{cN=cx[1]?ci-1:0;}cy=cN;}cl=cy;}else{cl=ci-1;}ck=cl;cS=n.nth(ck,ch);cj={$:1,$0:cS};}return cj;},varCmd:$.Field(function(){return{$:0};}),varCommandsHistory:$.Field(function(){var cT,cV;cT=function(cU){return j.cmdKey(cU);};cV=A.LocalStorage("CentBetConsoleCommandsHistory",{Encode:(C.get_Default().EncodeRecord(undefined,[["Id",C.get_Default().EncodeUnion(o,"$",[[0,[["$0","Item",D,0]]]]),0],["Text",D,0]]))(),Decode:(C.get_Default().DecodeRecord(undefined,[["Id",C.get_Default().DecodeUnion(o,"$",[[0,[["$0","Item",D,0]]]]),0],["Text",D,0]]))()});return E.CreateWithStorage(cT,cV);}),varConsole:$.Field(function(){var cW,cY;cW=function(cX){return j.recordKey(cX);};cY=A.LocalStorage("CentBetConsole",{Encode:(C.get_Default().EncodeRecord(undefined,[["Id",C.get_Default().EncodeUnion(o,"$",[[0,[["$0","Item",D,0]]]]),0],["Text",D,0],["Level",C.get_Default().EncodeUnion(u,"$",[[0,[]],[1,[]],[2,[]]]),0]]))(),Decode:(C.get_Default().DecodeRecord(undefined,[["Id",C.get_Default().DecodeUnion(o,"$",[[0,[["$0","Item",D,0]]]]),0],["Text",D,0],["Level",C.get_Default().DecodeUnion(u,"$",[[0,[]],[1,[]],[2,[]]]),0]]))()});return E.CreateWithStorage(cW,cY);})},Coupon:{Event:$.Class({},{id:function(cZ){return cZ.gameId;}}),Meetup:$.Class({},{id:function(c0){return c0.game.gameId;},inplay:function(c1){return r.Get(c1.gameInfo).playMinute.$==1;},notinplay:function(c2){return r.Get(c2.gameInfo).playMinute.$==0;},viewGameInfo:function(c3){return c3.gameInfo.get_View();}}),Render:function(){var c4,de,df,dg,dq,dz;c4=q.Delay(function(){return q.While(function(){return true;},q.Delay(function(){return q.TryWith(q.Delay(function(){return q.Bind(F.processCoupon(),function(){return q.Bind(F.processEvents(),function(){return q.Return(null);});});}),function(c$){var da;da=function(db){var dc;dc="error updating coupon : "+b.prettyPrint(db);return G?G.log(dc):undefined;};da(c$);return q.Bind(q.Sleep(5000),function(){return q.Return(null);});});}));});q.Start(c4,{$:0});de=t.get_Do();df=F.varInplayOnly().get_View();dg=H.Bind(function(dh){return H.Bind(function(di){var dj,dk,dl,dn,_do,dp;dj=n.isEmpty(di);dk=!dj;dl=function(dm){return I.inplay(dm);};dn=n.filter(dl,di);_do=n.isEmpty(dn);dp=!_do;return H.Const([dk,dp,dh]);},F.meetups().get_View());},df);dq=function(dr){var ds,dt,du,dv,dw,dx,dy;if(dr[0]){if(dr[1]){du=g.ofArray([F.renderMeetups()]);dt=f.Element("table",$.New(k,{$:0}),g.ofArray([f.Element("tbody",[],du)]));}else{if(dr[2]){dw=g.ofArray([f.TextNode("\u0424\u0443\u0442\u0431\u043e\u043b\u044c\u043d\u044b\u0435 \u043c\u0430\u0442\u0447\u0438 \u0441\u0435\u0433\u043e\u0434\u043d\u044f \u0435\u0449\u0451 \u043d\u0435 \u043d\u0430\u0447\u0430\u043b\u0438\u0441\u044c")]);dv=f.Element("h1",[],dw);}else{dx=g.ofArray([F.renderMeetups()]);dv=f.Element("table",$.New(k,{$:0}),g.ofArray([f.Element("tbody",[],dx)]));}dt=dv;}ds=dt;}else{dy=g.ofArray([f.TextNode("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043a\u0430\u043a\u0430\u044f-\u0442\u043e \u043e\u0448\u0438\u0431\u043a\u0430 :( \u041f\u0440\u0438\u043d\u043e\u0441\u0438\u043c \u0441\u0432\u043e\u0438 \u0438\u0437\u0432\u0438\u043d\u0435\u043d\u0438\u044f. ")]);ds=f.Element("h1",[],dy);}return ds;};dz=t.Map(dq,dg);return f.EmbedView(dz);},RenderMenu:function(){var dA,dB,d3;dA=F.varInplayOnly().get_View();dB=function(dC){var dD,dG,dQ,dR,dS;t.get_Do();dD=H.Bind(function(dE){return H.Bind(function(dF){return H.Const([dE,dF]);},F.varSelectedCountry().get_View());},F.viewCountries());dG=function(dH){var dI,dJ,dK,dL,dN,dO,dP;dI=dH[0];dJ=dH[1];if(n.isEmpty(dI)){dK=f.get_Empty();}else{dL=function(dM){return F.renderMenuItemCountry(dJ,dM);};dN=n.map(dL,dI);dO=f.Concat(dN);dP=F.renderMenuItemAllCountries();dK=f.Append(dP,dO);}return dK;};dQ=t.Map(dG,dD);dR=f.EmbedView(dQ);dS=g.ofArray([f.Element("a",n.toList(n.delay(function(){return n.append([m.Create("href","#")],n.delay(function(){return n.append([l.Handler("click",function(){return function(){r.Set(F.varSelectedCountry(),{$:0});return r.Set(F.varInplayOnly(),true);};})],n.delay(function(){return dC?[m.Create("class","active")]:n.empty();}));}));})),g.ofArray([f.TextNode("\u0412 \u0438\u0433\u0440\u0435")])),f.Element("a",n.toList(n.delay(function(){return n.append([m.Create("href","#")],n.delay(function(){return n.append([l.Handler("click",function(){return function(){r.Set(F.varSelectedCountry(),{$:0});return r.Set(F.varInplayOnly(),false);};})],n.delay(function(){return!dC?[m.Create("class","active")]:n.empty();}));}));})),g.ofArray([f.TextNode("\u0412\u0441\u0435 \u043c\u0430\u0442\u0447\u0438")])),dR]);return f.Concat(dS);};d3=t.Map(dB,dA);return f.EmbedView(d3);},addNewGames:function(d4){var d5,d6,d7,ef,eh,ej,ek,el;d5=r.Get(F.meetups().Var);d6=n.toList(d5);F.meetups().Clear();d7=function(d8){var d9,d_,d$,ea,eb,ec,ed,ee;d9=d8[0];d_=d8[1];d$=d8[2];ea=d9.gameId;eb=ea[0];ec=ea[1];ed=F.tryGetCountry(eb,ec);ee=p.Create(d_);return $.New(I,{game:d9,gameInfo:ee,country:p.Create(ed),hash:d$});};ef=function(eg){return r.Get(eg.gameInfo).order;};eh=function(ei){return F.meetups().Add(ei);};ej=g.map(d7,d4);ek=n.append(d6,ej);el=n.sortBy(ef,ek);return n.iter(eh,el);},events:$.Field(function(){var em,eo;em=function(en){return J.id(en);};eo=$.New(k,{$:0});return E.Create(em,eo);}),meetups:$.Field(function(){var ep,er;ep=function(eq){return I.id(eq);};er=$.New(k,{$:0});return E.Create(ep,er);}),processCoupon:function(){return q.Delay(function(){var et,ev,ew,ex;et=function(eu){return[eu.game.gameId,eu.hash];};ev=r.Get(F.meetups().Var);ew=n.map(et,ev);ex=n.toList(ew);return q.Bind(y.Async("WebFace:0",[ex,r.Get(F.varInplayOnly())]),function(ey){var ez,eA,eB;ez=ey[1];eA=ey[2];eB=ey[0];F.updateCoupon(eB,ez,eA);return q.Return(null);});});},processEvents:function(){return q.Delay(function(){var eD,eE,eF,eK,eL,eM,eN;eD=r.Get(F.events().Var);eE=r.Get(F.meetups().Var);eF=function(eG){var eH,eJ;eH=function(eI){return z.Equals(eI.gameId,eG.game.gameId);};eJ=n.tryFind(eH,eD);return eJ.$==0?{$:1,$0:eG.game.gameId}:{$:0};};eK=n.choose(eF,eE);eL=n.toList(eK);if(eL.$==0){eM=q.Return(null);}else{eN=y.Async("WebFace:2",[eL]);eM=q.Bind(eN,function(eO){var eP;eP=q.For(eO,function(eQ){var eR,eS,eT;eR=eQ[3];eQ[1];eS=eQ[0];eT=eQ[2];F.events().Add($.New(J,{gameId:eS,country:eT,openDate:eR}));return q.Return(null);});return q.Combine(eP,q.Delay(function(){return q.For(r.Get(F.meetups().Var),function(eV){var eW,eX,eY;eW=eV.game.gameId;eX=eW[0];eY=eW[1];r.Set(eV.country,F.tryGetCountry(eX,eY));return q.Return(null);});}));});}return eM;});},renderMeetup:function(eZ,e0,e1){var e2,e3,e4,e5,e6,e7,e8,e$,fc,fg,fi,fn,fw,fz,fC,fG,fI,fN,fW,fX,fY,fZ,f2,f5,f9,f$,ge,gn,gq,gt,gx,gz,gE;e2=[e0,r.Get(eZ.gameInfo).playMinute,e1];if(e2[0]){if(e2[1].$==0){e4=f.get_Empty();}else{if(e2[2].$==1){e6=e2[2].$0;if(e6!==""?e6!==r.Get(eZ.country):false){e2[2].$0;e7=f.get_Empty();}else{e8=function(e9){var e_;e_=g.ofArray([e9]);return f.Element("td",[],e_);};e$=function(fa){var fb;fb=g.ofArray([f.TextNode(fa)]);return f.Element("td",[],fb);};fc=function(fd){var fe,ff;fe=eZ.gameInfo.get_View();ff=t.Map(fd,fe);return e8(f.TextView(ff));};fg=function(fh){return K.formatDecimalOption(fh);};fi=$.New(k,{$:0});fn=g.ofArray([f.TextView(eZ.country.get_View())]);e7=f.Element("tr",fi,g.ofArray([fc(function(fj){var fk,fl,fm;fk=fj.order;fl=fk[0];fm=fk[1];return $$.String(fl)+"."+$$.String(fm);}),e$(eZ.game.home),e$(eZ.game.away),f.Element("td",[],fn),fc(function(fo){return fo.status;}),fc(function(fp){return fp.summary;}),fc(function(fq){return fg(fq.winBack);}),fc(function(fr){return fg(fr.winLay);}),fc(function(fs){return fg(fs.drawBack);}),fc(function(ft){return fg(ft.drawLay);}),fc(function(fu){return fg(fu.loseBack);}),fc(function(fv){return fg(fv.loseLay);})]));}e5=e7;}else{fw=function(fx){var fy;fy=g.ofArray([fx]);return f.Element("td",[],fy);};fz=function(fA){var fB;fB=g.ofArray([f.TextNode(fA)]);return f.Element("td",[],fB);};fC=function(fD){var fE,fF;fE=eZ.gameInfo.get_View();fF=t.Map(fD,fE);return fw(f.TextView(fF));};fG=function(fH){return K.formatDecimalOption(fH);};fI=$.New(k,{$:0});fN=g.ofArray([f.TextView(eZ.country.get_View())]);e5=f.Element("tr",fI,g.ofArray([fC(function(fJ){var fK,fL,fM;fK=fJ.order;fL=fK[0];fM=fK[1];return $$.String(fL)+"."+$$.String(fM);}),fz(eZ.game.home),fz(eZ.game.away),f.Element("td",[],fN),fC(function(fO){return fO.status;}),fC(function(fP){return fP.summary;}),fC(function(fQ){return fG(fQ.winBack);}),fC(function(fR){return fG(fR.winLay);}),fC(function(fS){return fG(fS.drawBack);}),fC(function(fT){return fG(fT.drawLay);}),fC(function(fU){return fG(fU.loseBack);}),fC(function(fV){return fG(fV.loseLay);})]));}e4=e5;}e3=e4;}else{if(e2[2].$==1){fX=e2[2].$0;if(fX!==""?fX!==r.Get(eZ.country):false){e2[2].$0;fY=f.get_Empty();}else{fZ=function(f0){var f1;f1=g.ofArray([f0]);return f.Element("td",[],f1);};f2=function(f3){var f4;f4=g.ofArray([f.TextNode(f3)]);return f.Element("td",[],f4);};f5=function(f6){var f7,f8;f7=eZ.gameInfo.get_View();f8=t.Map(f6,f7);return fZ(f.TextView(f8));};f9=function(f_){return K.formatDecimalOption(f_);};f$=$.New(k,{$:0});ge=g.ofArray([f.TextView(eZ.country.get_View())]);fY=f.Element("tr",f$,g.ofArray([f5(function(ga){var gb,gc,gd;gb=ga.order;gc=gb[0];gd=gb[1];return $$.String(gc)+"."+$$.String(gd);}),f2(eZ.game.home),f2(eZ.game.away),f.Element("td",[],ge),f5(function(gf){return gf.status;}),f5(function(gg){return gg.summary;}),f5(function(gh){return f9(gh.winBack);}),f5(function(gi){return f9(gi.winLay);}),f5(function(gj){return f9(gj.drawBack);}),f5(function(gk){return f9(gk.drawLay);}),f5(function(gl){return f9(gl.loseBack);}),f5(function(gm){return f9(gm.loseLay);})]));}fW=fY;}else{gn=function(go){var gp;gp=g.ofArray([go]);return f.Element("td",[],gp);};gq=function(gr){var gs;gs=g.ofArray([f.TextNode(gr)]);return f.Element("td",[],gs);};gt=function(gu){var gv,gw;gv=eZ.gameInfo.get_View();gw=t.Map(gu,gv);return gn(f.TextView(gw));};gx=function(gy){return K.formatDecimalOption(gy);};gz=$.New(k,{$:0});gE=g.ofArray([f.TextView(eZ.country.get_View())]);fW=f.Element("tr",gz,g.ofArray([gt(function(gA){var gB,gC,gD;gB=gA.order;gC=gB[0];gD=gB[1];return $$.String(gC)+"."+$$.String(gD);}),gq(eZ.game.home),gq(eZ.game.away),f.Element("td",[],gE),gt(function(gF){return gF.status;}),gt(function(gG){return gG.summary;}),gt(function(gH){return gx(gH.winBack);}),gt(function(gI){return gx(gI.winLay);}),gt(function(gJ){return gx(gJ.drawBack);}),gt(function(gK){return gx(gK.drawLay);}),gt(function(gL){return gx(gL.loseBack);}),gt(function(gM){return gx(gM.loseLay);})]));}e3=fW;}return e3;},renderMeetups:function(){var gN,gO;gN=F.meetups().get_View();gO=function(gP){var gQ,gV,gZ;gQ=function(gR){var gS,gT,gU;gS=gR[0];gT=gR[1];gU=gR[2];return F.renderMeetup(gS,gT,gU);};t.get_Do();gV=H.Bind(function(gW){return H.Bind(function(gX){return H.Bind(function(gY){return H.Const([gW,gX,gY]);},F.varSelectedCountry().get_View());},F.varInplayOnly().get_View());},gP);gZ=t.Map(gQ,gV);return f.EmbedView(gZ);};return f.ConvertSeq(gO,gN);},renderMenuItemAllCountries:function(){var g0,g1,g$;g0=F.varSelectedCountry().get_View();g1=function(g2){return f.Element("a",n.toList(n.delay(function(){var g4,g5,g6;if(g2.$==1){g5=g2.$0;if(g5!==""){g2.$0;g6=n.empty();}else{g6=[m.Create("class","active")];}g4=g6;}else{g4=[m.Create("class","active")];}return n.append(g4,n.delay(function(){return n.append([m.Create("href","#")],n.delay(function(){return[l.Handler("click",function(){return function(){return r.Set(F.varSelectedCountry(),{$:0});};})];}));}));})),g.ofArray([f.TextNode("\u0412\u0441\u0435 \u0441\u0442\u0440\u0430\u043d\u044b")]));};g$=t.Map(g1,g0);return f.EmbedView(g$);},renderMenuItemCountry:function(ha,hb){return f.Element("a",n.toList(n.delay(function(){var hd,he,hf;if(ha.$==1){he=ha.$0;if(he===hb){ha.$0;hf=[m.Create("class","active")];}else{hf=n.empty();}hd=hf;}else{hd=n.empty();}return n.append(hd,n.delay(function(){return n.append([m.Create("href","#")],n.delay(function(){return[l.Handler("click",function(){return function(){return r.Set(F.varSelectedCountry(),{$:1,$0:hb});};})];}));}));})),g.ofArray([f.TextNode(hb)]));},tryGetCountry:function(hk,hl){var hm,hn,ho,hp,hq,hr,hs;hm=[hk,hl];hn=hm[0];ho=hm[1];hp=F.tryGetEvent(hn,ho);if(hp.$==1){if(hp.$0.country.$==1){hs=hp.$0.country.$0;hr=hs;}else{hr="";}hq=hr;}else{hq="";}return hq;},tryGetEvent:function(ht,hu){var hv,hw,hz;hv=[ht,hu];hw=function(hx){var hy;hy=hx.gameId;return z.Equals(hv,hy);};hz=r.Get(F.events().Var);return n.tryFind(hw,hz);},updateCoupon:function(hA,hB,hC){var hD,hE,hF,hI,hJ,hK,hL,hN,hQ,hR;hD=hA.$==0;if(!hD){hF=function(hG){var hH;hH="adding new games "+$$.String(hG);return G?G.log(hH):undefined;};hI=hA.get_Length();hF(hI);hE=F.addNewGames(hA);}else{hE=null;}hJ=n.isEmpty(hC);if(!hJ){hL=function(hM){return F.meetups().RemoveByKey(hM);};n.iter(hL,hC);hN=function(hO){var hP;hP="removing out games "+$$.String(hO);return G?G.log(hP):undefined;};hQ=n.length(hC);hK=hN(hQ);}else{hK=null;}hR=function(hS){var hT,hU,hV,hW,hX,hY;hT=hS[0];hU=hS[1];hV=hS[2];hW=F.meetups().TryFindByKey(hT);if(hW.$==1){hY=hW.$0;r.Set(hY.gameInfo,hU);hX=void(hY.hash=hV);}else{hX=null;}return hX;};return n.iter(hR,hB);},varInplayOnly:$.Field(function(){return p.Create(true);}),varSelectedCountry:$.Field(function(){return p.Create({$:0});}),viewCountries:function(){var hZ,h0;hZ=t.get_Do();h0=F.events().get_View();return H.Bind(function(h1){var h2,h4,h5,h6;h2=function(h3){return[h3.gameId,h3];};h4=n.map(h2,h1);h5=M.OfArray(n.toArray(h4));h6=F.viewGames();return H.Bind(function(h7){var h8,ic,id,ie,ig,ih,ij,ik;h8=function(h9){var h_,h$,ib;h_=h9[0];h9[1];h$=function(ia){return ia.country;};ib=h5.TryFind(h_.gameId);return s.map(h$,ib);};ic=n.choose(h8,h7);id={$:0};ie=function(_if){return!z.Equals(id,_if);};ig=n.filter(ie,ic);ih=function(ii){return ii;};ij=n.choose(ih,ig);ik=w.distinct(ij);return H.Const(n.sort(ik));},h6);},h0);},viewGames:$.Field(function(){var il,im;il=t.get_Do();im=F.meetups().get_View();return H.Bind(function(_in){var io;io=F.varInplayOnly().get_View();return H.Bind(function(ip){var iq,is,ix,iy;iq=function(ir){return!ip?true:r.Get(ir.gameInfo).playMinute.$==1;};is=function(it){var iu,iw;iu=function(iv){return[it.game,iv];};iw=it.gameInfo.get_View();return t.Map(iu,iw);};ix=n.filter(iq,_in);iy=n.map(is,ix);return H.Bind(function(iz){return H.Const(iz);},H.Sequence(iy));},io);},im);})},Utils:{dateTimeToString:function($s){var $0=this,$this=this;return $$.dateTimeToString($s);},formatDecimal:function(iA){return K.trimEnd(iA.toFixed(6),g.ofArray([48,46]));},formatDecimalOption:function(iB){var iC,iD;if(iB.$==1){iD=iB.$0;iC=K.formatDecimal(iD);}else{iC="";}return iC;},getDatePart:function(iE){var iF;iF=new N(iE.getTime());iF.setHours(0,0,0,0);return iF;},mkids:function(iG,iH){var iI,iK,iL,iM,iN;iI=function(iJ){return[iH(iJ),iJ];};iK=g.map(iI,iG);iL=M.OfArray(n.toArray(iK));iM=g.map(iH,iG);iN=O.New1(P.OfSeq(iM));return[iN,iL];},trimEnd:function(iO,iP){var iQ,iR,iS,iT,iU,iV,iW,iX,iY,iZ,i0,i1;iQ=[iO,iP];if(iQ[0]===""){iR="";}else{if(iQ[1].$==1){iT=iQ[0];iQ[1];iU=iQ[1].$0;if(iT.charCodeAt(iT.length-1)===iU){iQ[1].$0;iW=iQ[1];iX=iQ[0];iV=K.trimEnd(Q.string(iX,{$:0},{$:1,$0:iX.length-2}),iW);}else{if(iQ[1].$==1){iZ=iQ[0];i0=iQ[1].$1;iY=K.trimEnd(iZ,i0);}else{iY=R.Raise(S.New("E:\\User\\Docs\\Visual Studio 2015\\Projects\\Betfair\\CentBet\\WebFace\\ClientUtils.fs",9,18));}iV=iY;}iS=iV;}else{i1=iQ[0];iS=i1;}iR=iS;}return iR;}}}}});$.OnInit(function(){a=$.Safe($$.JSON);b=$.Safe($$.WebSharper.PrintfHelpers);c=$.Safe($$.window);d=$.Safe($$.WebSharper.UI);e=$.Safe(d.Next);f=$.Safe(e.Doc);g=$.Safe($$.WebSharper.List);h=$.Safe($$.CentBet);i=$.Safe(h.Client);j=$.Safe(i.Admin);k=$.Safe(g.T);l=$.Safe(e.AttrModule);m=$.Safe(e.AttrProxy);n=$.Safe($$.WebSharper.Seq);o=$.Safe(e.Key);p=$.Safe(e.Var);q=$.Safe($$.WebSharper.Concurrency);r=$.Safe(e.Var1);s=$.Safe($$.WebSharper.Option);t=$.Safe(e.View);u=$.Safe(j.Level);v=$.Safe($$.WebSharper.Strings);w=$.Safe($$.Seq);x=$.Safe($$.WebSharper.Remoting);y=$.Safe(x.AjaxRemotingProvider);z=$.Safe($$.WebSharper.Unchecked);A=$.Safe(e.Storage1);B=$.Safe($$.WebSharper.Json);C=$.Safe(B.Provider);D=$.Safe(C.Id);E=$.Safe(e.ListModel);F=$.Safe(i.Coupon);G=$.Safe($$.console);H=$.Safe(e.View1);I=$.Safe(F.Meetup);J=$.Safe(F.Event);K=$.Safe(i.Utils);L=$.Safe($$.WebSharper.Collections);M=$.Safe(L.MapModule);N=$.Safe($$.Date);O=$.Safe(L.FSharpSet);P=$.Safe(L.BalancedTree);Q=$.Safe($$.WebSharper.Slice);R=$.Safe($$.WebSharper.Operators);return S=$.Safe($$.WebSharper.MatchFailureException);});$.OnLoad(function(){F.viewGames();F.varSelectedCountry();F.varInplayOnly();F.meetups();F.events();j.varConsole();j.varCommandsHistory();j.varCmd();j.renderRecord();j.op_SpliceUntyped();j["cmd-input"]();return;});}());
