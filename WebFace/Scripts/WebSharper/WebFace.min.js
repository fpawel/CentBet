(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S;$.Define($$,{CentBet:{Client:{Admin:{Level:$.Class({},{get_color:function(){return function(T){return T.$==1?["lightgrey","red"]:T.$==2?["lightgrey","green"]:["white","navy"];};}}),LocalStorage:$.Class({Get:function(U){var V,W,X,Y,Z;try{W=this.strg.getItem(U);X=a.parse(W);V={$:0,$0:X};}catch(Y){Z=this.strg;V={$:1,$0:"local storage get item "+b.prettyPrint(U)+" error : "+b.prettyPrint(Y)+", storage "+b.prettyPrint(Z)};}return V;},Set:function(_0,_1){var _2,_3,_4,_5;try{_3=a.stringify(_1);_2={$:0,$0:this.strg.setItem(_0,_3)};}catch(_4){_5=this.strg;_2={$:1,$0:"local storage set item "+b.prettyPrint(_0)+" error : "+b.prettyPrint(_4)+", value "+b.prettyPrint(_1)+", storage "+b.prettyPrint(_5)};}return _2;}},{New:function(){var _7;_7=$.New(this,{});_7.strg=c.localStorage;return _7;}}),Render:function(){var _8;_8=$.New(k,{$:0});return f.Concat(g.ofArray([j.RenderCommandPrompt(),(j.op_SpliceUntyped())(f.Element("br",[],_8)),j.RenderRecords()]));},RenderCommandPrompt:function(){var _9;_9=g.ofArray([(j.op_SpliceUntyped())(f.Element("span",g.ofArray([l.Style("margin-left","10px")]),$.New(k,{$:0}))),(j.op_SpliceUntyped())(f.Element("label",g.ofArray([m.Create("for",j["cmd-input"]())]),g.ofArray([f.TextNode("Input here:")]))),j.renderInput()]);return f.Concat(_9);},RenderMenu:function(){var _,bb,bj;_=function(ba){return ba;};bb=g.ofArray([f.Element("a",n.toList(n.delay(function(){return n.append([m.Create("href","#")],n.delay(function(){return[l.Handler("click",function(){return function(){return j.varConsole().Clear();};})];}));})),g.ofArray([f.TextNode("Clear console")])),f.Element("a",n.toList(n.delay(function(){return n.append([m.Create("href","#")],n.delay(function(){return[l.Handler("click",function(){return function(){return j.varCommandsHistory().Clear();};})];}));})),g.ofArray([f.TextNode("Clear history")]))]);bj=g.map(_,bb);return f.Concat(bj);},RenderRecords:function(){var bk,bo;bk=function(bl){var bm,bn;bn=$.New(k,{$:0});bm=g.ofArray([(j.renderRecord())(bl),(j.op_SpliceUntyped())(f.Element("br",[],bn))]);return f.Concat(bm);};bo=j.varConsole().get_View();return f.ConvertSeq(bk,bo);},addRecord:function(bp,bq){return j.varConsole().Add({Id:o.Fresh(),Text:bq,Level:bp});},"cmd-input":$.Field(function(){return"cmd-input";}),cmdKey:function(br){return br.Id;},doc:function(bs){return bs;},op_SpliceUntyped:$.Field(function(){return function(bt){return j.doc(bt);};}),recordKey:function(bu){return bu.Id;},renderInput:function(){var bv,bw,bx,by,bB,bE,bI,bJ,bX;bv=p.Create("");bw=p.Create(null);bx=p.Create(false);by=q.Delay(function(){r.Set(bx,true);return q.Bind(j.send(r.Get(bv)),function(){r.Set(bx,false);r.Set(bv,"");return q.Return(null);});});bB=function(bC){var bD;bD={$:1,$0:bC};j.varCmd=function(){return bD;};return r.Set(bv,bC.Text);};bE=function(bF){var bG,bH;bG=j.tryGetCommandFromHistory(bF);bH=s.map(bB,bG);return;};bI=bx.get_View();bJ=function(bK){var bL;bL=g.ofArray([f.Input(n.toList(n.delay(function(){return n.append([m.Create("id",j["cmd-input"]())],n.delay(function(){return n.append(bK?[m.Create("disabled","disabled")]:n.empty(),n.delay(function(){return n.append([l.Style("width","80%")],n.delay(function(){return n.append([l.CustomVar(bw,function(bQ){return function(){return bQ.focus();};},function(){return{$:0};})],n.delay(function(){return[l.Handler("keydown",function(){return function(bV){var bW;bW=bV.keyCode;return bW===13?q.Start(by,{$:0}):bW===38?bE(true):bW===40?bE(false):null;};})];}));}));}));}));})),bv)]);return f.Concat(bL);};bX=t.Map(bJ,bI);return f.EmbedView(bX);},renderRecord:$.Field(function(){var bY;bY=function(bZ){var b0,b1,b2;b0=(u.get_color())(bZ.Level);b1=b0[1];b2=b0[0];return(j.op_SpliceUntyped())(f.Element("span",g.ofArray([l.Style("color",b1),l.Style("background",b2)]),g.ofArray([f.TextNode(bZ.Text)])));};return function(b3){var b4;b4=t.Map(bY,b3);return f.EmbedView(b4);};}),send:function(b5){return q.Delay(function(){var b7,b8,b9,b_,b$,ca;b7=v.Trim(b5);j.addRecord($.New(u,{$:2}),b7);b9=r.Get(j.varCommandsHistory().Var);if(n.isEmpty(b9)){b_=true;}else{b$=w.last(b9);b_=b$.Text!==b7;}if(b_){j.varCommandsHistory().Add({Id:o.Fresh(),Text:b7});ca=q.Return(null);}else{ca=q.Return(null);}b8=ca;return q.Combine(b8,q.Delay(function(){return q.TryWith(q.Delay(function(){return q.Bind(y.Async("WebFace:1",[b7]),function(cd){var ce;cd[0];ce=cd[1];j.addRecord($.New(u,{$:0}),ce);return q.Return(null);});}),function(cf){j.addRecord($.New(u,{$:1}),cf.message);return q.Return(null);});}));});},tryGetCommandFromHistory:function(cg){var ch,ci,cj,ck,cl,cm,cn,cq,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS;ch=r.Get(j.varCommandsHistory().Var);ci=n.length(ch);if(ci===0){cj={$:0};}else{if(j.varCmd().$==1){cm=j.varCmd().$0.Id;cn=function(co){return function(cp){return[cp,co];};};cq=function(cr){var cs,ct;cs=cr[0];cr[1];ct=cs.Id;return z.Equals(ct,cm);};cu=r.Get(j.varCommandsHistory().Var);cv=n.mapi(cn,cu);cw=n.tryFind(cq,cv);cx=[cw,cg];if(cx[0].$==1){if(cx[1]){cx[0].$0[0];cA=cx[0].$0[1];if(ci>0?cA<ci-1:false){cC=cx[0].$0[1];cx[0].$0[0];cB=cC+1;}else{if(cx[0].$==1){if(cx[1]){cE=cx[1]?ci-1:0;}else{cx[0].$0[0];cF=cx[0].$0[1];if(ci>0?cF>0:false){cH=cx[0].$0[1];cx[0].$0[0];cG=cH-1;}else{cG=cx[1]?ci-1:0;}cE=cG;}cD=cE;}else{cD=cx[1]?ci-1:0;}cB=cD;}cz=cB;}else{if(cx[0].$==1){if(cx[1]){cJ=cx[1]?ci-1:0;}else{cx[0].$0[0];cK=cx[0].$0[1];if(ci>0?cK>0:false){cM=cx[0].$0[1];cx[0].$0[0];cL=cM-1;}else{cL=cx[1]?ci-1:0;}cJ=cL;}cI=cJ;}else{cI=cx[1]?ci-1:0;}cz=cI;}cy=cz;}else{if(cx[0].$==1){if(cx[1]){cO=cx[1]?ci-1:0;}else{cx[0].$0[0];cP=cx[0].$0[1];if(ci>0?cP>0:false){cR=cx[0].$0[1];cx[0].$0[0];cQ=cR-1;}else{cQ=cx[1]?ci-1:0;}cO=cQ;}cN=cO;}else{cN=cx[1]?ci-1:0;}cy=cN;}cl=cy;}else{cl=ci-1;}ck=cl;cS=n.nth(ck,ch);cj={$:1,$0:cS};}return cj;},varCmd:$.Field(function(){return{$:0};}),varCommandsHistory:$.Field(function(){var cT,cV;cT=function(cU){return j.cmdKey(cU);};cV=A.LocalStorage("CentBetConsoleCommandsHistory",{Encode:(C.get_Default().EncodeRecord(undefined,[["Id",C.get_Default().EncodeUnion(o,"$",[[0,[["$0","Item",D,0]]]]),0],["Text",D,0]]))(),Decode:(C.get_Default().DecodeRecord(undefined,[["Id",C.get_Default().DecodeUnion(o,"$",[[0,[["$0","Item",D,0]]]]),0],["Text",D,0]]))()});return E.CreateWithStorage(cT,cV);}),varConsole:$.Field(function(){var cW,cY;cW=function(cX){return j.recordKey(cX);};cY=A.LocalStorage("CentBetConsole",{Encode:(C.get_Default().EncodeRecord(undefined,[["Id",C.get_Default().EncodeUnion(o,"$",[[0,[["$0","Item",D,0]]]]),0],["Text",D,0],["Level",C.get_Default().EncodeUnion(u,"$",[[0,[]],[1,[]],[2,[]]]),0]]))(),Decode:(C.get_Default().DecodeRecord(undefined,[["Id",C.get_Default().DecodeUnion(o,"$",[[0,[["$0","Item",D,0]]]]),0],["Text",D,0],["Level",C.get_Default().DecodeUnion(u,"$",[[0,[]],[1,[]],[2,[]]]),0]]))()});return E.CreateWithStorage(cW,cY);})},Coupon:{Event:$.Class({},{id:function(cZ){return cZ.gameId;}}),Meetup:$.Class({},{id:function(c0){return c0.game.gameId;},inplay:function(c1){return r.Get(c1.gameInfo).playMinute.$==1;},notinplay:function(c2){return r.Get(c2.gameInfo).playMinute.$==0;},viewGameInfo:function(c3){return c3.gameInfo.get_View();}}),Render:function(){var c4,de,df,dk,dr;c4=q.Delay(function(){return q.While(function(){return true;},q.Delay(function(){return q.TryWith(q.Delay(function(){return q.Bind(F.processCoupon(),function(){return q.Bind(F.processEvents(),function(){return q.Return(null);});});}),function(c$){var da;da=function(db){var dc;dc="error updating coupon : "+b.prettyPrint(db);return G?G.log(dc):undefined;};da(c$);return q.Bind(q.Sleep(5000),function(){return q.Return(null);});});}));});q.Start(c4,{$:0});de=t.get_Do();df=H.Bind(function(dg){return H.Bind(function(dh){var di,dj;di=n.isEmpty(dh);dj=!di;return H.Const([dj,dg]);},F.meetups().get_View());},F.varInplayOnly().get_View());dk=function(dl){var dm,dn,_do,dp,dq;if(dl[0]){dn=g.ofArray([F.renderMeetups()]);dm=f.Element("table",$.New(k,{$:0}),g.ofArray([f.Element("tbody",[],dn)]));}else{if(dl[1]){dp=g.ofArray([f.TextNode("\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e \u0440\u0430\u0437\u044b\u0433\u0440\u044b\u0432\u0430\u0435\u043c\u044b\u0445 \u0432 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0438\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u0444\u0443\u0442\u0431\u043e\u043b\u044c\u043d\u044b\u0445 \u043c\u0430\u0442\u0447\u0430\u0445")]);_do=f.Element("h1",[],dp);}else{dq=g.ofArray([f.TextNode("\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e \u0444\u0443\u0442\u0431\u043e\u043b\u044c\u043d\u044b\u0445 \u043c\u0430\u0442\u0447\u0430\u0445 \u043d\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f")]);_do=f.Element("h1",[],dq);}dm=_do;}return dm;};dr=t.Map(dk,df);return f.EmbedView(dr);},RenderMenu:function(){var ds;ds=g.ofArray([F.renderMenusInplay(),F.renderMenuCountries()]);return f.Concat(ds);},addNewGames:function(dt){var du,dv,dw,dG,dI,dK,dL,dM;du=r.Get(F.meetups().Var);dv=n.toList(du);F.meetups().Clear();dw=function(dx){var dy,dz,dA,dB,dC,dD,dE,dF;dy=dx[0];dz=dx[1];dA=dx[2];dB=dy.gameId;dC=dB[0];dD=dB[1];dE=F.tryGetCountry(dC,dD);dF=p.Create(dz);return $.New(I,{game:dy,gameInfo:dF,country:p.Create(dE),hash:dA});};dG=function(dH){return r.Get(dH.gameInfo).order;};dI=function(dJ){return F.meetups().Add(dJ);};dK=g.map(dw,dt);dL=n.append(dv,dK);dM=n.sortBy(dG,dL);return n.iter(dI,dM);},events:$.Field(function(){var dN,dP;dN=function(dO){return J.id(dO);};dP=$.New(k,{$:0});return E.Create(dN,dP);}),meetups:$.Field(function(){var dQ,dS;dQ=function(dR){return I.id(dR);};dS=$.New(k,{$:0});return E.Create(dQ,dS);}),processCoupon:function(){return q.Delay(function(){var dU,dW,dX,dY;dU=function(dV){return[dV.game.gameId,dV.hash];};dW=r.Get(F.meetups().Var);dX=n.map(dU,dW);dY=n.toList(dX);return q.Bind(y.Async("WebFace:0",[dY,r.Get(F.varInplayOnly())]),function(dZ){var d0,d1,d2;d0=dZ[1];d1=dZ[2];d2=dZ[0];F.updateCoupon(d2,d0,d1);return q.Return(null);});});},processEvents:function(){return q.Delay(function(){var d4,d5,d6,d$,ea,eb,ec;d4=r.Get(F.events().Var);d5=r.Get(F.meetups().Var);d6=function(d7){var d8,d_;d8=function(d9){return z.Equals(d9.gameId,d7.game.gameId);};d_=n.tryFind(d8,d4);return d_.$==0?{$:1,$0:d7.game.gameId}:{$:0};};d$=n.choose(d6,d5);ea=n.toList(d$);if(ea.$==0){eb=q.Return(null);}else{ec=y.Async("WebFace:2",[ea]);eb=q.Bind(ec,function(ed){var ee;ee=q.For(ed,function(ef){var eg,eh,ei;eg=ef[3];ef[1];eh=ef[0];ei=ef[2];F.events().Add($.New(J,{gameId:eh,country:ei,openDate:eg}));return q.Return(null);});return q.Combine(ee,q.Delay(function(){return q.For(r.Get(F.meetups().Var),function(ek){var el,em,en;el=ek.game.gameId;em=el[0];en=el[1];r.Set(ek.country,F.tryGetCountry(em,en));return q.Return(null);});}));});}return eb;});},renderMeetup:function(eo,ep,eq){var er,es,et,eu,ev,ew,ex,ey,eI,eJ,eK,eU,eV,eW,eX,eY,eZ,e9,e_,e$,fj;er=[ep,r.Get(eo.gameInfo).playMinute,eq];if(er[0]){if(er[1].$==0){et=f.get_Empty();}else{if(er[2].$==1){ev=er[2].$0;if(ev!==""?ev!==r.Get(eo.country):false){er[2].$0;ew=f.get_Empty();}else{ex=eo.gameInfo.get_View();ey=function(ez){var eA,eC,eD,eE,eG,eH;eA=function(eB){return eB.$==1;};eC=g.ofArray([ez.drawBack,ez.drawLay,ez.winBack,ez.winLay,ez.loseBack,ez.loseLay]);if(n.exists(eA,eC)){eE=function(eF){return eF;};eG=F.renderMeetup1(eo,eq.$==1);eH=g.map(eE,eG);eD=f.Element("tr",[],eH);}else{eD=f.get_Empty();}return eD;};eI=t.Map(ey,ex);ew=f.EmbedView(eI);}eu=ew;}else{eJ=eo.gameInfo.get_View();eK=function(eL){var eM,eO,eP,eQ,eS,eT;eM=function(eN){return eN.$==1;};eO=g.ofArray([eL.drawBack,eL.drawLay,eL.winBack,eL.winLay,eL.loseBack,eL.loseLay]);if(n.exists(eM,eO)){eQ=function(eR){return eR;};eS=F.renderMeetup1(eo,eq.$==1);eT=g.map(eQ,eS);eP=f.Element("tr",[],eT);}else{eP=f.get_Empty();}return eP;};eU=t.Map(eK,eJ);eu=f.EmbedView(eU);}et=eu;}es=et;}else{if(er[2].$==1){eW=er[2].$0;if(eW!==""?eW!==r.Get(eo.country):false){er[2].$0;eX=f.get_Empty();}else{eY=eo.gameInfo.get_View();eZ=function(e0){var e1,e3,e4,e5,e7,e8;e1=function(e2){return e2.$==1;};e3=g.ofArray([e0.drawBack,e0.drawLay,e0.winBack,e0.winLay,e0.loseBack,e0.loseLay]);if(n.exists(e1,e3)){e5=function(e6){return e6;};e7=F.renderMeetup1(eo,eq.$==1);e8=g.map(e5,e7);e4=f.Element("tr",[],e8);}else{e4=f.get_Empty();}return e4;};e9=t.Map(eZ,eY);eX=f.EmbedView(e9);}eV=eX;}else{e_=eo.gameInfo.get_View();e$=function(fa){var fb,fd,fe,ff,fh,fi;fb=function(fc){return fc.$==1;};fd=g.ofArray([fa.drawBack,fa.drawLay,fa.winBack,fa.winLay,fa.loseBack,fa.loseLay]);if(n.exists(fb,fd)){ff=function(fg){return fg;};fh=F.renderMeetup1(eo,eq.$==1);fi=g.map(ff,fh);fe=f.Element("tr",[],fi);}else{fe=f.get_Empty();}return fe;};fj=t.Map(e$,e_);eV=f.EmbedView(fj);}es=eV;}return es;},renderMeetup1:function(fk,fl){var fm,fq,ft,fw;fm=function(fn){var fo,fp;fo=fk.gameInfo.get_View();fp=t.Map(fn,fo);return f.TextView(fp);};fq=function(fr,fs){return f.Element("span",g.ofArray([m.Create("class",fr)]),g.ofArray([fs]));};ft=function(fu,fv){return f.Element("td",g.ofArray([m.Create("class",fu?"kef kef-back":"kef kef-lay")]),g.ofArray([fm(fv)]));};fw=function(fx){return K.formatDecimalOption(fx);};return n.toList(n.delay(function(){var fz;fz=g.ofArray([fm(function(fA){var fB,fC,fD;fB=fA.order;fC=fB[0];fD=fB[1];return $$.String(fC)+"."+$$.String(fD);})]);return n.append([f.Element("td",[],fz)],n.delay(function(){var fF;fF=g.ofArray([fq("home-team",f.TextNode(fk.game.home)),fq("game-status",fm(function(fG){return fG.summary;})),fq("away-team",f.TextNode(fk.game.away)),fq("game-status",fm(function(fH){return fH.status;}))]);return n.append([f.Element("td",[],fF)],n.delay(function(){return n.append([ft(true,function(fJ){return fw(fJ.winBack);})],n.delay(function(){return n.append([ft(false,function(fL){return fw(fL.winLay);})],n.delay(function(){return n.append([ft(true,function(fN){return fw(fN.drawBack);})],n.delay(function(){return n.append([ft(false,function(fP){return fw(fP.drawLay);})],n.delay(function(){return n.append([ft(true,function(fR){return fw(fR.loseBack);})],n.delay(function(){return n.append([ft(false,function(fT){return fw(fT.loseLay);})],n.delay(function(){var fV,fW;if(!fl){fW=g.ofArray([fq("game-status",f.TextView(fk.country.get_View()))]);fV=[f.Element("td",[],fW)];}else{fV=n.empty();}return fV;}));}));}));}));}));}));}));}));}));},renderMeetups:function(){var fX,fY;fX=F.meetups().get_View();fY=function(fZ){var f0,f5,f9;f0=function(f1){var f2,f3,f4;f2=f1[0];f3=f1[1];f4=f1[2];return F.renderMeetup(f2,f3,f4);};t.get_Do();f5=H.Bind(function(f6){return H.Bind(function(f7){return H.Bind(function(f8){return H.Const([f6,f7,f8]);},F.varSelectedCountry().get_View());},F.varInplayOnly().get_View());},fZ);f9=t.Map(f0,f5);return f.EmbedView(f9);};return f.ConvertSeq(fY,fX);},renderMenuCountries:function(){var f_,gb,gl;t.get_Do();f_=H.Bind(function(f$){return H.Bind(function(ga){return H.Const([f$,ga]);},F.varSelectedCountry().get_View());},F.viewCountries());gb=function(gc){var gd,ge,gf,gg,gi,gj,gk;gd=gc[0];ge=gc[1];if(n.isEmpty(gd)){gf=f.get_Empty();}else{gg=function(gh){return F.renderMenuItemCountry(ge,gh);};gi=n.map(gg,gd);gj=f.Concat(gi);gk=F.renderMenuItemAllCountries();gf=f.Append(gk,gj);}return gf;};gl=t.Map(gb,f_);return f.EmbedView(gl);},renderMenuItemAllCountries:function(){var gm,gn,gx;gm=F.varSelectedCountry().get_View();gn=function(go){return f.Element("a",n.toList(n.delay(function(){var gq,gr,gs;if(go.$==1){gr=go.$0;if(gr!==""){go.$0;gs=n.empty();}else{gs=[m.Create("class","active")];}gq=gs;}else{gq=[m.Create("class","active")];}return n.append(gq,n.delay(function(){return n.append([m.Create("href","#")],n.delay(function(){return[l.Handler("click",function(){return function(){return r.Set(F.varSelectedCountry(),{$:0});};})];}));}));})),g.ofArray([f.TextNode("\u0412\u0441\u0435 \u0441\u0442\u0440\u0430\u043d\u044b")]));};gx=t.Map(gn,gm);return f.EmbedView(gx);},renderMenuItemCountry:function(gy,gz){return f.Element("a",n.toList(n.delay(function(){var gB,gC,gD;if(gy.$==1){gC=gy.$0;if(gC===gz){gy.$0;gD=[m.Create("class","active")];}else{gD=n.empty();}gB=gD;}else{gB=n.empty();}return n.append(gB,n.delay(function(){return n.append([m.Create("href","#")],n.delay(function(){return[l.Handler("click",function(){return function(){return r.Set(F.varSelectedCountry(),{$:1,$0:gz});};})];}));}));})),g.ofArray([f.TextNode(gz)]));},renderMenusInplay:function(){var gI,gJ,gZ;gI=F.varInplayOnly().get_View();gJ=function(gK){var gL,gN,gY;gL=function(gM){return gM;};gN=g.ofArray([f.Element("a",n.toList(n.delay(function(){return n.append([m.Create("href","#")],n.delay(function(){return n.append([l.Handler("click",function(){return function(){r.Set(F.varSelectedCountry(),{$:0});return r.Set(F.varInplayOnly(),true);};})],n.delay(function(){return gK?[m.Create("class","active")]:n.empty();}));}));})),g.ofArray([f.TextNode("\u0412 \u0438\u0433\u0440\u0435")])),f.Element("a",n.toList(n.delay(function(){return n.append([m.Create("href","#")],n.delay(function(){return n.append([l.Handler("click",function(){return function(){r.Set(F.varSelectedCountry(),{$:0});return r.Set(F.varInplayOnly(),false);};})],n.delay(function(){return!gK?[m.Create("class","active")]:n.empty();}));}));})),g.ofArray([f.TextNode("\u0412\u0441\u0435 \u043c\u0430\u0442\u0447\u0438")]))]);gY=g.map(gL,gN);return f.Concat(gY);};gZ=t.Map(gJ,gI);return f.EmbedView(gZ);},tryGetCountry:function(g0,g1){var g2,g3,g4,g5,g6,g7,g8;g2=[g0,g1];g3=g2[0];g4=g2[1];g5=F.tryGetEvent(g3,g4);if(g5.$==1){if(g5.$0.country.$==1){g8=g5.$0.country.$0;g7=g8;}else{g7="";}g6=g7;}else{g6="";}return g6;},tryGetEvent:function(g9,g_){var g$,ha,hd;g$=[g9,g_];ha=function(hb){var hc;hc=hb.gameId;return z.Equals(g$,hc);};hd=r.Get(F.events().Var);return n.tryFind(ha,hd);},updateCoupon:function(he,hf,hg){var hh,hi,hj,hm,hn,ho,hp,hr,hu,hv;hh=he.$==0;if(!hh){hj=function(hk){var hl;hl="adding new games "+$$.String(hk);return G?G.log(hl):undefined;};hm=he.get_Length();hj(hm);hi=F.addNewGames(he);}else{hi=null;}hn=n.isEmpty(hg);if(!hn){hp=function(hq){return F.meetups().RemoveByKey(hq);};n.iter(hp,hg);hr=function(hs){var ht;ht="removing out games "+$$.String(hs);return G?G.log(ht):undefined;};hu=n.length(hg);ho=hr(hu);}else{ho=null;}hv=function(hw){var hx,hy,hz,hA,hB,hC;hx=hw[0];hy=hw[1];hz=hw[2];hA=F.meetups().TryFindByKey(hx);if(hA.$==1){hC=hA.$0;r.Set(hC.gameInfo,hy);hB=void(hC.hash=hz);}else{hB=null;}return hB;};return n.iter(hv,hf);},varInplayOnly:$.Field(function(){return p.Create(true);}),varSelectedCountry:$.Field(function(){return p.Create({$:0});}),viewCountries:function(){var hD,hE;hD=t.get_Do();hE=F.events().get_View();return H.Bind(function(hF){var hG,hI,hJ,hK;hG=function(hH){return[hH.gameId,hH];};hI=n.map(hG,hF);hJ=M.OfArray(n.toArray(hI));hK=F.viewGames();return H.Bind(function(hL){var hM,hS,hT,hU,hW,hX,hZ,h0;hM=function(hN){var hO,hP,hR;hO=hN[0];hN[1];hP=function(hQ){return hQ.country;};hR=hJ.TryFind(hO.gameId);return s.map(hP,hR);};hS=n.choose(hM,hL);hT={$:0};hU=function(hV){return!z.Equals(hT,hV);};hW=n.filter(hU,hS);hX=function(hY){return hY;};hZ=n.choose(hX,hW);h0=w.distinct(hZ);return H.Const(n.sort(h0));},hK);},hE);},viewGames:$.Field(function(){var h1,h2;h1=t.get_Do();h2=F.meetups().get_View();return H.Bind(function(h3){var h4,h5;if(n.isEmpty(h3)){h4=H.Const(n.empty());}else{h5=F.varInplayOnly().get_View();h4=H.Bind(function(h6){var h7,h9,ic,id;h7=function(h8){return!h6?true:r.Get(h8.gameInfo).playMinute.$==1;};h9=function(h_){var h$,ib;h$=function(ia){return[h_.game,ia];};ib=h_.gameInfo.get_View();return t.Map(h$,ib);};ic=n.filter(h7,h3);id=n.map(h9,ic);return H.Bind(function(ie){return H.Const(ie);},H.Sequence(id));},h5);}return h4;},h2);})},Utils:{dateTimeToString:function($s){var $0=this,$this=this;return $$.dateTimeToString($s);},formatDecimal:function(_if){return K.trimEnd(_if.toFixed(6),g.ofArray([48,46]));},formatDecimalOption:function(ig){var ih,ii;if(ig.$==1){ii=ig.$0;ih=K.formatDecimal(ii);}else{ih="";}return ih;},getDatePart:function(ij){var ik;ik=new N(ij.getTime());ik.setHours(0,0,0,0);return ik;},mkids:function(il,im){var _in,ip,iq,ir,is;_in=function(io){return[im(io),io];};ip=g.map(_in,il);iq=M.OfArray(n.toArray(ip));ir=g.map(im,il);is=O.New1(P.OfSeq(ir));return[is,iq];},trimEnd:function(it,iu){var iv,iw,ix,iy,iz,iA,iB,iC,iD,iE,iF,iG;iv=[it,iu];if(iv[0]===""){iw="";}else{if(iv[1].$==1){iy=iv[0];iv[1];iz=iv[1].$0;if(iy.charCodeAt(iy.length-1)===iz){iv[1].$0;iB=iv[1];iC=iv[0];iA=K.trimEnd(Q.string(iC,{$:0},{$:1,$0:iC.length-2}),iB);}else{if(iv[1].$==1){iE=iv[0];iF=iv[1].$1;iD=K.trimEnd(iE,iF);}else{iD=R.Raise(S.New("C:\\Users\\User\\Documents\\Visual Studio 2015\\Projects\\Betfair\\CentBet\\WebFace\\ClientUtils.fs",9,18));}iA=iD;}ix=iA;}else{iG=iv[0];ix=iG;}iw=ix;}return iw;}}}}});$.OnInit(function(){a=$.Safe($$.JSON);b=$.Safe($$.WebSharper.PrintfHelpers);c=$.Safe($$.window);d=$.Safe($$.WebSharper.UI);e=$.Safe(d.Next);f=$.Safe(e.Doc);g=$.Safe($$.WebSharper.List);h=$.Safe($$.CentBet);i=$.Safe(h.Client);j=$.Safe(i.Admin);k=$.Safe(g.T);l=$.Safe(e.AttrModule);m=$.Safe(e.AttrProxy);n=$.Safe($$.WebSharper.Seq);o=$.Safe(e.Key);p=$.Safe(e.Var);q=$.Safe($$.WebSharper.Concurrency);r=$.Safe(e.Var1);s=$.Safe($$.WebSharper.Option);t=$.Safe(e.View);u=$.Safe(j.Level);v=$.Safe($$.WebSharper.Strings);w=$.Safe($$.Seq);x=$.Safe($$.WebSharper.Remoting);y=$.Safe(x.AjaxRemotingProvider);z=$.Safe($$.WebSharper.Unchecked);A=$.Safe(e.Storage1);B=$.Safe($$.WebSharper.Json);C=$.Safe(B.Provider);D=$.Safe(C.Id);E=$.Safe(e.ListModel);F=$.Safe(i.Coupon);G=$.Safe($$.console);H=$.Safe(e.View1);I=$.Safe(F.Meetup);J=$.Safe(F.Event);K=$.Safe(i.Utils);L=$.Safe($$.WebSharper.Collections);M=$.Safe(L.MapModule);N=$.Safe($$.Date);O=$.Safe(L.FSharpSet);P=$.Safe(L.BalancedTree);Q=$.Safe($$.WebSharper.Slice);R=$.Safe($$.WebSharper.Operators);return S=$.Safe($$.WebSharper.MatchFailureException);});$.OnLoad(function(){F.viewGames();F.varSelectedCountry();F.varInplayOnly();F.meetups();F.events();j.varConsole();j.varCommandsHistory();j.varCmd();j.renderRecord();j.op_SpliceUntyped();j["cmd-input"]();return;});}());
