(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8;$.Define($$,{CentBet:{Client:{Admin:{RecordType:$.Class({},{get_color:function(){return function(_9){return _9.$==1?["lightgrey","red"]:_9.$==2?["lightgrey","green"]:["white","navy"];};}}),Render:function(){var _;_=$.New(h,{$:0});return c.Concat(d.ofArray([g.RenderCommandPrompt(),(g.op_SpliceUntyped())(c.Element("br",[],_)),g.RenderRecords()]));},RenderCommandPrompt:function(){var ba;ba=d.ofArray([(g.op_SpliceUntyped())(c.Element("span",d.ofArray([i.Style("margin-left","10px")]),$.New(h,{$:0}))),(g.op_SpliceUntyped())(c.Element("label",d.ofArray([j.Create("for",g["cmd-input"]())]),d.ofArray([c.TextNode("Input here:")]))),g.renderInput()]);return c.Concat(ba);},RenderRecords:function(){var ba,be;ba=function(bb){var bc,bd;bd=$.New(h,{$:0});bc=d.ofArray([(g.renderRecord())(bb),(g.op_SpliceUntyped())(c.Element("br",[],bd))]);return c.Concat(bc);};be=g.varConsole().get_View();return c.ConvertSeq(ba,be);},addRecord:function(bf,bg){return g.varConsole().Add({Id:k.Fresh(),Text:bg,RecordType:bf});},"cmd-input":$.Field(function(){return"cmd-input";}),cmdKey:function(bh){return bh.Id;},doc:function(bi){return bi;},op_SpliceUntyped:$.Field(function(){return function(bj){return g.doc(bj);};}),recordKey:function(bk){return bk.Id;},renderInput:function(){var bl,bm,bn,bo,br,bu,by,bz,bP;bl=l.Create("");bm=l.Create(null);bn=l.Create(false);bo=m.Delay(function(){n.Set(bn,true);return m.Bind(g.send(n.Get(bl)),function(){n.Set(bn,false);n.Set(bl,"");return m.Return(null);});});br=function(bs){var bt;bt={$:1,$0:bs};g.varCmd=function(){return bt;};return n.Set(bl,bs.Text);};bu=function(bv){var bw,bx;bw=g.tryGetCommandFromHistory(bv);bx=o.map(br,bw);return;};by=bn.get_View();bz=function(bA){var bB;bB=d.ofArray([c.Input(p.toList(p.delay(function(){return p.append([j.Create("id",g["cmd-input"]())],p.delay(function(){return p.append(bA?[j.Create("disabled","disabled")]:p.empty(),p.delay(function(){return p.append([i.Style("width","80%")],p.delay(function(){return p.append([i.CustomVar(bm,function(bG){return function(){return bG.focus();};},function(){return{$:0};})],p.delay(function(){return[i.Handler("keydown",function(){return function(bL){var bM,bN,bO;bM=bL.keyCode;if(bM===13){bO=n.Get(bl).toLowerCase();bN=bO==="-clear-output"?g.varConsole().Clear():bO==="-clear-hist"?g.varCommandsHistory().Clear():m.Start(bo,{$:0});}else{bN=bM===38?bu(true):bM===40?bu(false):null;}return bN;};})];}));}));}));}));})),bl)]);return c.Concat(bB);};bP=q.Map(bz,by);return c.EmbedView(bP);},renderRecord:$.Field(function(){var bQ;bQ=function(bR){var bS,bT,bU,bV,bW;try{bT=(r.get_color())(bR.RecordType);bU=bT[1];bV=bT[0];bS=(g.op_SpliceUntyped())(c.Element("span",d.ofArray([i.Style("color",bU),i.Style("background",bV)]),d.ofArray([c.TextNode(bR.Text)])));}catch(bW){g.varCommandsHistory().Clear();g.varConsole().Clear();bS=c.get_Empty();}return bS;};return function(bX){var bY;bY=q.Map(bQ,bX);return c.EmbedView(bY);};}),send:function(bZ){return m.Delay(function(){var b1,b2,b3,b4,b5,b6;b1=s.Trim(bZ);g.addRecord($.New(r,{$:2}),b1);b3=n.Get(g.varCommandsHistory().Var);if(p.isEmpty(b3)){b4=true;}else{b5=t.last(b3);b4=b5.Text!==b1;}if(b4){g.varCommandsHistory().Add({Id:k.Fresh(),Text:b1});b6=m.Return(null);}else{b6=m.Return(null);}b2=b6;return m.Combine(b2,m.Delay(function(){return m.TryWith(m.Delay(function(){var b9;b9=v.Async("WebFace:2",[b1]);return m.Bind(b9,function(b_){var b$,ca,cb;if(b_.$==1){ca=b_.$0;g.addRecord($.New(r,{$:1}),ca);b$=m.Return(null);}else{cb=b_.$0;g.addRecord($.New(r,{$:0}),cb);b$=m.Return(null);}return b$;});}),function(cc){g.addRecord($.New(r,{$:1}),cc.message);return m.Return(null);});}));});},tryGetCommandFromHistory:function(cd){var ce,cf,cg,ch,ci,cj,ck,cn,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP;ce=n.Get(g.varCommandsHistory().Var);cf=p.length(ce);if(cf===0){cg={$:0};}else{if(g.varCmd().$==1){cj=g.varCmd().$0.Id;ck=function(cl){return function(cm){return[cm,cl];};};cn=function(co){var cp,cq;cp=co[0];co[1];cq=cp.Id;return w.Equals(cq,cj);};cr=n.Get(g.varCommandsHistory().Var);cs=p.mapi(ck,cr);ct=p.tryFind(cn,cs);cu=[ct,cd];if(cu[0].$==1){if(cu[1]){cu[0].$0[0];cx=cu[0].$0[1];if(cf>0?cx<cf-1:false){cz=cu[0].$0[1];cu[0].$0[0];cy=cz+1;}else{if(cu[0].$==1){if(cu[1]){cB=cu[1]?cf-1:0;}else{cu[0].$0[0];cC=cu[0].$0[1];if(cf>0?cC>0:false){cE=cu[0].$0[1];cu[0].$0[0];cD=cE-1;}else{cD=cu[1]?cf-1:0;}cB=cD;}cA=cB;}else{cA=cu[1]?cf-1:0;}cy=cA;}cw=cy;}else{if(cu[0].$==1){if(cu[1]){cG=cu[1]?cf-1:0;}else{cu[0].$0[0];cH=cu[0].$0[1];if(cf>0?cH>0:false){cJ=cu[0].$0[1];cu[0].$0[0];cI=cJ-1;}else{cI=cu[1]?cf-1:0;}cG=cI;}cF=cG;}else{cF=cu[1]?cf-1:0;}cw=cF;}cv=cw;}else{if(cu[0].$==1){if(cu[1]){cL=cu[1]?cf-1:0;}else{cu[0].$0[0];cM=cu[0].$0[1];if(cf>0?cM>0:false){cO=cu[0].$0[1];cu[0].$0[0];cN=cO-1;}else{cN=cu[1]?cf-1:0;}cL=cN;}cK=cL;}else{cK=cu[1]?cf-1:0;}cv=cK;}ci=cv;}else{ci=cf-1;}ch=ci;cP=p.nth(ch,ce);cg={$:1,$0:cP};}return cg;},varCmd:$.Field(function(){return{$:0};}),varCommandsHistory:$.Field(function(){var cQ,cR,cS,cV,cX,cY,cZ,c3,c4,c8,c_;try{cS=function(cT){var cU;cU="restoring list - "+x.prettyPrint(cT);return y?y.log(cU):undefined;};cS("CentBetConsoleCommandsHistory");cV=function(cW){return g.cmdKey(cW);};cX=z.LocalStorage("CentBetConsoleCommandsHistory",{Encode:(B.get_Default().EncodeRecord(undefined,[["Id",B.get_Default().EncodeUnion(k,"$",[[0,[["$0","Item",C,0]]]]),0],["Text",C,0]]))(),Decode:(B.get_Default().DecodeRecord(undefined,[["Id",B.get_Default().DecodeUnion(k,"$",[[0,[["$0","Item",C,0]]]]),0],["Text",C,0]]))()});cY=D.CreateWithStorage(cV,cX);cZ=function(c0){return function(c1){var c2;c2=x.prettyPrint(c0)+" - "+$$.String(c1);return y?y.log(c2):undefined;};};(cZ("CentBetConsoleCommandsHistory"))(cY.get_Length());cR=cY;}catch(c3){c4=function(c5){return function(c6){var c7;c7="error when restoring "+x.prettyPrint(c5)+" - "+x.prettyPrint(c6);return y?y.log(c7):undefined;};};(c4("CentBetConsoleCommandsHistory"))(c3);c8=function(c9){return g.cmdKey(c9);};c_=$.New(h,{$:0});cR=D.Create(c8,c_);}cQ=cR;return cQ;}),varConsole:$.Field(function(){var c$,da,db,de,dg,dh,di,dm,dn,dr,dt;try{db=function(dc){var dd;dd="restoring list - "+x.prettyPrint(dc);return y?y.log(dd):undefined;};db("CentBetConsole");de=function(df){return g.recordKey(df);};dg=z.LocalStorage("CentBetConsole",{Encode:(B.get_Default().EncodeRecord(undefined,[["Id",B.get_Default().EncodeUnion(k,"$",[[0,[["$0","Item",C,0]]]]),0],["Text",C,0],["RecordType",B.get_Default().EncodeUnion(r,"$",[[0,[]],[1,[]],[2,[]]]),0]]))(),Decode:(B.get_Default().DecodeRecord(undefined,[["Id",B.get_Default().DecodeUnion(k,"$",[[0,[["$0","Item",C,0]]]]),0],["Text",C,0],["RecordType",B.get_Default().DecodeUnion(r,"$",[[0,[]],[1,[]],[2,[]]]),0]]))()});dh=D.CreateWithStorage(de,dg);di=function(dj){return function(dk){var dl;dl=x.prettyPrint(dj)+" - "+$$.String(dk);return y?y.log(dl):undefined;};};(di("CentBetConsole"))(dh.get_Length());da=dh;}catch(dm){dn=function(_do){return function(dp){var dq;dq="error when restoring "+x.prettyPrint(_do)+" - "+x.prettyPrint(dp);return y?y.log(dq):undefined;};};(dn("CentBetConsole"))(dm);dr=function(ds){return g.recordKey(ds);};dt=$.New(h,{$:0});da=D.Create(dr,dt);}c$=da;return c$;})},Coupon:{Render:function(){var du,dv,dw,dx,dJ;du=l.Create(false);E.start(du);dw=F.varMode().get_View();dx=function(dy){var dz,dA,dB,dH,dI;if(dy.$==1){dA=dy.$0;dz=G.renderExploreMarkets(dA);}else{dB=function(dC){var dD,dE,dF,dG;if(dC){dE=H["render\u0421oupon"]();dD=H.doc(dE);}else{dF=d.ofArray([c.TextNode("\u0414\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435.")]);dG=c.Element("h1",[],dF);dD=H.doc(dG);}return dD;};dH=du.get_View();dI=q.Map(dB,dH);dz=c.EmbedView(dI);}return dz;};dJ=q.Map(dx,dw);dv=d.ofArray([c.EmbedView(dJ)]);return c.Concat(dv);},SettingsDialog:{Helpers:{buttonDoc:function(dK){var dL,dM,dQ;dL=I.view();dM=function(dN){var dO,dP;if((dK?dN===40:false)?true:!dK?dN===10:false){dO=c.get_Empty();}else{dP=K.buttonElt(dK,dN);dO=H.doc(dP);}return dO;};dQ=q.Map(dM,dL);return c.EmbedView(dQ);},buttonElt:function(dR,dS){var d1;d1=dR?"+":"-";return c.Element("button",d.ofArray([K.op_SpliceUntyped("w3-btn w3-teal"),j.Create("style","margin: 10px; width: 50px; height: 50px;"),i.Handler("click",function(){return function(){var dV,dW,dX,dY,dZ,d0;dV=[dR,dS];if(dV[0]){if(dV[1]===40){dX=null;}else{dY=dS+(dR?1:-1);dX=I.set(dY);}dW=dX;}else{if(dV[1]===10){dZ=null;}else{d0=dS+(dR?1:-1);dZ=I.set(d0);}dW=dZ;}return dW;};})]),d.ofArray([c.TextNode(d1)]));},close:function(){return n.Set(K.varVisible(),false);},content:$.Field(function(){var d2,d4,d5,d7;d2=L.titleAndCloseButton("\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0430\u0442\u0447\u0435\u0439 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435",function(){return K.close();});d5=function(d6){return $$.String(d6);};d7=I.view();d4=c.Element("div",d.ofArray([K.op_SpliceUntyped("w3-xxlarge"),j.Create("style","margin : 10px; float : left;")]),d.ofArray([c.TextView(q.Map(d5,d7))]));return d.ofArray([H.doc(d2),H.doc(d4),K.buttonDoc(true),K.buttonDoc(false)]);}),op_SpliceUntyped:function(d8){return j.Create("class",d8);},renderDialog:$.Field(function(){return L.createModal(K.varVisible().get_View(),function(){return K.close();});}),varVisible:$.Field(function(){return l.Create(false);})},elt:$.Field(function(){return((K.renderDialog())($.New(h,{$:0})))(K.content());}),show:function(){return n.Set(K.varVisible(),true);}},doc:function(d_){return d_;},renderMeetup:$.Field(function(){var d$,ea,eb;d$=[F.varColumnGpbVisible().get_View(),F.varColumnCountryVisible().get_View()];ea=d$[0];eb=d$[1];return function(ec){return M.renderMeetup(ea,eb,ec);};}),renderPagination:$.Field(function(){var ed,ee,ef;ed=q.get_Do();ee=F.varPagesCount().get_View();ef=N.Bind(function(eg){var eh;eh=F.varCurrentPageNumber().get_View();return N.Bind(function(ei){var ej,em,ez;ej=i.Handler("click",function(){return function(){return J.show();};});em=p.toList(p.delay(function(){return p.append(p.map(function(eo){var ep,ev,ew;ep=p.toList(p.delay(function(){return p.append([j.Create("href","#")],p.delay(function(){return p.append([i.Handler("click",function(){return function(){return n.Set(F.varTargetPageNumber(),eo);};})],p.delay(function(){return eo===ei?[j.Create("class","w3-teal")]:p.empty();}));}));}));ew=$$.String(eo+1);ev=d.ofArray([c.Element("a",ep,d.ofArray([c.TextNode(ew)]))]);return c.Element("li",[],ev);},O.range(0,eg-1)),p.delay(function(){var ey;ey=d.ofArray([c.Element("a",d.ofArray([j.Create("href","#"),ej]),d.ofArray([c.TextNode("...")]))]);return[c.Element("li",[],ey)];}));}));ez=d.map(function(eA){return H.doc(eA);},em);return N.Const(c.Concat(ez));},eh);},ee);return c.EmbedView(ef);}),"render\u0421oupon":$.Field(function(){var eB,eC,eD,eE,eF,eG,eJ,eK,eL,eM,eN,eO,eP;eB=d.ofArray([j.Create("class","w3-responsive")]);eD=d.ofArray([j.Create("class","football-games-list w3-table w3-bordered w3-striped w3-hoverable")]);eE=d.ofArray([c.Element("tr",d.ofArray([i.Class("coupon-header-row w3-teal")]),M.renderGamesHeaderRow(F.varColumnGpbVisible().get_View()))]);eG=function(eH){var eI;eI=p.map(H.renderMeetup(),eH);return c.Concat(eI);};eJ=F.meetups().get_View();eK=q.Map(eG,eJ);eF=d.ofArray([c.EmbedView(eK)]);eC=d.ofArray([c.Element("table",eD,d.ofArray([c.Element("thead",[],eE),c.Element("tbody",[],eF)]))]);eL=c.Element("div",eB,eC);eM=d.ofArray([j.Create("class","w3-container")]);eN=q.get_Do();eO=F.varCurrentPageNumber().get_View();eP=N.Bind(function(eQ){return N.Bind(function(eR){var eS,eT,eU,eV;if(eQ===eR){eT=eL;}else{eV="\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043f\u0435\u0440\u0435\u0445\u043e\u0434 \u043a \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 \u2116 "+$$.String(eR+1)+"...";eU=d.ofArray([c.TextNode(eV)]);eT=c.Element("h1",[],eU);}eS=eT;return N.Const(H.doc(eS));},F.varTargetPageNumber().get_View());},eO);return c.Element("div",eM,d.ofArray([c.Element("div",d.ofArray([j.Create("class","w3-center")]),d.ofArray([c.Element("ul",d.ofArray([j.Create("class","w3-pagination w3-border w3-round")]),d.ofArray([H.renderPagination()]))])),c.EmbedView(eP),J.elt()]));})},Football:{Event:$.Class({},{id:function(eW){return eW.gameId;}}),Market:$.Class({},{New:function(eX,eY,eZ){var e1;e1=function(e2){var e3,e4;e3=e2[0];e4=e2[1];return{selectionId:e4,runnerName:e3};};return $.New(Q,{marketId:eX,marketName:eY,runners:d.map(e1,eZ)});},id:function(e5){return e5.marketId;}}),MarketBook:$.Class({},{New:function(e6){var e7,e9;e7=function(e8){return S.New(e8);};e9=e6.runners;return $.New(R,{marketId:e6.marketId,marketName:e6.marketName,expanded:l.Create(false),runners:d.map(e7,e9),pricesReaded:l.Create(false)});},id:function(e_){return e_.marketId;}}),Meetup:$.Class({},{id:function(e$){return e$.game.gameId;}}),RunnerBook:$.Class({},{New:function(fa){return $.New(S,{selectionId:fa.selectionId,runnerName:fa.runnerName,back:l.Create($.New(h,{$:0})),lay:l.Create($.New(h,{$:0}))});}}),Side:$.Class({},{get_what:function(){return function(fb){return fb.$==1?"lay":"back";};}})},GameDetail:{Helpers:{kefClass:function(fc){return"runner-kef runner-"+x.toSafe((T.get_what())(fc));},renderAvailPricesTooltip:$.Field(function(){var fd,fm;fd=function(fe){var ff,fg,fh,fi,fj,fl;ff=fe[0];fg=fe[1];fi=L.formatDecimal(ff);fh=d.ofArray([c.Element("td",d.ofArray([G.op_SpliceUntyped("runner-tooltip-price")]),d.ofArray([c.TextNode(fi)])),c.Element("td",d.ofArray([G.op_SpliceUntyped("runner-tooltip-size")]),d.ofArray([(U.renderSize())(fg)]))]);fj=d.map(function(fk){return G.doc(fk);},fh);fl=c.Element("tr",[],fj);return G.doc(fl);};fm=d.ofArray([G.op_SpliceUntyped("tooltip-content runner-avail-prices-container")]);return function(fn){var fo,fp;fo=p.map(fd,fn);fp=c.Element("table",fm,fo);return G.doc(fp);};}),renderGameInfo:function(fq){var fr,fu,fv,fw,fx,fy,fI,fJ,fK,fN,fO,fP,fQ,fR,fS,fT,fU,fV,fW,fX,fY,fZ;fr=function(fs){var ft;ft=V.getWith("",fs);return c.TextNode(ft);};fu=fq.country.get_View();fv=q.Map(fr,fu);fw=c.EmbedView(fv);fx=fq.totalMatched.get_View();fy=function(fz){var fA,fC,fF,fG,fH;fA=function(fB){return fB[1];};fC=function(fD){return function(fE){return fD+fE;};};fF=d.map(fA,fz);fG=p.fold(fC,0,fF);fH=fG===0?"":$$.String(fG)+" GPB";return c.TextNode(fH);};fI=q.Map(fy,fx);fJ=c.EmbedView(fI);fK=d.ofArray([j.Create("href","#"),i.Handler("click",function(){return function(){return n.Set(F.varMode(),{$:0});};})]);fN=d.ofArray([c.TextNode("\u041d\u0430\u0437\u0430\u0434 \u043a \u0441\u043f\u0438\u0441\u043a\u0443 \u043c\u0430\u0442\u0447\u0435\u0439")]);fO=c.Element("a",fK,fN);fP=d.ofArray([fO]);fQ=fq.game.home;fR=d.ofArray([c.TextView(fq.summary.get_View())]);fS=fq.game.away;fT=d.ofArray([fw]);fU=d.ofArray([c.TextView(fq.status.get_View())]);fV=d.ofArray([fJ]);fW=[j.Create("class","w3-indigo")];fX=[];fY=[];fZ=[];return c.Concat([c.Element("div",fW,[c.TextNode("\n    "),c.Element("div",[j.Create("style","text-align: left; padding-left : 5px;")],[c.TextNode("\n        "),c.Concat(fP),c.TextNode("\n    ")]),c.TextNode("\n    \n    "),c.Element("table",fX,[c.TextNode("\n        "),c.Element("tr",fY,[c.TextNode("\n            "),c.Element("td",[],[c.TextNode("\n                "),c.Element("h1",[j.Create("style","text-align: right;")],[c.TextNode("\n                    "),c.TextNode(fQ),c.TextNode("\n                ")]),c.TextNode("\n            ")]),c.TextNode("\n            "),c.Element("td",[],[c.TextNode("\n                "),c.Element("h3",[j.Create("style","text-align: center; color : #b4e500;")],[c.TextNode("\n                    "),c.Concat(fR),c.TextNode("\n                ")]),c.TextNode("\n            ")]),c.TextNode("\n            "),c.Element("td",[],[c.TextNode("\n                "),c.Element("h1",[j.Create("style","text-align: left;")],[c.TextNode("\n                    "),c.TextNode(fS),c.TextNode("\n                ")]),c.TextNode("\n            ")]),c.TextNode("\n        ")]),c.TextNode("\n        "),c.Element("tr",fZ,[c.TextNode("\n            "),c.Element("td",[],[c.TextNode("\n                "),c.Element("h3",[j.Create("style","text-align: left; padding-left:5px;")],[c.TextNode("\n                    "),c.Concat(fT),c.TextNode("\n                ")]),c.TextNode("\n            ")]),c.TextNode("\n            "),c.Element("td",[],[c.TextNode("\n                "),c.Element("h3",[j.Create("style","text-align: center;")],[c.TextNode("\n                    "),c.Concat(fU),c.TextNode("\n                ")]),c.TextNode("\n            ")]),c.TextNode("\n            "),c.Element("td",[],[c.TextNode("\n                "),c.Element("h3",[j.Create("style","text-align: right; padding-right:5px;")],[c.TextNode("\n                    "),c.Concat(fV),c.TextNode("\n                ")]),c.TextNode("\n            ")]),c.TextNode("\n        ")]),c.TextNode("\n    ")]),c.TextNode("\n")])]);},renderKef:function(f0,f1){var f2,f3,f4,f5;f2=q.get_Do();f3=w.Equals(f0,$.New(T,{$:0}))?f1.back:f1.lay;f4=f3.get_View();f5=N.Bind(function(f6){var f7,f8,f9,f_,f$,ga,gb,gc,gd;if(f6.$==1){if(f6.$1.$==0){f9=f6.$0[0];f_=f6.$0[1];f8=c.Element("td",d.ofArray([G.op_SpliceUntyped(U.kefClass(f0))]),U.renderPriceSizeButton(f9,f_));}else{f$=f6.$1;ga=f6.$0[0];gb=f6.$0[1];gc=(U.renderAvailPricesTooltip())(f$);gd=U.renderPriceSizeButton(ga,gb);f8=c.Element("td",d.ofArray([G.op_SpliceUntyped(U.kefClass(f0))]),d.ofArray([c.Element("div",d.ofArray([G.op_SpliceUntyped("tooltip"),i.Style("width","100%")]),$.New(h,{$:1,$0:gc,$1:gd}))]));}f7=f8;}else{f7=c.Element("td",d.ofArray([G.op_SpliceUntyped("runner-kef")]),$.New(h,{$:0}));}return N.Const(f7);},f4);return c.EmbedView(f5);},renderMarket:function(ge){var gf,gg,gt;gf=ge.expanded.get_View();gg=function(gh){var gi,gj,gk,gl,gm,gn,gq,gr,gs;gi=U.renderTitle(gh,ge);if(!gh){gk=gi;}else{gl=d.ofArray([G.op_SpliceUntyped("table-horiz-lines")]);gm=d.ofArray([c.Element("td",d.ofArray([j.Create("colspan","3")]),d.ofArray([gi]))]);gn=function(go){var gp;gp=U.renderRunner(go);return G.doc(gp);};gq=ge.runners;gr=d.map(gn,gq);gk=c.Element("table",gl,d.ofArray([c.Element("tr",[],gm),c.Concat(gr)]));}gj=gk;gs=d.ofArray([gj]);return c.Element("li",[],gs);};gt=q.Map(gg,gf);return c.EmbedView(gt);},renderMarkets:function(gu){var gv,gw,gz,gB,gD,gE,gF,gG,gH,gI,gJ,gK,gL,gM,gN,gO,gP,gQ,gR,gS,gT,gU;gv=j.Create("style","border-right : 1px solid #ddd;");gw=function(gx){return d.map(function(gy){return U.renderMarket(gy);},gx);};gz=function(gA){return gA.marketName!=="\u0410\u0437\u0438\u0430\u0442\u0441\u043a\u0438\u0439 \u0433\u0430\u043d\u0434\u0438\u043a\u0430\u043f";};gB=function(gC){return[gC.marketName!=="\u0421\u0442\u0430\u0432\u043a\u0438",gC.marketName];};gD=gu.marketsBook;gE=p.filter(gz,gD);gF=p.sortBy(gB,gE);gG=(U.window(3))(gF);if(gG.$==1){if(gG.$1.$==1){if(gG.$1.$1.$==1){if(gG.$1.$1.$1.$==0){gL=gG.$0;gM=gG.$1.$0;gN=gG.$1.$1.$0;gO=d.ofArray([G.op_SpliceUntyped("w3-row")]);gP=c.Element("div",gO,d.ofArray([c.Element("ul",d.ofArray([G.op_SpliceUntyped("w3-ul w3-col s4")]),gw(gL)),c.Element("ul",d.ofArray([G.op_SpliceUntyped("w3-ul w3-col s4")]),gw(gM)),c.Element("ul",d.ofArray([G.op_SpliceUntyped("w3-ul w3-col s4")]),gw(gN))]));gK=G.doc(gP);}else{gK=c.get_Empty();}gJ=gK;}else{gQ=gG.$0;gR=gG.$1.$0;gS=c.Element("div",d.ofArray([G.op_SpliceUntyped("w3-row")]),d.ofArray([c.Element("ul",d.ofArray([G.op_SpliceUntyped("w3-ul w3-col s6")]),gw(gQ)),c.Element("ul",d.ofArray([G.op_SpliceUntyped("w3-ul w3-col s6")]),gw(gR))]));gJ=G.doc(gS);}gI=gJ;}else{gT=gG.$0;gU=c.Element("ul",d.ofArray([G.op_SpliceUntyped("w3-ul")]),gw(gT));gI=G.doc(gU);}gH=gI;}else{gH=c.get_Empty();}return gH;},renderPriceSizeButton:function(gV,gW){var gX,g2,g3;gX=function(gY){var gZ,g0,g1;gZ=gY[0];g0=gY[1];g1=c.Element("div",d.ofArray([G.op_SpliceUntyped(gZ)]),d.ofArray([g0]));return G.doc(g1);};g3=L.formatDecimal(gV);g2=d.ofArray([["runner-kef-price",c.TextNode(g3)],["runner-kef-size",(U.renderSize())(gW)]]);return d.map(gX,g2);},renderRunner:function(g4){var g5;g5=d.ofArray([c.Element("td",d.ofArray([G.op_SpliceUntyped("runner-name")]),d.ofArray([c.TextNode(g4.runnerName)])),U.renderKef($.New(T,{$:0}),g4),U.renderKef($.New(T,{$:1}),g4)]);return c.Element("tr",[],g5);},renderSize:$.Field(function(){return function(g6){var g7,g8;g7=L.round(g6);g8=x.toSafe(L.formatDecimal(g7))+"$";return c.TextNode(g8);};}),renderTitle:function(g9,g_){var g$,ha,hb;g$=g9?["up","expanded"]:["down",""];ha=g$[1];hb=g$[0];return c.Element("a",d.ofArray([j.Create("href","#"),i.Handler("click",function(){return function(){return n.Set(g_.expanded,!n.Get(g_.expanded));};}),G.op_SpliceUntyped("runners-title "+x.toSafe(ha))]),d.ofArray([c.Element("i",d.ofArray([G.op_SpliceUntyped("fa fa-chevron-"+x.toSafe(hb))]),$.New(h,{$:0})),c.TextNode(g_.marketName)]));},window:function(he){var hf,hi,hk;hf=function(hg){return function(hh){return[hg%he,hh];};};hi=function(hj){return hj[0];};hk=function(hl){var hm,hn;hl[0];hm=hl[1];hn=p.map(function(ho){return ho[1];},hm);return p.toList(hn);};return function(hp){var hq,hr,hs;hq=p.mapi(hf,hp);hr=t.groupBy(hi,hq);hs=p.map(hk,hr);return p.toList(hs);};}},doc:function(ht){return ht;},op_SpliceUntyped:function(hu){return j.Create("class",hu);},renderExploreMarkets:function(hv){var hw;hw=d.ofArray([U.renderGameInfo(hv),U.renderMarkets(hv)]);return c.Concat(hw);},varError:$.Field(function(){return l.Create(false);})},Meetup:{doc:function(hx){return hx;},renderCountry:function(hy,hz){var hA,hB;hA=q.get_Do();hB=N.Bind(function(hC){return!hC?N.Const(c.get_Empty()):N.Bind(function(hD){var hE,hF,hG,hH;if(hD.$==1){hG=hD.$0;hF=c.Element("td",d.ofArray([j.Create("style","color : #009900;")]),d.ofArray([c.TextNode(hG)]));}else{hH=$.New(h,{$:0});hF=c.Element("td",[],hH);}hE=hF;return N.Const(M.doc(hE));},hz);},hy);return c.EmbedView(hB);},renderGamesHeaderRow:function(hI){return p.toList(p.delay(function(){var hK,hL,hM,hN,hO,hP;hL=d.ofArray([c.TextNode("\u2116")]);hM=d.ofArray([c.TextNode("\u0414\u043e\u043c\u0430")]);hN=$.New(h,{$:0});hO=d.ofArray([c.TextNode("\u0412 \u0433\u043e\u0441\u0442\u044f\u0445")]);hP=$.New(h,{$:0});hK=d.ofArray([c.Element("th",[],hL),c.Element("th",[],hM),c.Element("th",[],hN),c.Element("th",[],hO),c.Element("th",[],hP),c.Element("th",d.ofArray([j.Create("colspan","2")]),d.ofArray([c.TextNode("\u041f\u043e\u0431\u0435\u0434\u0430")])),c.Element("th",d.ofArray([j.Create("colspan","2")]),d.ofArray([c.TextNode("\u041d\u0438\u0447\u044c\u044f")])),c.Element("th",d.ofArray([j.Create("colspan","2")]),d.ofArray([c.TextNode("\u041f\u043e\u0440\u0430\u0436\u0435\u043d\u0438\u0435")]))]);return p.append(d.map(function(hQ){return M.doc(hQ);},hK),p.delay(function(){var hS,hX;hS=function(hT){var hU,hV,hW;if(hT){hV=d.ofArray([c.TextNode("GPB")]);hW=c.Element("th",[],hV);hU=M.doc(hW);}else{hU=c.get_Empty();}return hU;};hX=q.Map(hS,hI);return p.append([c.EmbedView(hX)],p.delay(function(){var hZ,h0;hZ=$.New(h,{$:0});h0=c.Element("th",[],hZ);return[M.doc(h0)];}));}));}));},renderKef:function(h1){var h2,h7,h8;h2=function(h3){var h4,h5,h6;if(h3.$==1){h5=h3.$0;h6=L.formatDecimal(h5);h4=c.TextNode(h6);}else{h4=c.get_Empty();}return h4;};h7=h1.get_View();h8=q.Map(h2,h7);return c.EmbedView(h8);},renderMeetup:function(h9,h_,h$){var ia,ie,_if,ij,ik,il,im,_in,io,ip,iq,ir,is,it,iu,iv,iw,ix;ia=function(ib){return c.Element("a",d.ofArray([j.Create("href","#"),j.Create("style","display: block; text-decoration: none;"),i.Handler("click",function(){return function(){return n.Set(F.varMode(),{$:1,$0:h$});};})]),d.ofArray([c.TextNode(ib)]));};_if=function(ig){var ih,ii;ih=ig[0];ii=ig[1];return $$.String(ih)+"."+$$.String(ii);};ij=h$.order.get_View();ik=q.Map(_if,ij);ie=d.ofArray([c.TextView(ik)]);il=d.ofArray([ia(h$.game.home)]);im=d.ofArray([c.TextView(h$.summary.get_View())]);_in=d.ofArray([ia(h$.game.away)]);io=d.ofArray([c.TextView(h$.status.get_View())]);ip=d.ofArray([M.renderKef(h$.winBack)]);iq=d.ofArray([M.renderKef(h$.winLay)]);ir=d.ofArray([M.renderKef(h$.drawBack)]);is=d.ofArray([M.renderKef(h$.drawLay)]);it=d.ofArray([M.renderKef(h$.loseBack)]);iu=d.ofArray([M.renderKef(h$.loseLay)]);iv=d.ofArray([M.renderTotalMatched(h9,h$)]);iw=d.ofArray([M.renderCountry(h_,h$.country.get_View())]);ix=[];return c.Concat([c.Element("tr",ix,[c.TextNode("\n    "),c.Element("td",[],[c.TextNode("\n        "),c.Concat(ie),c.TextNode("\n    ")]),c.TextNode("\n    \n    "),c.Element("td",[j.Create("style","color : RoyalBlue;")],[c.TextNode("\n        "),c.Concat(il),c.TextNode("\n    ")]),c.TextNode("\n    \n    "),c.Element("td",[j.Create("style","color : #009900;")],[c.TextNode("\n        "),c.Concat(im),c.TextNode("\n    ")]),c.TextNode("\n    \n    "),c.Element("td",[j.Create("style","color : SteelBlue;")],[c.TextNode("\n        "),c.Concat(_in),c.TextNode("\n    ")]),c.TextNode("\n\n    "),c.Element("td",[j.Create("style","color : #009900;")],[c.TextNode("\n        "),c.Concat(io),c.TextNode("\n    ")]),c.TextNode("\n\n    "),c.Element("td",[j.Create("class","kef win back")],[c.TextNode("\n        "),c.Concat(ip),c.TextNode("\n    ")]),c.TextNode("\n\n    "),c.Element("td",[j.Create("class","kef win lay")],[c.TextNode("\n        "),c.Concat(iq),c.TextNode("\n    ")]),c.TextNode("\n\n    "),c.Element("td",[j.Create("class","kef draw back")],[c.TextNode("\n        "),c.Concat(ir),c.TextNode("\n    ")]),c.TextNode("\n\n    "),c.Element("td",[j.Create("class","kef draw lay")],[c.TextNode("\n        "),c.Concat(is),c.TextNode("\n    ")]),c.TextNode("\n\n    "),c.Element("td",[j.Create("class","kef lose back")],[c.TextNode("\n        "),c.Concat(it),c.TextNode("\n    ")]),c.TextNode("\n\n    "),c.Element("td",[j.Create("class","kef lose lay")],[c.TextNode("\n        "),c.Concat(iu),c.TextNode("\n    ")]),c.TextNode("\n\n    "),c.Concat(iv),c.TextNode("\n\n    "),c.Concat(iw),c.TextNode("\n\n    ")])]);},renderTotalMatched:function(iy,iz){var iA,iB;iA=q.get_Do();iB=N.Bind(function(iC){var iD,iE;if(!iC){iD=N.Const(c.get_Empty());}else{iE=iz.totalMatched.get_View();iD=N.Bind(function(iF){var iG,iI,iL,iM,iN,iO,iP,iQ,iR;iG=function(iH){return iH[1];};iI=function(iJ){return function(iK){return iJ+iK;};};iL=d.map(iG,iF);iM=p.fold(iI,0,iL);if(iM===0){iP=$.New(h,{$:0});iO=c.Element("td",[],iP);}else{iR=$$.String(iM);iQ=d.ofArray([c.TextNode(iR)]);iO=c.Element("td",[],iQ);}iN=iO;return N.Const(M.doc(iN));},iE);}return iD;},iy);return c.EmbedView(iB);}},State:{PageLen:{get:function(){return I.validateValue(n.Get(I["var"]()));},localStorageKey:$.Field(function(){return"pageLen";}),set:function(iS){var iT,iU;iT=I.validateValue(iS);if(iT!==n.Get(I["var"]())){n.Set(I["var"](),iT);iU=W.set(I.localStorageKey(),iT);}else{iU=null;}return iU;},validateValue:function(iV){return iV<10?30:iV>40?40:iV;},"var":$.Field(function(){var iW,iX;iW=W.getWithDef(I.localStorageKey(),30);iX=I.validateValue(iW);return l.Create(iX);}),view:$.Field(function(){return I["var"]().get_View();})},ServerBetfairsSession:{check:$.Field(function(){return m.Delay(function(){return m.Bind(v.Async("WebFace:3",[]),function(iZ){X.hasServerBetfairsSession=function(){return iZ;};return m.Return(null);});});}),has:function(){return X.hasServerBetfairsSession();},hasNot:function(){return!X.hasServerBetfairsSession();},hasServerBetfairsSession:$.Field(function(){return true;})},events:$.Field(function(){var i0,i1,i2,i3,i5,i6,i7,i8,ja,jc,jd;i0=W.checkTodayKey("CentBetEventsCatalogueCreated","CentBetEventsCatalogue");try{i3=function(i4){return Y.id(i4);};i6=(B.get_Default().EncodeRecord(Y,[["gameId",B.get_Default().EncodeTuple([C,C]),0],["country",C,1],["markets",B.get_Default().EncodeList(B.get_Default().EncodeRecord(Q,[["marketId",C,0],["marketName",C,0],["runners",B.get_Default().EncodeList(B.get_Default().EncodeRecord(undefined,[["selectionId",C,0],["runnerName",C,0]])),0]])),0]]))();i5=z.LocalStorage("CentBetEventsCatalogue",{Encode:i6,Decode:(B.get_Default().DecodeRecord(Y,[["gameId",B.get_Default().DecodeTuple([C,C]),0],["country",C,1],["markets",B.get_Default().DecodeList(B.get_Default().DecodeRecord(Q,[["marketId",C,0],["marketName",C,0],["runners",B.get_Default().DecodeList(B.get_Default().DecodeRecord(undefined,[["selectionId",C,0],["runnerName",C,0]])),0]])),0]]))()});i2=D.CreateWithStorage(i3,i5);}catch(i7){i8=function(i9){return function(i_){var i$;i$="error when restoring "+x.prettyPrint(i9)+" - "+x.prettyPrint(i_);return y?y.log(i$):undefined;};};(i8("CentBetEventsCatalogue"))(i7);ja=function(jb){return Y.id(jb);};jc=$.New(h,{$:0});i2=D.Create(ja,jc);}i1=i2;jd=function(je){return function(jf){return function(jg){var jh;jh=x.prettyPrint(je)+" - "+$$.String(jf)+", "+x.prettyPrint(jg);return y?y.log(jh):undefined;};};};((jd("CentBetEventsCatalogue"))(i1.get_Length()))(i0);return i1;}),isCouponMode:function(){return w.Equals(n.Get(F.varMode()),{$:0});},meetups:$.Field(function(){var ji,jk;ji=function(jj){return Z.id(jj);};jk=$.New(h,{$:0});return D.Create(ji,jk);}),mtpevt:$.Field(function(){return function(jl){var jm,jn,jo;jm=Z.id(jl);jn=jm[0];jo=jm[1];return F.tryGetEventById(jn,jo);};}),notCouponMode:function(){var jp;jp=F.isCouponMode();return!jp;},tryGetCountry:$.Field(function(){var jq;jq=function(jr){return jr.country;};return function(js){var jt,ju,jv;jt=js[0];ju=js[1];jv=F.tryGetEventById(jt,ju);return o.bind(jq,jv);};}),tryGetEventById:function(jw,jx){var jy,jz,jC;jy=[jw,jx];jz=function(jA){var jB;jB=jA.gameId;return w.Equals(jy,jB);};jC=n.Get(F.events().Var);return p.tryFind(jz,jC);},tryGetMarkets:$.Field(function(){var jD;jD=function(jE){return jE.markets;};return function(jF){var jG,jH,jI;jG=jF[0];jH=jF[1];jI=F.tryGetEventById(jG,jH);return o.map(jD,jI);};}),varColumnCountryVisible:$.Field(function(){return l.Create(false);}),varColumnGpbVisible:$.Field(function(){return l.Create(false);}),varCurrentPageNumber:$.Field(function(){return l.Create(0);}),varGameDetailError:$.Field(function(){return l.Create(false);}),varMode:$.Field(function(){return l.Create({$:0});}),varPagesCount:$.Field(function(){return l.Create(1);}),varTargetPageNumber:$.Field(function(){return l.Create(0);})},Utils:{Left:function(jJ){return{$:0,$0:jJ};},LocalStorage:{checkTodayKey:function(jK,jL){var jM,jN,jO,jP;jM=_0.now();jN=W.getWithDef(jK,jM);if(jM-jN>1*86400000){W.clear(jL);W.set(jK,_0.now());jP=function(jQ){return function(jR){var jS;jS="local storage "+x.prettyPrint(jQ)+" of "+x.prettyPrint(jR)+" is inspired";return y?y.log(jS):undefined;};};(jP(jL))(jN);jO=jM;}else{jO=jN;}return jO;},clear:function(jT){return W.strg().removeItem(jT);},get:function(jU){var jV,jW,jX,jY,jZ;try{jW=W.strg().getItem(jU);jX=_1.parse(jW);jV={$:1,$0:jX};}catch(jY){jZ=function(j0){return function(j1){var j2;j2="error getting from local storage, key "+x.prettyPrint(j0)+" : "+x.prettyPrint(j1);return y?y.log(j2):undefined;};};(jZ(jU))(jY);jV={$:0};}return jV;},getWithDef:function(j3,j4){var j5,j6,j7;j5=W.get(j3);if(j5.$==1){j7=j5.$0;j6=j7;}else{j6=j4;}return j6;},set:function(j8,j9){var j_,j$,ka,kb;try{j$=_1.stringify(j9);j_=W.strg().setItem(j8,j$);}catch(ka){kb=function(kc){return function(kd){return function(ke){return O.FailWith("error setting to local storage, key "+x.prettyPrint(kc)+", value "+x.prettyPrint(kd)+" : "+x.prettyPrint(ke));};};};j_=((kb(j8))(j9))(ka);}return j_;},strg:$.Field(function(){return _2.localStorage;})},Option:{getWith:function(kf,kg){var kh,ki;if(kg.$==0){kh=kf;}else{ki=kg.$0;kh=ki;}return kh;}},Right:function(kj){return{$:1,$0:kj};},createModal:function(kk,kl){var km,ko,kq;km=function(kn){return kn;};ko=function(kp){return j.Create("class",kp);};(L.initializeModalVar())(kl);kq=function(kr){return function(ks){var kt,kx;kt=function(ku){return ku?km(c.Element("div",d.ofArray([ko("w3-modal"),j.Create("style","display : block;")]),d.ofArray([c.Element("div",p.toList(p.delay(function(){return p.append(kr,p.delay(function(){return[ko("w3-modal-content w3-animate-zoom w3-card-8")];}));})),ks)]))):c.get_Empty();};kx=q.Map(kt,kk);return c.EmbedView(kx);};};return kq;},dateTimeToString:function($s){var $0=this,$this=this;return $$.dateTimeToString($s);},formatDecimal:function(ky){return L.trimEnd(ky.toFixed(6),d.ofArray([48,46]));},formatDecimalOption:function(kz){var kA,kB;if(kz.$==1){kB=kz.$0;kA=L.formatDecimal(kB);}else{kA="";}return kA;},getDatePart:function(kC){var kD;kD=new _0(kC.getTime());kD.setHours(0,0,0,0);return kD;},initializeModalVar:$.Field(function(){var kE,kF;kE=[$.New(h,{$:0})];kF=function(kG){var kH,kI,kK;if(kG.target.className==="w3-modal"){kI=function(kJ){return kJ(null);};kK=kE[0];kH=p.iter(kI,kK);}else{kH=null;}return kH;};_2.addEventListener("click",kF,false);return function(kL){kE[0]=$.New(h,{$:1,$0:kL,$1:kE[0]});};}),round:function($x){var $0=this,$this=this;return $$.Math.round($x);},titleAndCloseButton:function(kM,kN){var kO,kQ;kO=function(kP){return j.Create("class",kP);};kQ=d.ofArray([kO("w3-row w3-teal")]);return c.Element("header",kQ,d.ofArray([c.Element("h4",d.ofArray([kO("w3-col s11 w3-center"),j.Create("style","padding-left : 10px;")]),d.ofArray([c.TextNode(kM)])),c.Element("div",d.ofArray([kO("w3-col s1 w3-center")]),d.ofArray([c.Element("span",d.ofArray([kO("w3-closebtn"),j.Create("style","padding-right : 5px;"),i.Handler("click",function(){return function(){return kN(null);};})]),d.ofArray([c.TextNode("×")]))]))]));},trimEnd:function(kT,kU){var kV,kW,kX,kY,kZ,k0,k1,k2,k3,k4,k5,k6;kV=[kT,kU];if(kV[0]===""){kW="";}else{if(kV[1].$==1){kY=kV[0];kV[1];kZ=kV[1].$0;if(kY.charCodeAt(kY.length-1)===kZ){kV[1].$0;k1=kV[1];k2=kV[0];k0=L.trimEnd(_3.string(k2,{$:0},{$:1,$0:k2.length-2}),k1);}else{if(kV[1].$==1){k4=kV[0];k5=kV[1].$1;k3=L.trimEnd(k4,k5);}else{k3=O.Raise(_4.New("C:\\Users\\fpawel\\Documents\\Visual Studio 2015\\Projects\\Betfair\\CentBet\\WebFace\\ClientUtils.fs",8,18));}k0=k3;}kX=k0;}else{k6=kV[0];kX=k6;}kW=kX;}return kW;},updateVarValue:function(k7,k8){return!w.Equals(n.Get(k7),k8)?n.Set(k7,k8):null;},"|Left|Right|":function(k9){var k_,k$,la;if(k9.$==1){k$=k9.$0;k_={$:1,$0:k$};}else{la=k9.$0;k_={$:0,$0:la};}return k_;}},Work:{Work:$.Class({},{loop:function(lb){return m.Delay(function(){var ld;ld=m.Delay(function(){return m.Bind(lb.work,function(){return m.Bind(m.Sleep(lb.sleepInterval),function(){return m.Return(null);});});});return m.Combine(m.TryWith(ld,function(lh){var li,lm;li=function(lj){return function(lk){var ll;ll="task error "+x.prettyPrint(lj)+" : "+x.prettyPrint(lk);return y?y.log(ll):undefined;};};lm=lb.what;(li(lm))(lh);return m.Bind(m.Sleep(lb.sleepErrorInterval),function(){return m.Return(null);});}),m.Delay(function(){return _5.loop(lb);}));});},"new":function(lp,lq,lr,ls){var lt;lt=$.New(_5,{what:lp,sleepInterval:lq,sleepErrorInterval:lr,work:ls});return _5.run(lt);},run:function(lu){var lv;lv=m.Delay(function(){var lx,lA;lx=function(ly){var lz;lz="task "+x.prettyPrint(ly)+" : started";return y?y.log(lz):undefined;};lA=lu.what;lx(lA);return m.Bind(_5.loop(lu),function(){var lC,lF;lC=function(lD){var lE;lE="task "+x.prettyPrint(lD)+" : terminated";return y?y.log(lE):undefined;};lF=lu.what;lC(lF);return m.Return(null);});});return m.Start(lv,{$:0});}}),addNewGames:function(lG){var lH,lI,lJ,lY,l0,l2,l3,l4;lH=n.Get(F.meetups().Var);lI=p.toList(lH);F.meetups().Clear();lJ=function(lK){var lL,lM,lN,lO,lP,lQ,lR,lU,lV,lW,lX;lL=lK[0];lM=lK[1];lN=lK[2];lO=lL.gameId;lP=lO[0];lQ=lO[1];lR=function(lS){return d.map(function(lT){return R.New(lT);},lS.markets);};lU=F.tryGetEventById(lP,lQ);lV=o.map(lR,lU);lW=$.New(h,{$:0});lX=V.getWith(lW,lV);return $.New(Z,{game:lL,playMinute:l.Create(lM.playMinute),status:l.Create(lM.status),summary:l.Create(lM.summary),order:l.Create(lM.order),winBack:l.Create(lM.winBack),winLay:l.Create(lM.winLay),drawBack:l.Create(lM.drawBack),drawLay:l.Create(lM.drawLay),loseBack:l.Create(lM.loseBack),loseLay:l.Create(lM.loseLay),marketsBook:lX,totalMatched:l.Create($.New(h,{$:0})),country:l.Create((F.tryGetCountry())(lL.gameId)),hash:lN});};lY=function(lZ){return n.Get(lZ.order);};l0=function(l1){return F.meetups().Add(l1);};l2=d.map(lJ,lG);l3=p.append(lI,l2);l4=p.sortBy(lY,l3);return p.iter(l0,l4);},processCoupon:function(l5){return m.Delay(function(){var l7,l8,l_,l$,ma,mb,mc;if(F.notCouponMode()){l7=m.Return(null);}else{l8=function(l9){return[l9.game.gameId,l9.hash];};l_=n.Get(F.meetups().Var);l$=p.map(l8,l_);ma=p.toList(l$);mb=I.get();mc=v.Async("WebFace:0",[ma,n.Get(F.varTargetPageNumber()),mb]);l7=m.Bind(mc,function(md){var me,mf,mg,mh,mi,mj,mk;me=md[1];mf=md[2];mg=md[0];mh=md[3];mi=(mh/mb>>0)+(mh%mb===0?0:1);L.updateVarValue(F.varPagesCount(),mi);if(n.Get(F.varTargetPageNumber())>mi){n.Set(F.varTargetPageNumber(),0);mk=m.Return(null);}else{mk=m.Return(null);}mj=mk;return m.Combine(mj,m.Delay(function(){var mm,mn,mo;mn=mg.$==0;if(!mn){E.addNewGames(mg);mo=m.Return(null);}else{mo=m.Return(null);}mm=mo;return m.Combine(mm,m.Delay(function(){var mq;mq=function(mr){return F.meetups().RemoveByKey(mr);};p.iter(mq,mf);(E.updateCurentCoupon())(me);E.updateColumnCountryVisible();E.updateColumnGpbVisible();L.updateVarValue(l5,true);L.updateVarValue(F.varCurrentPageNumber(),n.Get(F.varTargetPageNumber()));return m.Return(null);}));}));});}return l7;});},processEvents:$.Field(function(){return m.Delay(function(){var mt,mu,mv,mw,mz,mA,mB,mD,mE,mF;if(F.notCouponMode()){mt=m.Return(null);}else{mu=n.Get(F.meetups().Var);mv=F.mtpevt();mw=function(mx){var my;my=mv(mx);return my.$==0;};mz=p.filter(mw,mu);if(p.isEmpty(mz)?true:X.hasNot()){mA=m.Return(null);}else{mB=function(mC){return mC.game.gameId;};mD=p.map(mB,mz);mE=p.toList(mD);mF=v.Async("WebFace:4",[mE]);mA=m.Bind(mF,function(mG){return m.Combine(m.For(mG,function(mH){var mI,mJ,mK,mL,mM,mO;mI=mH[1];mJ=mH[0];mK=mH[2];mL=$.New(Y,{gameId:mJ,country:mK,markets:$.New(h,{$:0})});F.events().Add(mL);mM=function(mN){return n.Set(mN.country,mL.country);};mO=F.meetups().TryFindByKey(mJ);o.iter(mM,mO);return m.Return(null);}),m.Delay(function(){E.updateColumnCountryVisible();E.updateColumnGpbVisible();return m.Return(null);}));});}mt=mA;}return mt;});}),processGameDetail:$.Field(function(){return m.Delay(function(){var mR,mS,mT,mU,mV,mW,mX;mR=n.Get(F.varMode());if(mR.$==1){mT=mR.$0;mU=mT.game.gameId;mV=mU[0];mW=mU[1];mX=v.Async("WebFace:1",[mV,mW]);mS=m.Bind(mX,function(mY){var mZ,m0,m1,m2,m3,m4;mZ=F.varGameDetailError();m0=mY.$==0;n.Set(mZ,m0);if(mY.$==1){m3=mY.$0[0];m4=mY.$0[1];E.updateGameInfo(mT,m3,m4);m2=m.Return(null);}else{m2=m.Return(null);}m1=m2;return m.Combine(m1,m.Delay(function(){var m6,m8,m9,m_,na,nb,nc;m6=function(m7){return n.Get(m7.expanded);};m8=mT.marketsBook;m9=p.filter(m6,m8);m_=function(m$){return R.id(m$);};na=p.map(m_,m9);nb=p.toList(na);nc=v.Async("WebFace:7",[nb]);return m.Bind(nc,function(nd){return m.For(m9,function(ne){var nf,ng;L.updateVarValue(ne.pricesReaded,true);nf=_7.TryFind(ne.marketId,nd);ng=function(nh){var ni,nj,nk,nl,nm,nq;ni=ne.runners;nj=_8.Get(ni);try{while(nj.MoveNext()){nl=nj.get_Current();nm=function(nn){var no,np;no=nn[0];np=nn[1];L.updateVarValue(nl.back,no);return L.updateVarValue(nl.lay,np);};nq=_7.TryFind(nl.selectionId,nh);o.iter(nm,nq);}}finally{nj.Dispose!=undefined?nj.Dispose():null;}return nk;};o.iter(ng,nf);return m.Return(null);});});}));});}else{mS=m.Return(null);}return mS;});}),processMarkets:$.Field(function(){return m.Delay(function(){var ns,nt,nu,nz,nA,nB,nC,nD,nE;if(F.notCouponMode()){ns=m.Return(null);}else{nt=n.Get(F.meetups().Var);nu=function(nv){var nw,ny;nw=function(nx){return nx.markets.$==0?{$:1,$0:nv.game.gameId}:{$:0};};ny=(F.mtpevt())(nv);return o.bind(nw,ny);};nz=p.choose(nu,nt);if(p.isEmpty(nz)?true:X.hasNot()){nA=m.Return(null);}else{nB=p.head(nz);nC=nB[0];nD=nB[1];nE=v.Async("WebFace:5",[nC,nD]);nA=m.Bind(nE,function(nF){var nG;nG=function(nH){var nI,nQ;nI=function(nJ){var nK;nK=d.map(function(nL){var nM,nN,nO,nP;nM=nL[0];nN=nL[1];nO=nL[2];nP=nL[3];return Q.New(nM,nN,nO,nP);},nH);return{$:1,$0:$.New(Y,{gameId:nJ.gameId,country:nJ.country,markets:nK})};};F.events().UpdateBy(nI,nB);nQ=function(nR){var nS;nS=d.map(function(nT){var nU,nV,nW,nX,nY;nU=nT[0];nV=nT[1];nW=nT[2];nX=nT[3];nY=Q.New(nU,nV,nW,nX);return R.New(nY);},nH);return{$:1,$0:$.New(Z,{game:nR.game,playMinute:nR.playMinute,status:nR.status,summary:nR.summary,order:nR.order,winBack:nR.winBack,winLay:nR.winLay,drawBack:nR.drawBack,drawLay:nR.drawLay,loseBack:nR.loseBack,loseLay:nR.loseLay,marketsBook:nS,totalMatched:nR.totalMatched,country:nR.country,hash:nR.hash})};};return F.meetups().UpdateBy(nQ,nB);};o.iter(nG,nF);return m.Return(null);});}ns=nA;}return ns;});}),processTotalMatched:$.Field(function(){return m.Delay(function(){var n0,n1,n2,n_;if(F.notCouponMode()){n0=m.Return(null);}else{n1=n.Get(F.meetups().Var);n2=function(n3){var n4,n6,n8,n9;n4=function(n5){return n5.markets;};n6=function(n7){return n7.$==0?{$:0}:{$:1,$0:n3.game.gameId};};n8=(F.mtpevt())(n3);n9=o.map(n4,n8);return o.bind(n6,n9);};n_=p.choose(n2,n1);n0=(p.isEmpty(n_)?true:X.hasNot())?m.Return(null):m.Combine(m.For(n_,function(n$){var oa,ob,oc;if(F.notCouponMode()){oa=m.Return(null);}else{ob=n$[0];oc=n$[1];oa=m.Bind(v.Async("WebFace:6",[ob,oc]),function(od){var oe,of,og;if(od.$==0){oe=m.Return(null);}else{of=n$[0];og=n$[1];E.updateTotalMatched(of,og,od);oe=m.Return(null);}return oe;});}return oa;}),m.Delay(function(){E.updateColumnGpbVisible();return m.Return(null);}));}return n0;});}),start:function(oi){var oj;oj=function(ok,ol){var om,on,oo;om=ok[0];on=ok[1];oo=ok[2];return _5["new"](om,on,oo,ol);};oj(["COUPON",0,0],E.processCoupon(oi));oj(["CHECK-SERVER-BETFAIRS-SESSION",0,0],X.check());oj(["EVENTS-CATALOGUE",0,0],E.processEvents());oj(["MARKETS-CATALOGUE",0,0],E.processMarkets());oj(["TOTAL-MATCHED",0,0],E.processTotalMatched());return oj(["GAME-DETAIL",0,0],E.processGameDetail());},updateColumnCountryVisible:function(){var op,oq,oz;op=n.Get(F.meetups().Var);oq=function(or){var os,ou,ov,ow,ox,oy;os=function(ot){return ot.country;};ou=(F.mtpevt())(or);ov=o.bind(os,ou);if(ov.$==1){ox=ov.$0;if(ox!==""){ov.$0;oy=true;}else{oy=false;}ow=oy;}else{ow=false;}return ow;};oz=p.exists(oq,op);return L.updateVarValue(F.varColumnCountryVisible(),oz);},updateColumnGpbVisible:function(){var oA,oB,oJ;oA=n.Get(F.meetups().Var);oB=function(oC){var oD,oF,oH,oI;oD=function(oE){return oE[1];};oF=function(oG){return 0<oG;};oH=n.Get(oC.totalMatched);oI=p.map(oD,oH);return p.exists(oF,oI);};oJ=p.exists(oB,oA);return L.updateVarValue(F.varColumnGpbVisible(),oJ);},updateCurentCoupon:$.Field(function(){var oK;oK=function(oL){var oM,oN,oO,oP,oR;oM=oL[0];oN=oL[1];oO=oL[2];oP=function(oQ){return[oQ,oN,oO];};oR=F.meetups().TryFindByKey(oM);return o.map(oP,oR);};return function(oS){var oT;oT=d.choose(oK,oS);return p.iter(function(oU){var oV,oW,oX;oV=oU[0];oW=oU[1];oX=oU[2];return E.updateGameInfo(oV,oW,oX);},oT);};}),updateGameInfo:function(oY,oZ,o0){oY.hash=o0;L.updateVarValue(oY.playMinute,oZ.playMinute);L.updateVarValue(oY.status,oZ.status);L.updateVarValue(oY.summary,oZ.summary);L.updateVarValue(oY.order,oZ.order);L.updateVarValue(oY.winBack,oZ.winBack);L.updateVarValue(oY.winLay,oZ.winLay);L.updateVarValue(oY.drawBack,oZ.drawBack);L.updateVarValue(oY.drawLay,oZ.drawLay);L.updateVarValue(oY.loseBack,oZ.loseBack);return L.updateVarValue(oY.loseLay,oZ.loseLay);},updateTotalMatched:function(o1,o2,o3){var o4,o5,o7;o4=[o1,o2];o5=function(o6){return L.updateVarValue(o6.totalMatched,o3);};o7=F.meetups().TryFindByKey(o4);return o.iter(o5,o7);}}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.UI);b=$.Safe(a.Next);c=$.Safe(b.Doc);d=$.Safe($$.WebSharper.List);e=$.Safe($$.CentBet);f=$.Safe(e.Client);g=$.Safe(f.Admin);h=$.Safe(d.T);i=$.Safe(b.AttrModule);j=$.Safe(b.AttrProxy);k=$.Safe(b.Key);l=$.Safe(b.Var);m=$.Safe($$.WebSharper.Concurrency);n=$.Safe(b.Var1);o=$.Safe($$.WebSharper.Option);p=$.Safe($$.WebSharper.Seq);q=$.Safe(b.View);r=$.Safe(g.RecordType);s=$.Safe($$.WebSharper.Strings);t=$.Safe($$.Seq);u=$.Safe($$.WebSharper.Remoting);v=$.Safe(u.AjaxRemotingProvider);w=$.Safe($$.WebSharper.Unchecked);x=$.Safe($$.WebSharper.PrintfHelpers);y=$.Safe($$.console);z=$.Safe(b.Storage1);A=$.Safe($$.WebSharper.Json);B=$.Safe(A.Provider);C=$.Safe(B.Id);D=$.Safe(b.ListModel);E=$.Safe(f.Work);F=$.Safe(f.State);G=$.Safe(f.GameDetail);H=$.Safe(f.Coupon);I=$.Safe(F.PageLen);J=$.Safe(H.SettingsDialog);K=$.Safe(J.Helpers);L=$.Safe(f.Utils);M=$.Safe(f.Meetup);N=$.Safe(b.View1);O=$.Safe($$.WebSharper.Operators);P=$.Safe(f.Football);Q=$.Safe(P.Market);R=$.Safe(P.MarketBook);S=$.Safe(P.RunnerBook);T=$.Safe(P.Side);U=$.Safe(G.Helpers);V=$.Safe(L.Option);W=$.Safe(L.LocalStorage);X=$.Safe(F.ServerBetfairsSession);Y=$.Safe(P.Event);Z=$.Safe(P.Meetup);_0=$.Safe($$.Date);_1=$.Safe($$.JSON);_2=$.Safe($$.window);_3=$.Safe($$.WebSharper.Slice);_4=$.Safe($$.WebSharper.MatchFailureException);_5=$.Safe(E.Work);_6=$.Safe($$.WebSharper.Collections);_7=$.Safe(_6.MapModule);return _8=$.Safe($$.WebSharper.Enumerator);});$.OnLoad(function(){E.updateCurentCoupon();E.processTotalMatched();E.processMarkets();E.processGameDetail();E.processEvents();L.initializeModalVar();W.strg();F.varTargetPageNumber();F.varPagesCount();F.varMode();F.varGameDetailError();F.varCurrentPageNumber();F.varColumnGpbVisible();F.varColumnCountryVisible();F.tryGetMarkets();F.tryGetCountry();F.mtpevt();F.meetups();F.events();X.hasServerBetfairsSession();X.check();I.view();I["var"]();I.localStorageKey();G.varError();U.renderSize();U.renderAvailPricesTooltip();H["render\u0421oupon"]();H.renderPagination();H.renderMeetup();J.elt();K.varVisible();K.renderDialog();K.content();g.varConsole();g.varCommandsHistory();g.varCmd();g.renderRecord();g.op_SpliceUntyped();g["cmd-input"]();return;});}());
